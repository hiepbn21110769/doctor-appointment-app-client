import{$ as ne,Nc as ie,c as M,e as le,f as ue,g as Z,i as ee,k as te}from"./chunk-UHTXMJPS.js";var ae=le((oe,Y)=>{"use strict";(function(I){if(typeof oe=="object"&&typeof Y<"u")Y.exports=I();else if(typeof define=="function"&&define.amd)define([],I);else{var c;typeof window<"u"?c=window:typeof global<"u"?c=global:typeof self<"u"?c=self:c=this,c.SockJS=I()}})(function(){var I,c,m;return function(){function e(r,v,l){function n(s,a){if(!v[s]){if(!r[s]){var u=typeof M=="function"&&M;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var o=new Error("Cannot find module '"+s+"'");throw o.code="MODULE_NOT_FOUND",o}var f=v[s]={exports:{}};r[s][0].call(f.exports,function(w){var d=r[s][1][w];return n(d||w)},f,f.exports,e,r,v,l)}return v[s].exports}for(var i=typeof M=="function"&&M,t=0;t<l.length;t++)n(l[t]);return n}return e}()({1:[function(e,r,v){(function(l){(function(){"use strict";var n=e("./transport-list");r.exports=e("./main")(n),"_sockjs_onload"in l&&setTimeout(l._sockjs_onload,1)}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./main":14,"./transport-list":16}],2:[function(e,r,v){"use strict";var l=e("inherits"),n=e("./event");function i(){n.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}l(i,n),r.exports=i},{"./event":4,inherits:57}],3:[function(e,r,v){"use strict";var l=e("inherits"),n=e("./eventtarget");function i(){n.call(this)}l(i,n),i.prototype.removeAllListeners=function(t){t?delete this._listeners[t]:this._listeners={}},i.prototype.once=function(t,s){var a=this,u=!1;function o(){a.removeListener(t,o),u||(u=!0,s.apply(this,arguments))}this.on(t,o)},i.prototype.emit=function(){var t=arguments[0],s=this._listeners[t];if(s){for(var a=arguments.length,u=new Array(a-1),o=1;o<a;o++)u[o-1]=arguments[o];for(var f=0;f<s.length;f++)s[f].apply(this,u)}},i.prototype.on=i.prototype.addListener=n.prototype.addEventListener,i.prototype.removeListener=n.prototype.removeEventListener,r.exports.EventEmitter=i},{"./eventtarget":5,inherits:57}],4:[function(e,r,v){"use strict";function l(n){this.type=n}l.prototype.initEvent=function(n,i,t){return this.type=n,this.bubbles=i,this.cancelable=t,this.timeStamp=+new Date,this},l.prototype.stopPropagation=function(){},l.prototype.preventDefault=function(){},l.CAPTURING_PHASE=1,l.AT_TARGET=2,l.BUBBLING_PHASE=3,r.exports=l},{}],5:[function(e,r,v){"use strict";function l(){this._listeners={}}l.prototype.addEventListener=function(n,i){n in this._listeners||(this._listeners[n]=[]);var t=this._listeners[n];t.indexOf(i)===-1&&(t=t.concat([i])),this._listeners[n]=t},l.prototype.removeEventListener=function(n,i){var t=this._listeners[n];if(t){var s=t.indexOf(i);if(s!==-1){t.length>1?this._listeners[n]=t.slice(0,s).concat(t.slice(s+1)):delete this._listeners[n];return}}},l.prototype.dispatchEvent=function(){var n=arguments[0],i=n.type,t=arguments.length===1?[n]:Array.apply(null,arguments);if(this["on"+i]&&this["on"+i].apply(this,t),i in this._listeners)for(var s=this._listeners[i],a=0;a<s.length;a++)s[a].apply(this,t)},r.exports=l},{}],6:[function(e,r,v){"use strict";var l=e("inherits"),n=e("./event");function i(t){n.call(this),this.initEvent("message",!1,!1),this.data=t}l(i,n),r.exports=i},{"./event":4,inherits:57}],7:[function(e,r,v){"use strict";var l=e("./utils/iframe");function n(i){this._transport=i,i.on("message",this._transportMessage.bind(this)),i.on("close",this._transportClose.bind(this))}n.prototype._transportClose=function(i,t){l.postMessage("c",JSON.stringify([i,t]))},n.prototype._transportMessage=function(i){l.postMessage("t",i)},n.prototype._send=function(i){this._transport.send(i)},n.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},r.exports=n},{"./utils/iframe":47}],8:[function(e,r,v){(function(l){(function(){"use strict";var n=e("./utils/url"),i=e("./utils/event"),t=e("./facade"),s=e("./info-iframe-receiver"),a=e("./utils/iframe"),u=e("./location"),o=function(){};l.env.NODE_ENV!=="production"&&(o=e("debug")("sockjs-client:iframe-bootstrap")),r.exports=function(f,w){var d={};w.forEach(function(p){p.facadeTransport&&(d[p.facadeTransport.transportName]=p.facadeTransport)}),d[s.transportName]=s;var h;f.bootstrap_iframe=function(){var p;a.currentWindowId=u.hash.slice(1);var g=function(S){if(S.source===parent&&(typeof h>"u"&&(h=S.origin),S.origin===h)){var N;try{N=JSON.parse(S.data)}catch{o("bad json",S.data);return}if(N.windowId===a.currentWindowId)switch(N.type){case"s":var j;try{j=JSON.parse(N.data)}catch{o("bad json",N.data);break}var F=j[0],A=j[1],x=j[2],_=j[3];if(o(F,A,x,_),F!==f.version)throw new Error('Incompatible SockJS! Main site uses: "'+F+'", the iframe: "'+f.version+'".');if(!n.isOriginEqual(x,u.href)||!n.isOriginEqual(_,u.href))throw new Error("Can't connect to different domain from within an iframe. ("+u.href+", "+x+", "+_+")");p=new t(new d[A](x,_));break;case"m":p._send(N.data);break;case"c":p&&p._close(),p=null;break}}};i.attachEvent("message",g),a.postMessage("s")}}}).call(this)}).call(this,{env:{}})},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,debug:55}],9:[function(e,r,v){(function(l){(function(){"use strict";var n=e("events").EventEmitter,i=e("inherits"),t=e("./utils/object"),s=function(){};l.env.NODE_ENV!=="production"&&(s=e("debug")("sockjs-client:info-ajax"));function a(u,o){n.call(this);var f=this,w=+new Date;this.xo=new o("GET",u),this.xo.once("finish",function(d,h){var p,g;if(d===200){if(g=+new Date-w,h)try{p=JSON.parse(h)}catch{s("bad json",h)}t.isObject(p)||(p={})}f.emit("finish",p,g),f.removeAllListeners()})}i(a,n),a.prototype.close=function(){this.removeAllListeners(),this.xo.close()},r.exports=a}).call(this)}).call(this,{env:{}})},{"./utils/object":49,debug:55,events:3,inherits:57}],10:[function(e,r,v){"use strict";var l=e("inherits"),n=e("events").EventEmitter,i=e("./transport/sender/xhr-local"),t=e("./info-ajax");function s(a){var u=this;n.call(this),this.ir=new t(a,i),this.ir.once("finish",function(o,f){u.ir=null,u.emit("message",JSON.stringify([o,f]))})}l(s,n),s.transportName="iframe-info-receiver",s.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},r.exports=s},{"./info-ajax":9,"./transport/sender/xhr-local":37,events:3,inherits:57}],11:[function(e,r,v){(function(l,n){(function(){"use strict";var i=e("events").EventEmitter,t=e("inherits"),s=e("./utils/event"),a=e("./transport/iframe"),u=e("./info-iframe-receiver"),o=function(){};l.env.NODE_ENV!=="production"&&(o=e("debug")("sockjs-client:info-iframe"));function f(w,d){var h=this;i.call(this);var p=function(){var g=h.ifr=new a(u.transportName,d,w);g.once("message",function(S){if(S){var N;try{N=JSON.parse(S)}catch{o("bad json",S),h.emit("finish"),h.close();return}var j=N[0],F=N[1];h.emit("finish",j,F)}h.close()}),g.once("close",function(){h.emit("finish"),h.close()})};n.document.body?p():s.attachEvent("load",p)}t(f,i),f.enabled=function(){return a.enabled()},f.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},r.exports=f}).call(this)}).call(this,{env:{}},typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,debug:55,events:3,inherits:57}],12:[function(e,r,v){(function(l){(function(){"use strict";var n=e("events").EventEmitter,i=e("inherits"),t=e("./utils/url"),s=e("./transport/sender/xdr"),a=e("./transport/sender/xhr-cors"),u=e("./transport/sender/xhr-local"),o=e("./transport/sender/xhr-fake"),f=e("./info-iframe"),w=e("./info-ajax"),d=function(){};l.env.NODE_ENV!=="production"&&(d=e("debug")("sockjs-client:info-receiver"));function h(p,g){d(p);var S=this;n.call(this),setTimeout(function(){S.doXhr(p,g)},0)}i(h,n),h._getReceiver=function(p,g,S){return S.sameOrigin?new w(g,u):a.enabled?new w(g,a):s.enabled&&S.sameScheme?new w(g,s):f.enabled()?new f(p,g):new w(g,o)},h.prototype.doXhr=function(p,g){var S=this,N=t.addPath(p,"/info");d("doXhr",N),this.xo=h._getReceiver(p,N,g),this.timeoutRef=setTimeout(function(){d("timeout"),S._cleanup(!1),S.emit("finish")},h.timeout),this.xo.once("finish",function(j,F){d("finish",j,F),S._cleanup(!0),S.emit("finish",j,F)})},h.prototype._cleanup=function(p){d("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!p&&this.xo&&this.xo.close(),this.xo=null},h.prototype.close=function(){d("close"),this.removeAllListeners(),this._cleanup(!1)},h.timeout=8e3,r.exports=h}).call(this)}).call(this,{env:{}})},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,debug:55,events:3,inherits:57}],13:[function(e,r,v){(function(l){(function(){"use strict";r.exports=l.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],14:[function(e,r,v){(function(l,n){(function(){"use strict";e("./shims");var i=e("url-parse"),t=e("inherits"),s=e("./utils/random"),a=e("./utils/escape"),u=e("./utils/url"),o=e("./utils/event"),f=e("./utils/transport"),w=e("./utils/object"),d=e("./utils/browser"),h=e("./utils/log"),p=e("./event/event"),g=e("./event/eventtarget"),S=e("./location"),N=e("./event/close"),j=e("./event/trans-message"),F=e("./info-receiver"),A=function(){};l.env.NODE_ENV!=="production"&&(A=e("debug")("sockjs-client:main"));var x;function _(b,E,y){if(!(this instanceof _))return new _(b,E,y);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");g.call(this),this.readyState=_.CONNECTING,this.extensions="",this.protocol="",y=y||{},y.protocols_whitelist&&h.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=y.transports,this._transportOptions=y.transportOptions||{},this._timeout=y.timeout||0;var k=y.sessionId||8;if(typeof k=="function")this._generateSessionId=k;else if(typeof k=="number")this._generateSessionId=function(){return s.string(k)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=y.server||s.numberString(1e3);var C=new i(b);if(!C.host||!C.protocol)throw new SyntaxError("The URL '"+b+"' is invalid");if(C.hash)throw new SyntaxError("The URL must not contain a fragment");if(C.protocol!=="http:"&&C.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+C.protocol+"' is not allowed.");var R=C.protocol==="https:";if(S.protocol==="https:"&&!R&&!u.isLoopbackAddr(C.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");E?Array.isArray(E)||(E=[E]):E=[];var H=E.sort();H.forEach(function(T,L){if(!T)throw new SyntaxError("The protocols entry '"+T+"' is invalid.");if(L<H.length-1&&T===H[L+1])throw new SyntaxError("The protocols entry '"+T+"' is duplicated.")});var B=u.getOrigin(S.href);this._origin=B?B.toLowerCase():null,C.set("pathname",C.pathname.replace(/\/+$/,"")),this.url=C.href,A("using url",this.url),this._urlInfo={nullOrigin:!d.hasDomain(),sameOrigin:u.isOriginEqual(this.url,S.href),sameScheme:u.isSchemeEqual(this.url,S.href)},this._ir=new F(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}t(_,g);function O(b){return b===1e3||b>=3e3&&b<=4999}_.prototype.close=function(b,E){if(b&&!O(b))throw new Error("InvalidAccessError: Invalid code");if(E&&E.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===_.CLOSING||this.readyState===_.CLOSED)){var y=!0;this._close(b||1e3,E||"Normal closure",y)}},_.prototype.send=function(b){if(typeof b!="string"&&(b=""+b),this.readyState===_.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===_.OPEN&&this._transport.send(a.quote(b))},_.version=e("./version"),_.CONNECTING=0,_.OPEN=1,_.CLOSING=2,_.CLOSED=3,_.prototype._receiveInfo=function(b,E){if(A("_receiveInfo",E),this._ir=null,!b){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(E),this._transUrl=b.base_url?b.base_url:this.url,b=w.extend(b,this._urlInfo),A("info",b);var y=x.filterToEnabled(this._transportsWhitelist,b);this._transports=y.main,A(this._transports.length+" enabled transports"),this._connect()},_.prototype._connect=function(){for(var b=this._transports.shift();b;b=this._transports.shift()){if(A("attempt",b.transportName),b.needBody&&(!n.document.body||typeof n.document.readyState<"u"&&n.document.readyState!=="complete"&&n.document.readyState!=="interactive")){A("waiting for body"),this._transports.unshift(b),o.attachEvent("load",this._connect.bind(this));return}var E=Math.max(this._timeout,this._rto*b.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),E),A("using timeout",E);var y=u.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),k=this._transportOptions[b.transportName];A("transport url",y);var C=new b(y,this._transUrl,k);C.on("message",this._transportMessage.bind(this)),C.once("close",this._transportClose.bind(this)),C.transportName=b.transportName,this._transport=C;return}this._close(2e3,"All transports failed",!1)},_.prototype._transportTimeout=function(){A("_transportTimeout"),this.readyState===_.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},_.prototype._transportMessage=function(b){A("_transportMessage",b);var E=this,y=b.slice(0,1),k=b.slice(1),C;switch(y){case"o":this._open();return;case"h":this.dispatchEvent(new p("heartbeat")),A("heartbeat",this.transport);return}if(k)try{C=JSON.parse(k)}catch{A("bad json",k)}if(typeof C>"u"){A("empty payload",k);return}switch(y){case"a":Array.isArray(C)&&C.forEach(function(R){A("message",E.transport,R),E.dispatchEvent(new j(R))});break;case"m":A("message",this.transport,C),this.dispatchEvent(new j(C));break;case"c":Array.isArray(C)&&C.length===2&&this._close(C[0],C[1],!0);break}},_.prototype._transportClose=function(b,E){if(A("_transportClose",this.transport,b,E),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!O(b)&&b!==2e3&&this.readyState===_.CONNECTING){this._connect();return}this._close(b,E)},_.prototype._open=function(){A("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===_.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=_.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new p("open")),A("connected",this.transport)):this._close(1006,"Server lost session")},_.prototype._close=function(b,E,y){A("_close",this.transport,b,E,y,this.readyState);var k=!1;if(this._ir&&(k=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===_.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=_.CLOSING,setTimeout(function(){this.readyState=_.CLOSED,k&&this.dispatchEvent(new p("error"));var C=new N("close");C.wasClean=y||!1,C.code=b||1e3,C.reason=E,this.dispatchEvent(C),this.onmessage=this.onclose=this.onerror=null,A("disconnected")}.bind(this),0)},_.prototype.countRTO=function(b){return b>100?4*b:300+b},r.exports=function(b){return x=f(b),e("./iframe-bootstrap")(_,b),_}}).call(this)}).call(this,{env:{}},typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,debug:55,inherits:57,"url-parse":60}],15:[function(e,r,v){"use strict";var l=Array.prototype,n=Object.prototype,i=Function.prototype,t=String.prototype,s=l.slice,a=n.toString,u=function(E){return n.toString.call(E)==="[object Function]"},o=function(y){return a.call(y)==="[object Array]"},f=function(y){return a.call(y)==="[object String]"},w=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}}(),d;w?d=function(E,y,k,C){!C&&y in E||Object.defineProperty(E,y,{configurable:!0,enumerable:!1,writable:!0,value:k})}:d=function(E,y,k,C){!C&&y in E||(E[y]=k)};var h=function(E,y,k){for(var C in y)n.hasOwnProperty.call(y,C)&&d(E,C,y[C],k)},p=function(E){if(E==null)throw new TypeError("can't convert "+E+" to object");return Object(E)};function g(E){var y=+E;return y!==y?y=0:y!==0&&y!==1/0&&y!==-1/0&&(y=(y>0||-1)*Math.floor(Math.abs(y))),y}function S(E){return E>>>0}function N(){}h(i,{bind:function(y){var k=this;if(!u(k))throw new TypeError("Function.prototype.bind called on incompatible "+k);for(var C=s.call(arguments,1),R=function(){if(this instanceof L){var V=k.apply(this,C.concat(s.call(arguments)));return Object(V)===V?V:this}else return k.apply(y,C.concat(s.call(arguments)))},H=Math.max(0,k.length-C.length),B=[],T=0;T<H;T++)B.push("$"+T);var L=Function("binder","return function ("+B.join(",")+"){ return binder.apply(this, arguments); }")(R);return k.prototype&&(N.prototype=k.prototype,L.prototype=new N,N.prototype=null),L}}),h(Array,{isArray:o});var j=Object("a"),F=j[0]!=="a"||!(0 in j),A=function(y){var k=!0,C=!0;return y&&(y.call("foo",function(R,H,B){typeof B!="object"&&(k=!1)}),y.call([1],function(){"use strict";C=typeof this=="string"},"x")),!!y&&k&&C};h(l,{forEach:function(y){var k=p(this),C=F&&f(this)?this.split(""):k,R=arguments[1],H=-1,B=C.length>>>0;if(!u(y))throw new TypeError;for(;++H<B;)H in C&&y.call(R,C[H],H,k)}},!A(l.forEach));var x=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;h(l,{indexOf:function(y){var k=F&&f(this)?this.split(""):p(this),C=k.length>>>0;if(!C)return-1;var R=0;for(arguments.length>1&&(R=g(arguments[1])),R=R>=0?R:Math.max(0,C+R);R<C;R++)if(R in k&&k[R]===y)return R;return-1}},x);var _=t.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?function(){var E=/()??/.exec("")[1]===void 0;t.split=function(y,k){var C=this;if(y===void 0&&k===0)return[];if(a.call(y)!=="[object RegExp]")return _.call(this,y,k);var R=[],H=(y.ignoreCase?"i":"")+(y.multiline?"m":"")+(y.extended?"x":"")+(y.sticky?"y":""),B=0,T,L,V,q;for(y=new RegExp(y.source,H+"g"),C+="",E||(T=new RegExp("^"+y.source+"$(?!\\s)",H)),k=k===void 0?-1>>>0:S(k);(L=y.exec(C))&&(V=L.index+L[0].length,!(V>B&&(R.push(C.slice(B,L.index)),!E&&L.length>1&&L[0].replace(T,function(){for(var G=1;G<arguments.length-2;G++)arguments[G]===void 0&&(L[G]=void 0)}),L.length>1&&L.index<C.length&&l.push.apply(R,L.slice(1)),q=L[0].length,B=V,R.length>=k)));)y.lastIndex===L.index&&y.lastIndex++;return B===C.length?(q||!y.test(""))&&R.push(""):R.push(C.slice(B)),R.length>k?R.slice(0,k):R}}():"0".split(void 0,0).length&&(t.split=function(y,k){return y===void 0&&k===0?[]:_.call(this,y,k)});var O=t.substr,b="".substr&&"0b".substr(-1)!=="b";h(t,{substr:function(y,k){return O.call(this,y<0&&(y=this.length+y)<0?0:y,k)}},b)},{}],16:[function(e,r,v){"use strict";r.exports=[e("./transport/websocket"),e("./transport/xhr-streaming"),e("./transport/xdr-streaming"),e("./transport/eventsource"),e("./transport/lib/iframe-wrap")(e("./transport/eventsource")),e("./transport/htmlfile"),e("./transport/lib/iframe-wrap")(e("./transport/htmlfile")),e("./transport/xhr-polling"),e("./transport/xdr-polling"),e("./transport/lib/iframe-wrap")(e("./transport/xhr-polling")),e("./transport/jsonp-polling")]},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(e,r,v){(function(l,n){(function(){"use strict";var i=e("events").EventEmitter,t=e("inherits"),s=e("../../utils/event"),a=e("../../utils/url"),u=n.XMLHttpRequest,o=function(){};l.env.NODE_ENV!=="production"&&(o=e("debug")("sockjs-client:browser:xhr"));function f(h,p,g,S){o(h,p);var N=this;i.call(this),setTimeout(function(){N._start(h,p,g,S)},0)}t(f,i),f.prototype._start=function(h,p,g,S){var N=this;try{this.xhr=new u}catch{}if(!this.xhr){o("no xhr"),this.emit("finish",0,"no xhr support"),this._cleanup();return}p=a.addQuery(p,"t="+ +new Date),this.unloadRef=s.unloadAdd(function(){o("unload cleanup"),N._cleanup(!0)});try{this.xhr.open(h,p,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){o("xhr timeout"),N.emit("finish",0,""),N._cleanup(!1)})}catch(F){o("exception",F),this.emit("finish",0,""),this._cleanup(!1);return}if((!S||!S.noCredentials)&&f.supportsCORS&&(o("withCredentials"),this.xhr.withCredentials=!0),S&&S.headers)for(var j in S.headers)this.xhr.setRequestHeader(j,S.headers[j]);this.xhr.onreadystatechange=function(){if(N.xhr){var F=N.xhr,A,x;switch(o("readyState",F.readyState),F.readyState){case 3:try{x=F.status,A=F.responseText}catch{}o("status",x),x===1223&&(x=204),x===200&&A&&A.length>0&&(o("chunk"),N.emit("chunk",x,A));break;case 4:x=F.status,o("status",x),x===1223&&(x=204),(x===12005||x===12029)&&(x=0),o("finish",x,F.responseText),N.emit("finish",x,F.responseText),N._cleanup(!1);break}}};try{N.xhr.send(g)}catch{N.emit("finish",0,""),N._cleanup(!1)}},f.prototype._cleanup=function(h){if(o("cleanup"),!!this.xhr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),h)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}},f.prototype.close=function(){o("close"),this._cleanup(!0)},f.enabled=!!u;var w=["Active"].concat("Object").join("X");!f.enabled&&w in n&&(o("overriding xmlhttprequest"),u=function(){try{return new n[w]("Microsoft.XMLHTTP")}catch{return null}},f.enabled=!!new u);var d=!1;try{d="withCredentials"in new u}catch{}f.supportsCORS=d,r.exports=f}).call(this)}).call(this,{env:{}},typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/event":46,"../../utils/url":52,debug:55,events:3,inherits:57}],18:[function(e,r,v){(function(l){(function(){r.exports=l.EventSource}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],19:[function(e,r,v){(function(l){(function(){"use strict";var n=l.WebSocket||l.MozWebSocket;n?r.exports=function(t){return new n(t)}:r.exports=void 0}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],20:[function(e,r,v){"use strict";var l=e("inherits"),n=e("./lib/ajax-based"),i=e("./receiver/eventsource"),t=e("./sender/xhr-cors"),s=e("eventsource");function a(u){if(!a.enabled())throw new Error("Transport created when disabled");n.call(this,u,"/eventsource",i,t)}l(a,n),a.enabled=function(){return!!s},a.transportName="eventsource",a.roundTrips=2,r.exports=a},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,eventsource:18,inherits:57}],21:[function(e,r,v){"use strict";var l=e("inherits"),n=e("./receiver/htmlfile"),i=e("./sender/xhr-local"),t=e("./lib/ajax-based");function s(a){if(!n.enabled)throw new Error("Transport created when disabled");t.call(this,a,"/htmlfile",n,i)}l(s,t),s.enabled=function(a){return n.enabled&&a.sameOrigin},s.transportName="htmlfile",s.roundTrips=2,r.exports=s},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,inherits:57}],22:[function(e,r,v){(function(l){(function(){"use strict";var n=e("inherits"),i=e("events").EventEmitter,t=e("../version"),s=e("../utils/url"),a=e("../utils/iframe"),u=e("../utils/event"),o=e("../utils/random"),f=function(){};l.env.NODE_ENV!=="production"&&(f=e("debug")("sockjs-client:transport:iframe"));function w(d,h,p){if(!w.enabled())throw new Error("Transport created when disabled");i.call(this);var g=this;this.origin=s.getOrigin(p),this.baseUrl=p,this.transUrl=h,this.transport=d,this.windowId=o.string(8);var S=s.addPath(p,"/iframe.html")+"#"+this.windowId;f(d,h,S),this.iframeObj=a.createIframe(S,function(N){f("err callback"),g.emit("close",1006,"Unable to load an iframe ("+N+")"),g.close()}),this.onmessageCallback=this._message.bind(this),u.attachEvent("message",this.onmessageCallback)}n(w,i),w.prototype.close=function(){if(f("close"),this.removeAllListeners(),this.iframeObj){u.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},w.prototype._message=function(d){if(f("message",d.data),!s.isOriginEqual(d.origin,this.origin)){f("not same origin",d.origin,this.origin);return}var h;try{h=JSON.parse(d.data)}catch{f("bad json",d.data);return}if(h.windowId!==this.windowId){f("mismatched window id",h.windowId,this.windowId);return}switch(h.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([t,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",h.data);break;case"c":var p;try{p=JSON.parse(h.data)}catch{f("bad json",h.data);return}this.emit("close",p[0],p[1]),this.close();break}},w.prototype.postMessage=function(d,h){f("postMessage",d,h),this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:d,data:h||""}),this.origin)},w.prototype.send=function(d){f("send",d),this.postMessage("m",d)},w.enabled=function(){return a.iframeEnabled},w.transportName="iframe",w.roundTrips=2,r.exports=w}).call(this)}).call(this,{env:{}})},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,debug:55,events:3,inherits:57}],23:[function(e,r,v){(function(l){(function(){"use strict";var n=e("inherits"),i=e("./lib/sender-receiver"),t=e("./receiver/jsonp"),s=e("./sender/jsonp");function a(u){if(!a.enabled())throw new Error("Transport created when disabled");i.call(this,u,"/jsonp",s,t)}n(a,i),a.enabled=function(){return!!l.document},a.transportName="jsonp-polling",a.roundTrips=1,a.needBody=!0,r.exports=a}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,inherits:57}],24:[function(e,r,v){(function(l){(function(){"use strict";var n=e("inherits"),i=e("../../utils/url"),t=e("./sender-receiver"),s=function(){};l.env.NODE_ENV!=="production"&&(s=e("debug")("sockjs-client:ajax-based"));function a(o){return function(f,w,d){s("create ajax sender",f,w);var h={};typeof w=="string"&&(h.headers={"Content-type":"text/plain"});var p=i.addPath(f,"/xhr_send"),g=new o("POST",p,w,h);return g.once("finish",function(S){if(s("finish",S),g=null,S!==200&&S!==204)return d(new Error("http status "+S));d()}),function(){s("abort"),g.close(),g=null;var S=new Error("Aborted");S.code=1e3,d(S)}}}function u(o,f,w,d){t.call(this,o,f,a(d),w,d)}n(u,t),r.exports=u}).call(this)}).call(this,{env:{}})},{"../../utils/url":52,"./sender-receiver":28,debug:55,inherits:57}],25:[function(e,r,v){(function(l){(function(){"use strict";var n=e("inherits"),i=e("events").EventEmitter,t=function(){};l.env.NODE_ENV!=="production"&&(t=e("debug")("sockjs-client:buffered-sender"));function s(a,u){t(a),i.call(this),this.sendBuffer=[],this.sender=u,this.url=a}n(s,i),s.prototype.send=function(a){t("send",a),this.sendBuffer.push(a),this.sendStop||this.sendSchedule()},s.prototype.sendScheduleWait=function(){t("sendScheduleWait");var a=this,u;this.sendStop=function(){t("sendStop"),a.sendStop=null,clearTimeout(u)},u=setTimeout(function(){t("timeout"),a.sendStop=null,a.sendSchedule()},25)},s.prototype.sendSchedule=function(){t("sendSchedule",this.sendBuffer.length);var a=this;if(this.sendBuffer.length>0){var u="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,u,function(o){a.sendStop=null,o?(t("error",o),a.emit("close",o.code||1006,"Sending error: "+o),a.close()):a.sendScheduleWait()}),this.sendBuffer=[]}},s.prototype._cleanup=function(){t("_cleanup"),this.removeAllListeners()},s.prototype.close=function(){t("close"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},r.exports=s}).call(this)}).call(this,{env:{}})},{debug:55,events:3,inherits:57}],26:[function(e,r,v){(function(l){(function(){"use strict";var n=e("inherits"),i=e("../iframe"),t=e("../../utils/object");r.exports=function(s){function a(u,o){i.call(this,s.transportName,u,o)}return n(a,i),a.enabled=function(u,o){if(!l.document)return!1;var f=t.extend({},o);return f.sameOrigin=!0,s.enabled(f)&&i.enabled()},a.transportName="iframe-"+s.transportName,a.needBody=!0,a.roundTrips=i.roundTrips+s.roundTrips-1,a.facadeTransport=s,a}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/object":49,"../iframe":22,inherits:57}],27:[function(e,r,v){(function(l){(function(){"use strict";var n=e("inherits"),i=e("events").EventEmitter,t=function(){};l.env.NODE_ENV!=="production"&&(t=e("debug")("sockjs-client:polling"));function s(a,u,o){t(u),i.call(this),this.Receiver=a,this.receiveUrl=u,this.AjaxObject=o,this._scheduleReceiver()}n(s,i),s.prototype._scheduleReceiver=function(){t("_scheduleReceiver");var a=this,u=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);u.on("message",function(o){t("message",o),a.emit("message",o)}),u.once("close",function(o,f){t("close",o,f,a.pollIsClosing),a.poll=u=null,a.pollIsClosing||(f==="network"?a._scheduleReceiver():(a.emit("close",o||1006,f),a.removeAllListeners()))})},s.prototype.abort=function(){t("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},r.exports=s}).call(this)}).call(this,{env:{}})},{debug:55,events:3,inherits:57}],28:[function(e,r,v){(function(l){(function(){"use strict";var n=e("inherits"),i=e("../../utils/url"),t=e("./buffered-sender"),s=e("./polling"),a=function(){};l.env.NODE_ENV!=="production"&&(a=e("debug")("sockjs-client:sender-receiver"));function u(o,f,w,d,h){var p=i.addPath(o,f);a(p);var g=this;t.call(this,o,w),this.poll=new s(d,p,h),this.poll.on("message",function(S){a("poll message",S),g.emit("message",S)}),this.poll.once("close",function(S,N){a("poll close",S,N),g.poll=null,g.emit("close",S,N),g.close()})}n(u,t),u.prototype.close=function(){t.prototype.close.call(this),a("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},r.exports=u}).call(this)}).call(this,{env:{}})},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,debug:55,inherits:57}],29:[function(e,r,v){(function(l){(function(){"use strict";var n=e("inherits"),i=e("events").EventEmitter,t=e("eventsource"),s=function(){};l.env.NODE_ENV!=="production"&&(s=e("debug")("sockjs-client:receiver:eventsource"));function a(u){s(u),i.call(this);var o=this,f=this.es=new t(u);f.onmessage=function(w){s("message",w.data),o.emit("message",decodeURI(w.data))},f.onerror=function(w){s("error",f.readyState,w);var d=f.readyState!==2?"network":"permanent";o._cleanup(),o._close(d)}}n(a,i),a.prototype.abort=function(){s("abort"),this._cleanup(),this._close("user")},a.prototype._cleanup=function(){s("cleanup");var u=this.es;u&&(u.onmessage=u.onerror=null,u.close(),this.es=null)},a.prototype._close=function(u){s("close",u);var o=this;setTimeout(function(){o.emit("close",null,u),o.removeAllListeners()},200)},r.exports=a}).call(this)}).call(this,{env:{}})},{debug:55,events:3,eventsource:18,inherits:57}],30:[function(e,r,v){(function(l,n){(function(){"use strict";var i=e("inherits"),t=e("../../utils/iframe"),s=e("../../utils/url"),a=e("events").EventEmitter,u=e("../../utils/random"),o=function(){};l.env.NODE_ENV!=="production"&&(o=e("debug")("sockjs-client:receiver:htmlfile"));function f(d){o(d),a.call(this);var h=this;t.polluteGlobalNamespace(),this.id="a"+u.string(6),d=s.addQuery(d,"c="+decodeURIComponent(t.WPrefix+"."+this.id)),o("using htmlfile",f.htmlfileEnabled);var p=f.htmlfileEnabled?t.createHtmlfile:t.createIframe;n[t.WPrefix][this.id]={start:function(){o("start"),h.iframeObj.loaded()},message:function(g){o("message",g),h.emit("message",g)},stop:function(){o("stop"),h._cleanup(),h._close("network")}},this.iframeObj=p(d,function(){o("callback"),h._cleanup(),h._close("permanent")})}i(f,a),f.prototype.abort=function(){o("abort"),this._cleanup(),this._close("user")},f.prototype._cleanup=function(){o("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete n[t.WPrefix][this.id]},f.prototype._close=function(d){o("_close",d),this.emit("close",null,d),this.removeAllListeners()},f.htmlfileEnabled=!1;var w=["Active"].concat("Object").join("X");if(w in n)try{f.htmlfileEnabled=!!new n[w]("htmlfile")}catch{}f.enabled=f.htmlfileEnabled||t.iframeEnabled,r.exports=f}).call(this)}).call(this,{env:{}},typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:55,events:3,inherits:57}],31:[function(e,r,v){(function(l,n){(function(){"use strict";var i=e("../../utils/iframe"),t=e("../../utils/random"),s=e("../../utils/browser"),a=e("../../utils/url"),u=e("inherits"),o=e("events").EventEmitter,f=function(){};l.env.NODE_ENV!=="production"&&(f=e("debug")("sockjs-client:receiver:jsonp"));function w(d){f(d);var h=this;o.call(this),i.polluteGlobalNamespace(),this.id="a"+t.string(6);var p=a.addQuery(d,"c="+encodeURIComponent(i.WPrefix+"."+this.id));n[i.WPrefix][this.id]=this._callback.bind(this),this._createScript(p),this.timeoutId=setTimeout(function(){f("timeout"),h._abort(new Error("JSONP script loaded abnormally (timeout)"))},w.timeout)}u(w,o),w.prototype.abort=function(){if(f("abort"),n[i.WPrefix][this.id]){var d=new Error("JSONP user aborted read");d.code=1e3,this._abort(d)}},w.timeout=35e3,w.scriptErrorTimeout=1e3,w.prototype._callback=function(d){f("_callback",d),this._cleanup(),!this.aborting&&(d&&(f("message",d),this.emit("message",d)),this.emit("close",null,"network"),this.removeAllListeners())},w.prototype._abort=function(d){f("_abort",d),this._cleanup(),this.aborting=!0,this.emit("close",d.code,d.message),this.removeAllListeners()},w.prototype._cleanup=function(){if(f("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var d=this.script;d.parentNode.removeChild(d),d.onreadystatechange=d.onerror=d.onload=d.onclick=null,this.script=null}delete n[i.WPrefix][this.id]},w.prototype._scriptError=function(){f("_scriptError");var d=this;this.errorTimer||(this.errorTimer=setTimeout(function(){d.loadedOkay||d._abort(new Error("JSONP script loaded abnormally (onerror)"))},w.scriptErrorTimeout))},w.prototype._createScript=function(d){f("_createScript",d);var h=this,p=this.script=n.document.createElement("script"),g;if(p.id="a"+t.string(8),p.src=d,p.type="text/javascript",p.charset="UTF-8",p.onerror=this._scriptError.bind(this),p.onload=function(){f("onload"),h._abort(new Error("JSONP script loaded abnormally (onload)"))},p.onreadystatechange=function(){if(f("onreadystatechange",p.readyState),/loaded|closed/.test(p.readyState)){if(p&&p.htmlFor&&p.onclick){h.loadedOkay=!0;try{p.onclick()}catch{}}p&&h._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof p.async>"u"&&n.document.attachEvent)if(s.isOpera())g=this.script2=n.document.createElement("script"),g.text="try{var a = document.getElementById('"+p.id+"'); if(a)a.onerror();}catch(x){};",p.async=g.async=!1;else{try{p.htmlFor=p.id,p.event="onclick"}catch{}p.async=!0}typeof p.async<"u"&&(p.async=!0);var S=n.document.getElementsByTagName("head")[0];S.insertBefore(p,S.firstChild),g&&S.insertBefore(g,S.firstChild)},r.exports=w}).call(this)}).call(this,{env:{}},typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:55,events:3,inherits:57}],32:[function(e,r,v){(function(l){(function(){"use strict";var n=e("inherits"),i=e("events").EventEmitter,t=function(){};l.env.NODE_ENV!=="production"&&(t=e("debug")("sockjs-client:receiver:xhr"));function s(a,u){t(a),i.call(this);var o=this;this.bufferPosition=0,this.xo=new u("POST",a,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(f,w){t("finish",f,w),o._chunkHandler(f,w),o.xo=null;var d=f===200?"network":"permanent";t("close",d),o.emit("close",null,d),o._cleanup()})}n(s,i),s.prototype._chunkHandler=function(a,u){if(t("_chunkHandler",a),!(a!==200||!u))for(var o=-1;;this.bufferPosition+=o+1){var f=u.slice(this.bufferPosition);if(o=f.indexOf(`
`),o===-1)break;var w=f.slice(0,o);w&&(t("message",w),this.emit("message",w))}},s.prototype._cleanup=function(){t("_cleanup"),this.removeAllListeners()},s.prototype.abort=function(){t("abort"),this.xo&&(this.xo.close(),t("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()},r.exports=s}).call(this)}).call(this,{env:{}})},{debug:55,events:3,inherits:57}],33:[function(e,r,v){(function(l,n){(function(){"use strict";var i=e("../../utils/random"),t=e("../../utils/url"),s=function(){};l.env.NODE_ENV!=="production"&&(s=e("debug")("sockjs-client:sender:jsonp"));var a,u;function o(w){s("createIframe",w);try{return n.document.createElement('<iframe name="'+w+'">')}catch{var d=n.document.createElement("iframe");return d.name=w,d}}function f(){s("createForm"),a=n.document.createElement("form"),a.style.display="none",a.style.position="absolute",a.method="POST",a.enctype="application/x-www-form-urlencoded",a.acceptCharset="UTF-8",u=n.document.createElement("textarea"),u.name="d",a.appendChild(u),n.document.body.appendChild(a)}r.exports=function(w,d,h){s(w,d),a||f();var p="a"+i.string(8);a.target=p,a.action=t.addQuery(t.addPath(w,"/jsonp_send"),"i="+p);var g=o(p);g.id=p,g.style.display="none",a.appendChild(g);try{u.value=d}catch{}a.submit();var S=function(N){s("completed",p,N),g.onerror&&(g.onreadystatechange=g.onerror=g.onload=null,setTimeout(function(){s("cleaning up",p),g.parentNode.removeChild(g),g=null},500),u.value="",h(N))};return g.onerror=function(){s("onerror",p),S()},g.onload=function(){s("onload",p),S()},g.onreadystatechange=function(N){s("onreadystatechange",p,g.readyState,N),g.readyState==="complete"&&S()},function(){s("aborted",p),S(new Error("Aborted"))}}}).call(this)}).call(this,{env:{}},typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/random":50,"../../utils/url":52,debug:55}],34:[function(e,r,v){(function(l,n){(function(){"use strict";var i=e("events").EventEmitter,t=e("inherits"),s=e("../../utils/event"),a=e("../../utils/browser"),u=e("../../utils/url"),o=function(){};l.env.NODE_ENV!=="production"&&(o=e("debug")("sockjs-client:sender:xdr"));function f(w,d,h){o(w,d);var p=this;i.call(this),setTimeout(function(){p._start(w,d,h)},0)}t(f,i),f.prototype._start=function(w,d,h){o("_start");var p=this,g=new n.XDomainRequest;d=u.addQuery(d,"t="+ +new Date),g.onerror=function(){o("onerror"),p._error()},g.ontimeout=function(){o("ontimeout"),p._error()},g.onprogress=function(){o("progress",g.responseText),p.emit("chunk",200,g.responseText)},g.onload=function(){o("load"),p.emit("finish",200,g.responseText),p._cleanup(!1)},this.xdr=g,this.unloadRef=s.unloadAdd(function(){p._cleanup(!0)});try{this.xdr.open(w,d),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(h)}catch{this._error()}},f.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},f.prototype._cleanup=function(w){if(o("cleanup",w),!!this.xdr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,w)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}},f.prototype.close=function(){o("close"),this._cleanup(!0)},f.enabled=!!(n.XDomainRequest&&a.hasDomain()),r.exports=f}).call(this)}).call(this,{env:{}},typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,debug:55,events:3,inherits:57}],35:[function(e,r,v){"use strict";var l=e("inherits"),n=e("../driver/xhr");function i(t,s,a,u){n.call(this,t,s,a,u)}l(i,n),i.enabled=n.enabled&&n.supportsCORS,r.exports=i},{"../driver/xhr":17,inherits:57}],36:[function(e,r,v){"use strict";var l=e("events").EventEmitter,n=e("inherits");function i(){var t=this;l.call(this),this.to=setTimeout(function(){t.emit("finish",200,"{}")},i.timeout)}n(i,l),i.prototype.close=function(){clearTimeout(this.to)},i.timeout=2e3,r.exports=i},{events:3,inherits:57}],37:[function(e,r,v){"use strict";var l=e("inherits"),n=e("../driver/xhr");function i(t,s,a){n.call(this,t,s,a,{noCredentials:!0})}l(i,n),i.enabled=n.enabled,r.exports=i},{"../driver/xhr":17,inherits:57}],38:[function(e,r,v){(function(l){(function(){"use strict";var n=e("../utils/event"),i=e("../utils/url"),t=e("inherits"),s=e("events").EventEmitter,a=e("./driver/websocket"),u=function(){};l.env.NODE_ENV!=="production"&&(u=e("debug")("sockjs-client:websocket"));function o(f,w,d){if(!o.enabled())throw new Error("Transport created when disabled");s.call(this),u("constructor",f);var h=this,p=i.addPath(f,"/websocket");p.slice(0,5)==="https"?p="wss"+p.slice(5):p="ws"+p.slice(4),this.url=p,this.ws=new a(this.url,[],d),this.ws.onmessage=function(g){u("message event",g.data),h.emit("message",g.data)},this.unloadRef=n.unloadAdd(function(){u("unload"),h.ws.close()}),this.ws.onclose=function(g){u("close event",g.code,g.reason),h.emit("close",g.code,g.reason),h._cleanup()},this.ws.onerror=function(g){u("error event",g),h.emit("close",1006,"WebSocket connection broken"),h._cleanup()}}t(o,s),o.prototype.send=function(f){var w="["+f+"]";u("send",w),this.ws.send(w)},o.prototype.close=function(){u("close");var f=this.ws;this._cleanup(),f&&f.close()},o.prototype._cleanup=function(){u("_cleanup");var f=this.ws;f&&(f.onmessage=f.onclose=f.onerror=null),n.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},o.enabled=function(){return u("enabled"),!!a},o.transportName="websocket",o.roundTrips=2,r.exports=o}).call(this)}).call(this,{env:{}})},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,debug:55,events:3,inherits:57}],39:[function(e,r,v){"use strict";var l=e("inherits"),n=e("./lib/ajax-based"),i=e("./xdr-streaming"),t=e("./receiver/xhr"),s=e("./sender/xdr");function a(u){if(!s.enabled)throw new Error("Transport created when disabled");n.call(this,u,"/xhr",t,s)}l(a,n),a.enabled=i.enabled,a.transportName="xdr-polling",a.roundTrips=2,r.exports=a},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,inherits:57}],40:[function(e,r,v){"use strict";var l=e("inherits"),n=e("./lib/ajax-based"),i=e("./receiver/xhr"),t=e("./sender/xdr");function s(a){if(!t.enabled)throw new Error("Transport created when disabled");n.call(this,a,"/xhr_streaming",i,t)}l(s,n),s.enabled=function(a){return a.cookie_needed||a.nullOrigin?!1:t.enabled&&a.sameScheme},s.transportName="xdr-streaming",s.roundTrips=2,r.exports=s},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,inherits:57}],41:[function(e,r,v){"use strict";var l=e("inherits"),n=e("./lib/ajax-based"),i=e("./receiver/xhr"),t=e("./sender/xhr-cors"),s=e("./sender/xhr-local");function a(u){if(!s.enabled&&!t.enabled)throw new Error("Transport created when disabled");n.call(this,u,"/xhr",i,t)}l(a,n),a.enabled=function(u){return u.nullOrigin?!1:s.enabled&&u.sameOrigin?!0:t.enabled},a.transportName="xhr-polling",a.roundTrips=2,r.exports=a},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:57}],42:[function(e,r,v){(function(l){(function(){"use strict";var n=e("inherits"),i=e("./lib/ajax-based"),t=e("./receiver/xhr"),s=e("./sender/xhr-cors"),a=e("./sender/xhr-local"),u=e("../utils/browser");function o(f){if(!a.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,f,"/xhr_streaming",t,s)}n(o,i),o.enabled=function(f){return f.nullOrigin||u.isOpera()?!1:s.enabled},o.transportName="xhr-streaming",o.roundTrips=2,o.needBody=!!l.document,r.exports=o}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:57}],43:[function(e,r,v){(function(l){(function(){"use strict";l.crypto&&l.crypto.getRandomValues?r.exports.randomBytes=function(n){var i=new Uint8Array(n);return l.crypto.getRandomValues(i),i}:r.exports.randomBytes=function(n){for(var i=new Array(n),t=0;t<n;t++)i[t]=Math.floor(Math.random()*256);return i}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],44:[function(e,r,v){(function(l){(function(){"use strict";r.exports={isOpera:function(){return l.navigator&&/opera/i.test(l.navigator.userAgent)},isKonqueror:function(){return l.navigator&&/konqueror/i.test(l.navigator.userAgent)},hasDomain:function(){if(!l.document)return!0;try{return!!l.document.domain}catch{return!1}}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],45:[function(e,r,v){"use strict";var l=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,n,i=function(t){var s,a={},u=[];for(s=0;s<65536;s++)u.push(String.fromCharCode(s));return t.lastIndex=0,u.join("").replace(t,function(o){return a[o]="\\u"+("0000"+o.charCodeAt(0).toString(16)).slice(-4),""}),t.lastIndex=0,a};r.exports={quote:function(t){var s=JSON.stringify(t);return l.lastIndex=0,l.test(s)?(n||(n=i(l)),s.replace(l,function(a){return n[a]})):s}}},{}],46:[function(e,r,v){(function(l){(function(){"use strict";var n=e("./random"),i={},t=!1,s=l.chrome&&l.chrome.app&&l.chrome.app.runtime;r.exports={attachEvent:function(u,o){typeof l.addEventListener<"u"?l.addEventListener(u,o,!1):l.document&&l.attachEvent&&(l.document.attachEvent("on"+u,o),l.attachEvent("on"+u,o))},detachEvent:function(u,o){typeof l.addEventListener<"u"?l.removeEventListener(u,o,!1):l.document&&l.detachEvent&&(l.document.detachEvent("on"+u,o),l.detachEvent("on"+u,o))},unloadAdd:function(u){if(s)return null;var o=n.string(8);return i[o]=u,t&&setTimeout(this.triggerUnloadCallbacks,0),o},unloadDel:function(u){u in i&&delete i[u]},triggerUnloadCallbacks:function(){for(var u in i)i[u](),delete i[u]}};var a=function(){t||(t=!0,r.exports.triggerUnloadCallbacks())};s||r.exports.attachEvent("unload",a)}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./random":50}],47:[function(e,r,v){(function(l,n){(function(){"use strict";var i=e("./event"),t=e("./browser"),s=function(){};l.env.NODE_ENV!=="production"&&(s=e("debug")("sockjs-client:utils:iframe")),r.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){r.exports.WPrefix in n||(n[r.exports.WPrefix]={})},postMessage:function(a,u){n.parent!==n?n.parent.postMessage(JSON.stringify({windowId:r.exports.currentWindowId,type:a,data:u||""}),"*"):s("Cannot postMessage, no parent window.",a,u)},createIframe:function(a,u){var o=n.document.createElement("iframe"),f,w,d=function(){s("unattach"),clearTimeout(f);try{o.onload=null}catch{}o.onerror=null},h=function(){s("cleanup"),o&&(d(),setTimeout(function(){o&&o.parentNode.removeChild(o),o=null},0),i.unloadDel(w))},p=function(S){s("onerror",S),o&&(h(),u(S))},g=function(S,N){s("post",S,N),setTimeout(function(){try{o&&o.contentWindow&&o.contentWindow.postMessage(S,N)}catch{}},0)};return o.src=a,o.style.display="none",o.style.position="absolute",o.onerror=function(){p("onerror")},o.onload=function(){s("onload"),clearTimeout(f),f=setTimeout(function(){p("onload timeout")},2e3)},n.document.body.appendChild(o),f=setTimeout(function(){p("timeout")},15e3),w=i.unloadAdd(h),{post:g,cleanup:h,loaded:d}},createHtmlfile:function(a,u){var o=["Active"].concat("Object").join("X"),f=new n[o]("htmlfile"),w,d,h,p=function(){clearTimeout(w),h.onerror=null},g=function(){f&&(p(),i.unloadDel(d),h.parentNode.removeChild(h),h=f=null,CollectGarbage())},S=function(F){s("onerror",F),f&&(g(),u(F))},N=function(F,A){try{setTimeout(function(){h&&h.contentWindow&&h.contentWindow.postMessage(F,A)},0)}catch{}};f.open(),f.write('<html><script>document.domain="'+n.document.domain+'";<\/script></html>'),f.close(),f.parentWindow[r.exports.WPrefix]=n[r.exports.WPrefix];var j=f.createElement("div");return f.body.appendChild(j),h=f.createElement("iframe"),j.appendChild(h),h.src=a,h.onerror=function(){S("onerror")},w=setTimeout(function(){S("timeout")},15e3),d=i.unloadAdd(g),{post:N,cleanup:g,loaded:p}}},r.exports.iframeEnabled=!1,n.document&&(r.exports.iframeEnabled=(typeof n.postMessage=="function"||typeof n.postMessage=="object")&&!t.isKonqueror())}).call(this)}).call(this,{env:{}},typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./browser":44,"./event":46,debug:55}],48:[function(e,r,v){(function(l){(function(){"use strict";var n={};["log","debug","warn"].forEach(function(i){var t;try{t=l.console&&l.console[i]&&l.console[i].apply}catch{}n[i]=t?function(){return l.console[i].apply(l.console,arguments)}:i==="log"?function(){}:n.log}),r.exports=n}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],49:[function(e,r,v){"use strict";r.exports={isObject:function(l){var n=typeof l;return n==="function"||n==="object"&&!!l},extend:function(l){if(!this.isObject(l))return l;for(var n,i,t=1,s=arguments.length;t<s;t++){n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(l[i]=n[i])}return l}}},{}],50:[function(e,r,v){"use strict";var l=e("crypto"),n="abcdefghijklmnopqrstuvwxyz012345";r.exports={string:function(i){for(var t=n.length,s=l.randomBytes(i),a=[],u=0;u<i;u++)a.push(n.substr(s[u]%t,1));return a.join("")},number:function(i){return Math.floor(Math.random()*i)},numberString:function(i){var t=(""+(i-1)).length,s=new Array(t+1).join("0");return(s+this.number(i)).slice(-t)}}},{crypto:43}],51:[function(e,r,v){(function(l){(function(){"use strict";var n=function(){};l.env.NODE_ENV!=="production"&&(n=e("debug")("sockjs-client:utils:transport")),r.exports=function(i){return{filterToEnabled:function(t,s){var a={main:[],facade:[]};return t?typeof t=="string"&&(t=[t]):t=[],i.forEach(function(u){if(u){if(u.transportName==="websocket"&&s.websocket===!1){n("disabled from server","websocket");return}if(t.length&&t.indexOf(u.transportName)===-1){n("not in whitelist",u.transportName);return}u.enabled(s)?(n("enabled",u.transportName),a.main.push(u),u.facadeTransport&&a.facade.push(u.facadeTransport)):n("disabled",u.transportName)}}),a}}}}).call(this)}).call(this,{env:{}})},{debug:55}],52:[function(e,r,v){(function(l){(function(){"use strict";var n=e("url-parse"),i=function(){};l.env.NODE_ENV!=="production"&&(i=e("debug")("sockjs-client:utils:url")),r.exports={getOrigin:function(t){if(!t)return null;var s=new n(t);if(s.protocol==="file:")return null;var a=s.port;return a||(a=s.protocol==="https:"?"443":"80"),s.protocol+"//"+s.hostname+":"+a},isOriginEqual:function(t,s){var a=this.getOrigin(t)===this.getOrigin(s);return i("same",t,s,a),a},isSchemeEqual:function(t,s){return t.split(":")[0]===s.split(":")[0]},addPath:function(t,s){var a=t.split("?");return a[0]+s+(a[1]?"?"+a[1]:"")},addQuery:function(t,s){return t+(t.indexOf("?")===-1?"?"+s:"&"+s)},isLoopbackAddr:function(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^\[::1\]$/.test(t)}}}).call(this)}).call(this,{env:{}})},{debug:55,"url-parse":60}],53:[function(e,r,v){r.exports="1.6.1"},{}],54:[function(e,r,v){var l=1e3,n=l*60,i=n*60,t=i*24,s=t*7,a=t*365.25;r.exports=function(d,h){h=h||{};var p=typeof d;if(p==="string"&&d.length>0)return u(d);if(p==="number"&&isFinite(d))return h.long?f(d):o(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function u(d){if(d=String(d),!(d.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(h){var p=parseFloat(h[1]),g=(h[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return p*a;case"weeks":case"week":case"w":return p*s;case"days":case"day":case"d":return p*t;case"hours":case"hour":case"hrs":case"hr":case"h":return p*i;case"minutes":case"minute":case"mins":case"min":case"m":return p*n;case"seconds":case"second":case"secs":case"sec":case"s":return p*l;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function o(d){var h=Math.abs(d);return h>=t?Math.round(d/t)+"d":h>=i?Math.round(d/i)+"h":h>=n?Math.round(d/n)+"m":h>=l?Math.round(d/l)+"s":d+"ms"}function f(d){var h=Math.abs(d);return h>=t?w(d,h,t,"day"):h>=i?w(d,h,i,"hour"):h>=n?w(d,h,n,"minute"):h>=l?w(d,h,l,"second"):d+" ms"}function w(d,h,p,g){var S=h>=p*1.5;return Math.round(d/p)+" "+g+(S?"s":"")}},{}],55:[function(e,r,v){(function(l){(function(){v.formatArgs=i,v.save=t,v.load=s,v.useColors=n,v.storage=a(),v.destroy=(()=>{let o=!1;return()=>{o||(o=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),v.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(o){if(o[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+o[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;let f="color: "+this.color;o.splice(1,0,f,"color: inherit");let w=0,d=0;o[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(w++,h==="%c"&&(d=w))}),o.splice(d,0,f)}v.log=console.debug||console.log||(()=>{});function t(o){try{o?v.storage.setItem("debug",o):v.storage.removeItem("debug")}catch{}}function s(){let o;try{o=v.storage.getItem("debug")}catch{}return!o&&typeof l<"u"&&"env"in l&&(o=l.env.DEBUG),o}function a(){try{return localStorage}catch{}}r.exports=e("./common")(v);let{formatters:u}=r.exports;u.j=function(o){try{return JSON.stringify(o)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}}).call(this)}).call(this,{env:{}})},{"./common":56}],56:[function(e,r,v){function l(n){t.debug=t,t.default=t,t.coerce=w,t.disable=u,t.enable=a,t.enabled=o,t.humanize=e("ms"),t.destroy=d,Object.keys(n).forEach(h=>{t[h]=n[h]}),t.names=[],t.skips=[],t.formatters={};function i(h){let p=0;for(let g=0;g<h.length;g++)p=(p<<5)-p+h.charCodeAt(g),p|=0;return t.colors[Math.abs(p)%t.colors.length]}t.selectColor=i;function t(h){let p,g=null,S,N;function j(...F){if(!j.enabled)return;let A=j,x=Number(new Date),_=x-(p||x);A.diff=_,A.prev=p,A.curr=x,p=x,F[0]=t.coerce(F[0]),typeof F[0]!="string"&&F.unshift("%O");let O=0;F[0]=F[0].replace(/%([a-zA-Z%])/g,(E,y)=>{if(E==="%%")return"%";O++;let k=t.formatters[y];if(typeof k=="function"){let C=F[O];E=k.call(A,C),F.splice(O,1),O--}return E}),t.formatArgs.call(A,F),(A.log||t.log).apply(A,F)}return j.namespace=h,j.useColors=t.useColors(),j.color=t.selectColor(h),j.extend=s,j.destroy=t.destroy,Object.defineProperty(j,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(S!==t.namespaces&&(S=t.namespaces,N=t.enabled(h)),N),set:F=>{g=F}}),typeof t.init=="function"&&t.init(j),j}function s(h,p){let g=t(this.namespace+(typeof p>"u"?":":p)+h);return g.log=this.log,g}function a(h){t.save(h),t.namespaces=h,t.names=[],t.skips=[];let p,g=(typeof h=="string"?h:"").split(/[\s,]+/),S=g.length;for(p=0;p<S;p++)g[p]&&(h=g[p].replace(/\*/g,".*?"),h[0]==="-"?t.skips.push(new RegExp("^"+h.substr(1)+"$")):t.names.push(new RegExp("^"+h+"$")))}function u(){let h=[...t.names.map(f),...t.skips.map(f).map(p=>"-"+p)].join(",");return t.enable(""),h}function o(h){if(h[h.length-1]==="*")return!0;let p,g;for(p=0,g=t.skips.length;p<g;p++)if(t.skips[p].test(h))return!1;for(p=0,g=t.names.length;p<g;p++)if(t.names[p].test(h))return!0;return!1}function f(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function w(h){return h instanceof Error?h.stack||h.message:h}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}r.exports=l},{ms:54}],57:[function(e,r,v){typeof Object.create=="function"?r.exports=function(n,i){i&&(n.super_=i,n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(n,i){if(i){n.super_=i;var t=function(){};t.prototype=i.prototype,n.prototype=new t,n.prototype.constructor=n}}},{}],58:[function(e,r,v){"use strict";var l=Object.prototype.hasOwnProperty,n;function i(u){try{return decodeURIComponent(u.replace(/\+/g," "))}catch{return null}}function t(u){try{return encodeURIComponent(u)}catch{return null}}function s(u){for(var o=/([^=?&]+)=?([^&]*)/g,f={},w;w=o.exec(u);){var d=i(w[1]),h=i(w[2]);d===null||h===null||d in f||(f[d]=h)}return f}function a(u,o){o=o||"";var f=[],w,d;typeof o!="string"&&(o="?");for(d in u)if(l.call(u,d)){if(w=u[d],!w&&(w===null||w===n||isNaN(w))&&(w=""),d=encodeURIComponent(d),w=encodeURIComponent(w),d===null||w===null)continue;f.push(d+"="+w)}return f.length?o+f.join("&"):""}v.stringify=a,v.parse=s},{}],59:[function(e,r,v){"use strict";r.exports=function(n,i){if(i=i.split(":")[0],n=+n,!n)return!1;switch(i){case"http":case"ws":return n!==80;case"https":case"wss":return n!==443;case"ftp":return n!==21;case"gopher":return n!==70;case"file":return!1}return n!==0}},{}],60:[function(e,r,v){(function(l){(function(){"use strict";var n=e("requires-port"),i=e("querystringify"),t=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,u=/:\d+$/,o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,f=/^[a-zA-Z]:/;function w(x){return(x||"").toString().replace(t,"")}var d=[["#","hash"],["?","query"],function(_,O){return g(O.protocol)?_.replace(/\\/g,"/"):_},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function p(x){var _;typeof window<"u"?_=window:typeof l<"u"?_=l:typeof self<"u"?_=self:_={};var O=_.location||{};x=x||O;var b={},E=typeof x,y;if(x.protocol==="blob:")b=new j(unescape(x.pathname),{});else if(E==="string"){b=new j(x,{});for(y in h)delete b[y]}else if(E==="object"){for(y in x)y in h||(b[y]=x[y]);b.slashes===void 0&&(b.slashes=a.test(x.href))}return b}function g(x){return x==="file:"||x==="ftp:"||x==="http:"||x==="https:"||x==="ws:"||x==="wss:"}function S(x,_){x=w(x),x=x.replace(s,""),_=_||{};var O=o.exec(x),b=O[1]?O[1].toLowerCase():"",E=!!O[2],y=!!O[3],k=0,C;return E?y?(C=O[2]+O[3]+O[4],k=O[2].length+O[3].length):(C=O[2]+O[4],k=O[2].length):y?(C=O[3]+O[4],k=O[3].length):C=O[4],b==="file:"?k>=2&&(C=C.slice(2)):g(b)?C=O[4]:b?E&&(C=C.slice(2)):k>=2&&g(_.protocol)&&(C=O[4]),{protocol:b,slashes:E||g(b),slashesCount:k,rest:C}}function N(x,_){if(x==="")return _;for(var O=(_||"/").split("/").slice(0,-1).concat(x.split("/")),b=O.length,E=O[b-1],y=!1,k=0;b--;)O[b]==="."?O.splice(b,1):O[b]===".."?(O.splice(b,1),k++):k&&(b===0&&(y=!0),O.splice(b,1),k--);return y&&O.unshift(""),(E==="."||E==="..")&&O.push(""),O.join("/")}function j(x,_,O){if(x=w(x),x=x.replace(s,""),!(this instanceof j))return new j(x,_,O);var b,E,y,k,C,R,H=d.slice(),B=typeof _,T=this,L=0;for(B!=="object"&&B!=="string"&&(O=_,_=null),O&&typeof O!="function"&&(O=i.parse),_=p(_),E=S(x||"",_),b=!E.protocol&&!E.slashes,T.slashes=E.slashes||b&&_.slashes,T.protocol=E.protocol||_.protocol||"",x=E.rest,(E.protocol==="file:"&&(E.slashesCount!==2||f.test(x))||!E.slashes&&(E.protocol||E.slashesCount<2||!g(T.protocol)))&&(H[3]=[/(.*)/,"pathname"]);L<H.length;L++){if(k=H[L],typeof k=="function"){x=k(x,T);continue}y=k[0],R=k[1],y!==y?T[R]=x:typeof y=="string"?(C=y==="@"?x.lastIndexOf(y):x.indexOf(y),~C&&(typeof k[2]=="number"?(T[R]=x.slice(0,C),x=x.slice(C+k[2])):(T[R]=x.slice(C),x=x.slice(0,C)))):(C=y.exec(x))&&(T[R]=C[1],x=x.slice(0,C.index)),T[R]=T[R]||b&&k[3]&&_[R]||"",k[4]&&(T[R]=T[R].toLowerCase())}O&&(T.query=O(T.query)),b&&_.slashes&&T.pathname.charAt(0)!=="/"&&(T.pathname!==""||_.pathname!=="")&&(T.pathname=N(T.pathname,_.pathname)),T.pathname.charAt(0)!=="/"&&g(T.protocol)&&(T.pathname="/"+T.pathname),n(T.port,T.protocol)||(T.host=T.hostname,T.port=""),T.username=T.password="",T.auth&&(C=T.auth.indexOf(":"),~C?(T.username=T.auth.slice(0,C),T.username=encodeURIComponent(decodeURIComponent(T.username)),T.password=T.auth.slice(C+1),T.password=encodeURIComponent(decodeURIComponent(T.password))):T.username=encodeURIComponent(decodeURIComponent(T.auth)),T.auth=T.password?T.username+":"+T.password:T.username),T.origin=T.protocol!=="file:"&&g(T.protocol)&&T.host?T.protocol+"//"+T.host:"null",T.href=T.toString()}function F(x,_,O){var b=this;switch(x){case"query":typeof _=="string"&&_.length&&(_=(O||i.parse)(_)),b[x]=_;break;case"port":b[x]=_,n(_,b.protocol)?_&&(b.host=b.hostname+":"+_):(b.host=b.hostname,b[x]="");break;case"hostname":b[x]=_,b.port&&(_+=":"+b.port),b.host=_;break;case"host":b[x]=_,u.test(_)?(_=_.split(":"),b.port=_.pop(),b.hostname=_.join(":")):(b.hostname=_,b.port="");break;case"protocol":b.protocol=_.toLowerCase(),b.slashes=!O;break;case"pathname":case"hash":if(_){var E=x==="pathname"?"/":"#";b[x]=_.charAt(0)!==E?E+_:_}else b[x]=_;break;case"username":case"password":b[x]=encodeURIComponent(_);break;case"auth":var y=_.indexOf(":");~y?(b.username=_.slice(0,y),b.username=encodeURIComponent(decodeURIComponent(b.username)),b.password=_.slice(y+1),b.password=encodeURIComponent(decodeURIComponent(b.password))):b.username=encodeURIComponent(decodeURIComponent(_))}for(var k=0;k<d.length;k++){var C=d[k];C[4]&&(b[C[1]]=b[C[1]].toLowerCase())}return b.auth=b.password?b.username+":"+b.password:b.username,b.origin=b.protocol!=="file:"&&g(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString(),b}function A(x){(!x||typeof x!="function")&&(x=i.stringify);var _,O=this,b=O.host,E=O.protocol;E&&E.charAt(E.length-1)!==":"&&(E+=":");var y=E+(O.protocol&&O.slashes||g(O.protocol)?"//":"");return O.username?(y+=O.username,O.password&&(y+=":"+O.password),y+="@"):O.password?(y+=":"+O.password,y+="@"):O.protocol!=="file:"&&g(O.protocol)&&!b&&O.pathname!=="/"&&(y+="@"),(b[b.length-1]===":"||u.test(O.hostname)&&!O.port)&&(b+=":"),y+=b+O.pathname,_=typeof O.query=="object"?x(O.query):O.query,_&&(y+=_.charAt(0)!=="?"?"?"+_:_),O.hash&&(y+=O.hash),y}j.prototype={set:F,toString:A},j.extractProtocol=S,j.location=p,j.trimLeft=w,j.qs=i,r.exports=j}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{querystringify:58,"requires-port":59}]},{},[1])(1)})});var P={LF:`
`,NULL:"\0"};var $=class I{constructor(c){let{command:m,headers:e,body:r,binaryBody:v,escapeHeaderValues:l,skipContentLengthHeader:n}=c;this.command=m,this.headers=Object.assign({},e||{}),v?(this._binaryBody=v,this.isBinaryBody=!0):(this._body=r||"",this.isBinaryBody=!1),this.escapeHeaderValues=l||!1,this.skipContentLengthHeader=n||!1}get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}static fromRawFrame(c,m){let e={},r=v=>v.replace(/^\s+|\s+$/g,"");for(let v of c.headers.reverse()){let l=v.indexOf(":"),n=r(v[0]),i=r(v[1]);m&&c.command!=="CONNECT"&&c.command!=="CONNECTED"&&(i=I.hdrValueUnEscape(i)),e[n]=i}return new I({command:c.command,headers:e,binaryBody:c.binaryBody,escapeHeaderValues:m})}toString(){return this.serializeCmdAndHeaders()}serialize(){let c=this.serializeCmdAndHeaders();return this.isBinaryBody?I.toUnit8Array(c,this._binaryBody).buffer:c+this._body+P.NULL}serializeCmdAndHeaders(){let c=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(let m of Object.keys(this.headers||{})){let e=this.headers[m];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?c.push(`${m}:${I.hdrValueEscape(`${e}`)}`):c.push(`${m}:${e}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&c.push(`content-length:${this.bodyLength()}`),c.join(P.LF)+P.LF+P.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){let c=this.binaryBody;return c?c.length:0}static sizeOfUTF8(c){return c?new TextEncoder().encode(c).length:0}static toUnit8Array(c,m){let e=new TextEncoder().encode(c),r=new Uint8Array([0]),v=new Uint8Array(e.length+m.length+r.length);return v.set(e),v.set(m,e.length),v.set(r,e.length+m.length),v}static marshall(c){return new I(c).serialize()}static hdrValueEscape(c){return c.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(c){return c.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}};var J=class{constructor(c,m){this.onFrame=c,this.onIncomingPing=m,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(c,m=!1){let e;if(typeof c=="string"?e=this._encoder.encode(c):e=new Uint8Array(c),m&&e[e.length-1]!==0){let r=new Uint8Array(e.length+1);r.set(e,0),r[e.length]=0,e=r}for(let r=0;r<e.length;r++){let v=e[r];this._onByte(v)}}_collectFrame(c){if(c!==0&&c!==13){if(c===10){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(c)}}_collectCommand(c){if(c!==13){if(c===10){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(c)}}_collectHeaders(c){if(c!==13){if(c===10){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(c)}}_reinjectByte(c){this._onByte(c)}_collectHeaderKey(c){if(c===58){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(c)}_collectHeaderValue(c){if(c!==13){if(c===10){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(c)}}_setupCollectBody(){let c=this._results.headers.filter(m=>m[0]==="content-length")[0];c?(this._bodyBytesRemaining=parseInt(c[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(c){if(c===0){this._retrievedBody();return}this._consumeByte(c)}_collectBodyFixedSize(c){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(c)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(c){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",c)}this._initState()}_consumeByte(c){this._token.push(c)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){let c=new Uint8Array(this._token);return this._token=[],c}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}};var W;(function(I){I[I.CONNECTING=0]="CONNECTING",I[I.OPEN=1]="OPEN",I[I.CLOSING=2]="CLOSING",I[I.CLOSED=3]="CLOSED"})(W=W||(W={}));var D;(function(I){I[I.ACTIVE=0]="ACTIVE",I[I.DEACTIVATING=1]="DEACTIVATING",I[I.INACTIVE=2]="INACTIVE"})(D=D||(D={}));var U=class{constructor(c){this.versions=c}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(c=>`v${c.replace(".","")}.stomp`)}};U.V1_0="1.0";U.V1_1="1.1";U.V1_2="1.2";U.default=new U([U.V1_2,U.V1_1,U.V1_0]);function se(I,c){I.terminate=function(){let m=()=>{};this.onerror=m,this.onmessage=m,this.onopen=m;let e=new Date,r=Math.random().toString().substring(2,8),v=this.onclose;this.onclose=l=>{let n=new Date().getTime()-e.getTime();c(`Discarded socket (#${r})  closed after ${n}ms, with code/reason: ${l.code}/${l.reason}`)},this.close(),v?.call(I,{code:4001,reason:`Quick discarding socket (#${r}) without waiting for the shutdown sequence.`,wasClean:!1})}}var z=class{constructor(c,m,e){this._client=c,this._webSocket=m,this._connected=!1,this._serverFrameHandlers={CONNECTED:r=>{this.debug(`connected to server ${r.headers.server}`),this._connected=!0,this._connectedVersion=r.headers.version,this._connectedVersion===U.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(r.headers),this.onConnect(r)},MESSAGE:r=>{let v=r.headers.subscription,l=this._subscriptions[v]||this.onUnhandledMessage,n=r,i=this,t=this._connectedVersion===U.V1_2?n.headers.ack:n.headers["message-id"];n.ack=(s={})=>i.ack(t,v,s),n.nack=(s={})=>i.nack(t,v,s),l(n)},RECEIPT:r=>{let v=this._receiptWatchers[r.headers["receipt-id"]];v?(v(r),delete this._receiptWatchers[r.headers["receipt-id"]]):this.onUnhandledReceipt(r)},ERROR:r=>{this.onStompError(r)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=e.debug,this.stompVersions=e.stompVersions,this.connectHeaders=e.connectHeaders,this.disconnectHeaders=e.disconnectHeaders,this.heartbeatIncoming=e.heartbeatIncoming,this.heartbeatOutgoing=e.heartbeatOutgoing,this.splitLargeFrames=e.splitLargeFrames,this.maxWebSocketChunkSize=e.maxWebSocketChunkSize,this.forceBinaryWSFrames=e.forceBinaryWSFrames,this.logRawCommunication=e.logRawCommunication,this.appendMissingNULLonIncoming=e.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=e.discardWebsocketOnCommFailure,this.onConnect=e.onConnect,this.onDisconnect=e.onDisconnect,this.onStompError=e.onStompError,this.onWebSocketClose=e.onWebSocketClose,this.onWebSocketError=e.onWebSocketError,this.onUnhandledMessage=e.onUnhandledMessage,this.onUnhandledReceipt=e.onUnhandledReceipt,this.onUnhandledFrame=e.onUnhandledFrame}get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}start(){let c=new J(m=>{let e=$.fromRawFrame(m,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${e}`),(this._serverFrameHandlers[e.command]||this.onUnhandledFrame)(e)},()=>{this.debug("<<< PONG")});this._webSocket.onmessage=m=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){let e=m.data instanceof ArrayBuffer?new TextDecoder().decode(m.data):m.data;this.debug(`<<< ${e}`)}c.parseChunk(m.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=m=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(m)},this._webSocket.onerror=m=>{this.onWebSocketError(m)},this._webSocket.onopen=()=>{let m=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),m["accept-version"]=this.stompVersions.supportedVersions(),m["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:m})}}_setupHeartbeat(c){if(c.version!==U.V1_1&&c.version!==U.V1_2||!c["heart-beat"])return;let[m,e]=c["heart-beat"].split(",").map(r=>parseInt(r,10));if(this.heartbeatOutgoing!==0&&e!==0){let r=Math.max(this.heartbeatOutgoing,e);this.debug(`send PING every ${r}ms`),this._pinger=setInterval(()=>{this._webSocket.readyState===W.OPEN&&(this._webSocket.send(P.LF),this.debug(">>> PING"))},r)}if(this.heartbeatIncoming!==0&&m!==0){let r=Math.max(this.heartbeatIncoming,m);this.debug(`check PONG every ${r}ms`),this._ponger=setInterval(()=>{let v=Date.now()-this._lastServerActivityTS;v>r*2&&(this.debug(`did not receive server activity for the last ${v}ms`),this._closeOrDiscardWebsocket())},r)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===W.CONNECTING||this._webSocket.readyState===W.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&se(this._webSocket,c=>this.debug(c)),this._webSocket.terminate()}_transmit(c){let{command:m,headers:e,body:r,binaryBody:v,skipContentLengthHeader:l}=c,n=new $({command:m,headers:e,body:r,binaryBody:v,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:l}),i=n.serialize();if(this.logRawCommunication?this.debug(`>>> ${i}`):this.debug(`>>> ${n}`),this.forceBinaryWSFrames&&typeof i=="string"&&(i=new TextEncoder().encode(i)),typeof i!="string"||!this.splitLargeFrames)this._webSocket.send(i);else{let t=i;for(;t.length>0;){let s=t.substring(0,this.maxWebSocketChunkSize);t=t.substring(this.maxWebSocketChunkSize),this._webSocket.send(s),this.debug(`chunk sent = ${s.length}, remaining = ${t.length}`)}}}dispose(){if(this.connected)try{let c=Object.assign({},this.disconnectHeaders);c.receipt||(c.receipt=`close-${this._counter++}`),this.watchForReceipt(c.receipt,m=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(m)}),this._transmit({command:"DISCONNECT",headers:c})}catch(c){this.debug(`Ignoring error during disconnect ${c}`)}else(this._webSocket.readyState===W.CONNECTING||this._webSocket.readyState===W.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(clearInterval(this._pinger),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(c){let{destination:m,headers:e,body:r,binaryBody:v,skipContentLengthHeader:l}=c,n=Object.assign({destination:m},e);this._transmit({command:"SEND",headers:n,body:r,binaryBody:v,skipContentLengthHeader:l})}watchForReceipt(c,m){this._receiptWatchers[c]=m}subscribe(c,m,e={}){e=Object.assign({},e),e.id||(e.id=`sub-${this._counter++}`),e.destination=c,this._subscriptions[e.id]=m,this._transmit({command:"SUBSCRIBE",headers:e});let r=this;return{id:e.id,unsubscribe(v){return r.unsubscribe(e.id,v)}}}unsubscribe(c,m={}){m=Object.assign({},m),delete this._subscriptions[c],m.id=c,this._transmit({command:"UNSUBSCRIBE",headers:m})}begin(c){let m=c||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:m}});let e=this;return{id:m,commit(){e.commit(m)},abort(){e.abort(m)}}}commit(c){this._transmit({command:"COMMIT",headers:{transaction:c}})}abort(c){this._transmit({command:"ABORT",headers:{transaction:c}})}ack(c,m,e={}){e=Object.assign({},e),this._connectedVersion===U.V1_2?e.id=c:e["message-id"]=c,e.subscription=m,this._transmit({command:"ACK",headers:e})}nack(c,m,e={}){return e=Object.assign({},e),this._connectedVersion===U.V1_2?e.id=c:e["message-id"]=c,e.subscription=m,this._transmit({command:"NACK",headers:e})}};var K=class{constructor(c={}){this.stompVersions=U.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=D.INACTIVE;let m=()=>{};this.debug=m,this.beforeConnect=m,this.onConnect=m,this.onDisconnect=m,this.onUnhandledMessage=m,this.onUnhandledReceipt=m,this.onUnhandledFrame=m,this.onStompError=m,this.onWebSocketClose=m,this.onWebSocketError=m,this.logRawCommunication=!1,this.onChangeState=m,this.connectHeaders={},this._disconnectHeaders={},this.configure(c)}get webSocket(){return this._stompHandler?._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(c){this._disconnectHeaders=c,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===D.ACTIVE}_changeState(c){this.state=c,this.onChangeState(c)}configure(c){Object.assign(this,c)}activate(){let c=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(D.ACTIVE),this._connect()};this.state===D.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{c()})):c()}_connect(){return Z(this,null,function*(){if(yield this.beforeConnect(),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");let c=this._createWebSocket();this._stompHandler=new z(this,c,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatOutgoing:this.heartbeatOutgoing,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:m=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(m)},onDisconnect:m=>{this.onDisconnect(m)},onStompError:m=>{this.onStompError(m)},onWebSocketClose:m=>{this._stompHandler=void 0,this.state===D.DEACTIVATING&&this._changeState(D.INACTIVE),this.onWebSocketClose(m),this.active&&this._schedule_reconnect()},onWebSocketError:m=>{this.onWebSocketError(m)},onUnhandledMessage:m=>{this.onUnhandledMessage(m)},onUnhandledReceipt:m=>{this.onUnhandledReceipt(m)},onUnhandledFrame:m=>{this.onUnhandledFrame(m)}}),this._stompHandler.start()})}_createWebSocket(){let c;if(this.webSocketFactory)c=this.webSocketFactory();else if(this.brokerURL)c=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return c.binaryType="arraybuffer",c}_schedule_reconnect(){this.reconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this.reconnectDelay}ms`),this._reconnector=setTimeout(()=>{this._connect()},this.reconnectDelay))}deactivate(){return Z(this,arguments,function*(c={}){let m=c.force||!1,e=this.active,r;if(this.state===D.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(D.DEACTIVATING),this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==W.CLOSED){let v=this._stompHandler.onWebSocketClose;r=new Promise((l,n)=>{this._stompHandler.onWebSocketClose=i=>{v(i),l()}})}else return this._changeState(D.INACTIVE),Promise.resolve();return m?this._stompHandler?.discardWebsocket():e&&this._disposeStompHandler(),r})}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(c){this._checkConnection(),this._stompHandler.publish(c)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(c,m){this._checkConnection(),this._stompHandler.watchForReceipt(c,m)}subscribe(c,m,e={}){return this._checkConnection(),this._stompHandler.subscribe(c,m,e)}unsubscribe(c,m={}){this._checkConnection(),this._stompHandler.unsubscribe(c,m)}begin(c){return this._checkConnection(),this._stompHandler.begin(c)}commit(c){this._checkConnection(),this._stompHandler.commit(c)}abort(c){this._checkConnection(),this._stompHandler.abort(c)}ack(c,m,e={}){this._checkConnection(),this._stompHandler.ack(c,m,e)}nack(c,m,e={}){this._checkConnection(),this._stompHandler.nack(c,m,e)}};var Q=class{constructor(c){this.client=c}get outgoing(){return this.client.heartbeatOutgoing}set outgoing(c){this.client.heartbeatOutgoing=c}get incoming(){return this.client.heartbeatIncoming}set incoming(c){this.client.heartbeatIncoming=c}};var X=class extends K{constructor(c){super(),this.maxWebSocketFrameSize=16*1024,this._heartbeatInfo=new Q(this),this.reconnect_delay=0,this.webSocketFactory=c,this.debug=(...m)=>{console.log(...m)}}_parseConnect(...c){let m,e,r,v={};if(c.length<2)throw new Error("Connect requires at least 2 arguments");if(typeof c[1]=="function")[v,e,r,m]=c;else switch(c.length){case 6:[v.login,v.passcode,e,r,m,v.host]=c;break;default:[v.login,v.passcode,e,r,m]=c}return[v,e,r,m]}connect(...c){let m=this._parseConnect(...c);m[0]&&(this.connectHeaders=m[0]),m[1]&&(this.onConnect=m[1]),m[2]&&(this.onStompError=m[2]),m[3]&&(this.onWebSocketClose=m[3]),super.activate()}disconnect(c,m={}){c&&(this.onDisconnect=c),this.disconnectHeaders=m,super.deactivate()}send(c,m={},e=""){m=Object.assign({},m);let r=m["content-length"]===!1;r&&delete m["content-length"],this.publish({destination:c,headers:m,body:e,skipContentLengthHeader:r})}set reconnect_delay(c){this.reconnectDelay=c}get ws(){return this.webSocket}get version(){return this.connectedVersion}get onreceive(){return this.onUnhandledMessage}set onreceive(c){this.onUnhandledMessage=c}get onreceipt(){return this.onUnhandledReceipt}set onreceipt(c){this.onUnhandledReceipt=c}get heartbeat(){return this._heartbeatInfo}set heartbeat(c){this.heartbeatIncoming=c.incoming,this.heartbeatOutgoing=c.outgoing}};var re=(()=>{class I{static client(m,e){e==null&&(e=U.default.protocolVersions());let r=()=>{let v=I.WebSocketClass||WebSocket;return new v(m,e)};return new X(r)}static over(m){let e;return typeof m=="function"?e=m:(console.warn("Stomp.over did not receive a factory, auto reconnect will not work. Please see https://stomp-js.github.io/api-docs/latest/classes/Stomp.html#over"),e=()=>m),new X(e)}}return I.WebSocketClass=null,I})();var ce=ue(ae());var Pe=(()=>{class I{constructor(){this.state$=new te(!1);let m=new ce.default(`${ie}/ws`);this.client=re.over(m),this.client.debug=()=>{},this.client.configure({onConnect:()=>{console.log("Connected to WebSocket"),this.state$.next(!0)},onDisconnect:()=>{console.log("Disconnected from WebSocket")},onStompError:e=>{console.error("STOMP error:",e)}})}emit(m,e){this.state$.value?this.client.publish({destination:m,body:JSON.stringify(e)}):console.error("WebSocket connection not established")}on(m){return new ee(e=>{let r=this.client.subscribe(m,v=>{try{let l=JSON.parse(v.body);e.next(l)}catch(l){e.error(l)}});return()=>{r&&r.unsubscribe()}})}connectSocket(){return this.client.connected,this.client.activate(),this.state$.asObservable()}disconnectSocket(){this.client&&this.client.connected&&(this.client.deactivate(),this.state$.next(!1),this.state$.complete())}static{this.\u0275fac=function(e){return new(e||I)}}static{this.\u0275prov=ne({token:I,factory:I.\u0275fac,providedIn:"root"})}}return I})();export{Pe as a};
