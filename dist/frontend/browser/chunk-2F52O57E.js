import{a as ut,b as dt}from"./chunk-5DIKSZ53.js";import{c as wt}from"./chunk-V3XMYPWX.js";import{a as he,b as xt,c as It}from"./chunk-S6TVBKXV.js";import{a as Tt,b as Vt}from"./chunk-SIA53XLW.js";import{a as Ne}from"./chunk-DZZFUWF2.js";import{a as bt}from"./chunk-XWR3UEFV.js";import{a as Ot,b as St}from"./chunk-EHQC63XV.js";import{c as mt}from"./chunk-JJG6SWE7.js";import{a as _t,b as ft}from"./chunk-P5CSBYLR.js";import{h as ht,j as gt}from"./chunk-VWHAAH3S.js";import{a as Mt,b as Et}from"./chunk-VUELGBHH.js";import{a as Ye,b as pe,c as it,d as ue,e as nt,f as ot}from"./chunk-MVHRCX3U.js";import{a as Xe,b as re,c as ce,f as me,g as lt,h as st,i as at,j as te,m as rt,n as pt}from"./chunk-6G6ZJK7H.js";import{c as Be}from"./chunk-PREI7CCJ.js";import{U as ct,W as Ct,X as yt,Z as vt}from"./chunk-7CWJXPPP.js";import"./chunk-IIWQCPW7.js";import{$ as Ce,$a as l,Ab as T,Ad as M,Bb as w,Cb as O,Fb as ne,Ga as $,Gb as g,Hb as F,Ia as a,Ib as D,Ic as ze,Ja as I,Kb as U,Lb as z,Mb as P,Mc as Q,Nb as Te,Nc as Pe,Oa as Ie,Oc as Ke,Pb as W,Pc as Re,Qb as V,Rb as R,Sa as q,Sb as Ve,Td as et,Uc as qe,Ud as tt,Wa as be,Wd as de,Xa as h,Xb as oe,Zb as le,Zc as He,_ as ge,_a as y,_b as Me,a as _e,aa as B,bb as we,ca as ye,cb as H,cc as Ee,db as j,dc as f,ec as L,fb as Oe,fc as se,ha as N,hc as ke,ia as K,ic as Ae,j as fe,jb as p,kb as u,lb as v,ld as je,mb as k,md as Qe,nb as A,nc as Z,nd as x,oa as d,ob as E,oc as J,od as Ge,pa as m,pb as b,pc as X,qc as Le,rc as Fe,sb as C,sd as $e,td as We,ub as r,uc as De,ud as Ze,wa as S,wc as Y,xa as ve,xd as ee,yc as Ue,yd as ae,za as xe,zb as Se,zd as Je}from"./chunk-UHTXMJPS.js";var Kt=["container"],Rt=["focusInput"],qt=["multiIn"],Ht=["multiContainer"],jt=["ddBtn"],Qt=["items"],Gt=["scroller"],$t=["overlay"],Wt=n=>({"p-autocomplete-token":!0,"p-focus":n}),kt=n=>({$implicit:n}),ie=n=>({height:n}),At=(n,s)=>({$implicit:n,options:s}),Zt=n=>({options:n}),Jt=()=>({}),Xt=(n,s,e)=>({"p-highlight":n,"p-focus":s,"p-disabled":e}),Yt=(n,s)=>({$implicit:n,index:s});function ei(n,s){if(n&1){let e=b();p(0,"input",20,3),C("input",function(i){d(e);let o=r();return m(o.onInput(i))})("keydown",function(i){d(e);let o=r();return m(o.onKeyDown(i))})("change",function(i){d(e);let o=r();return m(o.onInputChange(i))})("focus",function(i){d(e);let o=r();return m(o.onInputFocus(i))})("blur",function(i){d(e);let o=r();return m(o.onInputBlur(i))})("paste",function(i){d(e);let o=r();return m(o.onInputPaste(i))})("keyup",function(i){d(e);let o=r();return m(o.onInputKeyUp(i))}),u()}if(n&2){let e,t=r();j(t.inputStyleClass),l("autofocus",t.autofocus)("ngClass",t.inputClass)("ngStyle",t.inputStyle)("type",t.type)("autocomplete",t.autocomplete)("required",t.required)("name",t.name)("tabindex",t.disabled?-1:t.tabindex)("readonly",t.readonly)("disabled",t.disabled),y("value",t.inputValue())("id",t.inputId)("placeholder",t.placeholder)("size",t.size)("maxlength",t.maxlength)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledBy)("aria-required",t.required)("aria-expanded",(e=t.overlayVisible)!==null&&e!==void 0?e:!1)("aria-controls",t.overlayVisible?t.id+"_list":null)("aria-activedescendant",t.focused?t.focusedOptionId:void 0)}}function ti(n,s){if(n&1){let e=b();p(0,"TimesIcon",23),C("click",function(){d(e);let i=r(2);return m(i.clear())}),u()}n&2&&(l("styleClass","p-autocomplete-clear-icon"),y("aria-hidden",!0))}function ii(n,s){}function ni(n,s){n&1&&h(0,ii,0,0,"ng-template")}function oi(n,s){if(n&1){let e=b();p(0,"span",24),C("click",function(){d(e);let i=r(2);return m(i.clear())}),h(1,ni,1,0,null,17),u()}if(n&2){let e=r(2);y("aria-hidden",!0),a(),l("ngTemplateOutlet",e.clearIconTemplate)}}function li(n,s){if(n&1&&(k(0),h(1,ti,1,2,"TimesIcon",21)(2,oi,2,2,"span",22),A()),n&2){let e=r();a(),l("ngIf",!e.clearIconTemplate),a(),l("ngIf",e.clearIconTemplate)}}function si(n,s){n&1&&E(0)}function ai(n,s){if(n&1&&(p(0,"span",35),g(1),u()),n&2){let e=r().$implicit,t=r(2);a(),F(t.getMultipleLabel(e))}}function ri(n,s){n&1&&v(0,"TimesCircleIcon",36),n&2&&(l("styleClass","p-autocomplete-token-icon"),y("aria-hidden",!0))}function pi(n,s){}function ci(n,s){n&1&&h(0,pi,0,0,"ng-template")}function ui(n,s){if(n&1&&(p(0,"span",37),h(1,ci,1,0,null,17),u()),n&2){let e=r(3);y("aria-hidden",!0),a(),l("ngTemplateOutlet",e.removeIconTemplate)}}function di(n,s){if(n&1){let e=b();p(0,"li",29,5),h(2,si,1,0,"ng-container",30)(3,ai,2,1,"span",31),p(4,"span",32),C("click",function(i){let o=d(e).index,c=r(2);return m(c.readonly?"":c.removeOption(i,o))}),h(5,ri,1,2,"TimesCircleIcon",33)(6,ui,2,2,"span",34),u()()}if(n&2){let e=s.$implicit,t=s.index,i=r(2);l("ngClass",V(11,Wt,i.focusedMultipleOptionIndex()===t)),y("id",i.id+"_multiple_option_"+t)("aria-label",i.getOptionLabel(e))("aria-setsize",i.modelValue().length)("aria-posinset",t+1)("aria-selected",!0),a(2),l("ngTemplateOutlet",i.selectedItemTemplate)("ngTemplateOutletContext",V(13,kt,e)),a(),l("ngIf",!i.selectedItemTemplate),a(2),l("ngIf",!i.removeIconTemplate),a(),l("ngIf",i.removeIconTemplate)}}function mi(n,s){if(n&1){let e=b();p(0,"ul",25,4),C("focus",function(i){d(e);let o=r();return m(o.onMultipleContainerFocus(i))})("blur",function(i){d(e);let o=r();return m(o.onMultipleContainerBlur(i))})("keydown",function(i){d(e);let o=r();return m(o.onMultipleContainerKeyDown(i))}),h(2,di,7,15,"li",26),p(3,"li",27)(4,"input",28,3),C("input",function(i){d(e);let o=r();return m(o.onInput(i))})("keydown",function(i){d(e);let o=r();return m(o.onKeyDown(i))})("change",function(i){d(e);let o=r();return m(o.onInputChange(i))})("focus",function(i){d(e);let o=r();return m(o.onInputFocus(i))})("blur",function(i){d(e);let o=r();return m(o.onInputBlur(i))})("paste",function(i){d(e);let o=r();return m(o.onInputPaste(i))})("keyup",function(i){d(e);let o=r();return m(o.onInputKeyUp(i))}),u()()()}if(n&2){let e,t=r();l("ngClass",t.multiContainerClass)("tabindex",-1),y("aria-orientation","horizontal")("aria-activedescendant",t.focused?t.focusedMultipleOptionId:void 0),a(2),l("ngForOf",t.modelValue()),a(2),j(t.inputStyleClass),l("autofocus",t.autofocus)("ngClass",t.inputClass)("ngStyle",t.inputStyle)("autocomplete",t.autocomplete)("required",t.required)("tabindex",t.disabled?-1:t.tabindex)("readonly",t.readonly)("disabled",t.disabled),y("type",t.type)("id",t.inputId)("name",t.name)("placeholder",t.filled?null:t.placeholder)("size",t.size)("maxlength",t.maxlength)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledBy)("aria-required",t.required)("aria-expanded",(e=t.overlayVisible)!==null&&e!==void 0?e:!1)("aria-controls",t.overlayVisible?t.id+"_list":null)("aria-activedescendant",t.focused?t.focusedOptionId:void 0)}}function hi(n,s){n&1&&v(0,"SpinnerIcon",40),n&2&&(l("styleClass","p-autocomplete-loader")("spin",!0),y("aria-hidden",!0))}function _i(n,s){}function fi(n,s){n&1&&h(0,_i,0,0,"ng-template")}function gi(n,s){if(n&1&&(p(0,"span",41),h(1,fi,1,0,null,17),u()),n&2){let e=r(2);y("aria-hidden",!0),a(),l("ngTemplateOutlet",e.loadingIconTemplate)}}function Ci(n,s){if(n&1&&(k(0),h(1,hi,1,3,"SpinnerIcon",38)(2,gi,2,2,"span",39),A()),n&2){let e=r();a(),l("ngIf",!e.loadingIconTemplate),a(),l("ngIf",e.loadingIconTemplate)}}function yi(n,s){if(n&1&&v(0,"span",44),n&2){let e=r(2);l("ngClass",e.dropdownIcon),y("aria-hidden",!0)}}function vi(n,s){n&1&&v(0,"ChevronDownIcon")}function xi(n,s){}function Ii(n,s){n&1&&h(0,xi,0,0,"ng-template")}function bi(n,s){if(n&1&&(k(0),h(1,vi,1,0,"ChevronDownIcon",12)(2,Ii,1,0,null,17),A()),n&2){let e=r(2);a(),l("ngIf",!e.dropdownIconTemplate),a(),l("ngTemplateOutlet",e.dropdownIconTemplate)}}function wi(n,s){if(n&1){let e=b();p(0,"button",42,6),C("click",function(i){d(e);let o=r();return m(o.handleDropdownClick(i))}),h(2,yi,1,2,"span",43)(3,bi,3,2,"ng-container",12),u()}if(n&2){let e=r();l("disabled",e.disabled),y("aria-label",e.dropdownAriaLabel)("tabindex",e.tabindex),a(2),l("ngIf",e.dropdownIcon),a(),l("ngIf",!e.dropdownIcon)}}function Oi(n,s){n&1&&E(0)}function Si(n,s){n&1&&E(0)}function Ti(n,s){if(n&1&&h(0,Si,1,0,"ng-container",30),n&2){let e=s.$implicit,t=s.options;r(2);let i=ne(14);l("ngTemplateOutlet",i)("ngTemplateOutletContext",R(2,At,e,t))}}function Vi(n,s){n&1&&E(0)}function Mi(n,s){if(n&1&&h(0,Vi,1,0,"ng-container",30),n&2){let e=s.options,t=r(3);l("ngTemplateOutlet",t.loaderTemplate)("ngTemplateOutletContext",V(2,Zt,e))}}function Ei(n,s){n&1&&(k(0),h(1,Mi,1,4,"ng-template",47),A())}function ki(n,s){if(n&1){let e=b();p(0,"p-scroller",45,7),C("onLazyLoad",function(i){d(e);let o=r();return m(o.onLazyLoad.emit(i))}),h(2,Ti,1,5,"ng-template",46)(3,Ei,2,0,"ng-container",12),u()}if(n&2){let e=r();H(V(8,ie,e.scrollHeight)),l("items",e.visibleOptions())("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),a(3),l("ngIf",e.loaderTemplate)}}function Ai(n,s){n&1&&E(0)}function Li(n,s){if(n&1&&(k(0),h(1,Ai,1,0,"ng-container",30),A()),n&2){let e=r(),t=ne(14);a(),l("ngTemplateOutlet",t)("ngTemplateOutletContext",R(3,At,e.visibleOptions(),W(2,Jt)))}}function Fi(n,s){if(n&1&&(p(0,"span"),g(1),u()),n&2){let e=r(2).$implicit,t=r(2);a(),F(t.getOptionGroupLabel(e.optionGroup))}}function Di(n,s){n&1&&E(0)}function Ui(n,s){if(n&1&&(k(0),p(1,"li",51),h(2,Fi,2,1,"span",12)(3,Di,1,0,"ng-container",30),u(),A()),n&2){let e=r(),t=e.$implicit,i=e.index,o=r().options,c=r();a(),l("ngStyle",V(5,ie,o.itemSize+"px")),y("id",c.id+"_"+c.getOptionIndex(i,o)),a(),l("ngIf",!c.groupTemplate),a(),l("ngTemplateOutlet",c.groupTemplate)("ngTemplateOutletContext",V(7,kt,t.optionGroup))}}function zi(n,s){if(n&1&&(p(0,"span"),g(1),u()),n&2){let e=r(2).$implicit,t=r(2);a(),F(t.getOptionLabel(e))}}function Pi(n,s){n&1&&E(0)}function Bi(n,s){if(n&1){let e=b();k(0),p(1,"li",52),C("click",function(i){d(e);let o=r().$implicit,c=r(2);return m(c.onOptionSelect(i,o))})("mouseenter",function(i){d(e);let o=r().index,c=r().options,_=r();return m(_.onOptionMouseEnter(i,_.getOptionIndex(o,c)))}),h(2,zi,2,1,"span",12)(3,Pi,1,0,"ng-container",30),u(),A()}if(n&2){let e=r(),t=e.$implicit,i=e.index,o=r().options,c=r();a(),l("ngStyle",V(12,ie,o.itemSize+"px"))("ngClass",Ve(14,Xt,c.isSelected(t),c.focusedOptionIndex()===c.getOptionIndex(i,o),c.isOptionDisabled(t))),y("id",c.id+"_"+c.getOptionIndex(i,o))("aria-label",c.getOptionLabel(t))("aria-selected",c.isSelected(t))("aria-disabled",c.isOptionDisabled(t))("data-p-focused",c.focusedOptionIndex()===c.getOptionIndex(i,o))("aria-setsize",c.ariaSetSize)("aria-posinset",c.getAriaPosInset(c.getOptionIndex(i,o))),a(),l("ngIf",!c.itemTemplate),a(),l("ngTemplateOutlet",c.itemTemplate)("ngTemplateOutletContext",R(18,Yt,t,o.getOptions?o.getOptions(i):i))}}function Ni(n,s){if(n&1&&h(0,Ui,4,9,"ng-container",12)(1,Bi,4,21,"ng-container",12),n&2){let e=s.$implicit,t=r(2);l("ngIf",t.isOptionGroup(e)),a(),l("ngIf",!t.isOptionGroup(e))}}function Ki(n,s){if(n&1&&(k(0),g(1),A()),n&2){let e=r(3);a(),D(" ",e.searchResultMessageText," ")}}function Ri(n,s){n&1&&E(0,null,9)}function qi(n,s){if(n&1&&(p(0,"li",53),h(1,Ki,2,1,"ng-container",54)(2,Ri,2,0,"ng-container",17),u()),n&2){let e=r().options,t=r();l("ngStyle",V(4,ie,e.itemSize+"px")),a(),l("ngIf",!t.emptyTemplate)("ngIfElse",t.empty),a(),l("ngTemplateOutlet",t.emptyTemplate)}}function Hi(n,s){if(n&1&&(p(0,"ul",48,8),h(2,Ni,2,2,"ng-template",49)(3,qi,3,6,"li",50),u()),n&2){let e=s.$implicit,t=s.options,i=r();H(t.contentStyle),l("ngClass",t.contentStyleClass),y("id",i.id+"_list")("aria-label",i.listLabel),a(2),l("ngForOf",e),a(),l("ngIf",!e||e&&e.length===0&&i.showEmptyMessage)}}function ji(n,s){n&1&&E(0)}var Qi={provide:Ke,useExisting:ge(()=>Gi),multi:!0},Gi=(()=>{class n{document;el;renderer;cd;config;overlayService;zone;minLength=1;delay=300;style;panelStyle;styleClass;panelStyleClass;inputStyle;inputId;inputStyleClass;placeholder;readonly;disabled;scrollHeight="200px";lazy=!1;virtualScroll;virtualScrollItemSize;virtualScrollOptions;maxlength;name;required;size;appendTo;autoHighlight;forceSelection;type="text";autoZIndex=!0;baseZIndex=0;ariaLabel;dropdownAriaLabel;ariaLabelledBy;dropdownIcon;unique=!0;group;completeOnFocus=!1;showClear=!1;field;dropdown;showEmptyMessage=!0;dropdownMode="blank";multiple;tabindex;dataKey;emptyMessage;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";autofocus;autocomplete="off";optionGroupChildren="items";optionGroupLabel="label";overlayOptions;get suggestions(){return this._suggestions()}set suggestions(e){this._suggestions.set(e),this.handleSuggestionsChange()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}optionLabel;optionValue;id;searchMessage;emptySelectionMessage;selectionMessage;autoOptionFocus=!1;selectOnFocus;searchLocale;optionDisabled;focusOnHover;variant="outlined";completeMethod=new S;onSelect=new S;onUnselect=new S;onFocus=new S;onBlur=new S;onDropdownClick=new S;onClear=new S;onKeyUp=new S;onShow=new S;onHide=new S;onLazyLoad=new S;containerEL;inputEL;multiInputEl;multiContainerEL;dropdownButton;itemsViewChild;scroller;overlayViewChild;templates;_itemSize;itemsWrapper;itemTemplate;emptyTemplate;headerTemplate;footerTemplate;selectedItemTemplate;groupTemplate;loaderTemplate;removeIconTemplate;loadingIconTemplate;clearIconTemplate;dropdownIconTemplate;value;_suggestions=q(null);onModelChange=()=>{};onModelTouched=()=>{};timeout;overlayVisible;suggestionsUpdated;highlightOption;highlightOptionChanged;focused=!1;_filled;get filled(){return this._filled}set filled(e){this._filled=e}loading;scrollHandler;listId;searchTimeout;dirty=!1;modelValue=q(null);focusedMultipleOptionIndex=q(-1);focusedOptionIndex=q(-1);visibleOptions=se(()=>this.group?this.flatOptions(this._suggestions()):this._suggestions()||[]);inputValue=se(()=>{let e=this.modelValue(),t=this.getSelectedOption(e);if(e)if(typeof e=="object"||this.optionValue){let i=this.getOptionLabel(t);return i??e}else return e;else return""});get focusedMultipleOptionId(){return this.focusedMultipleOptionIndex()!==-1?`${this.id}_multiple_option_${this.focusedMultipleOptionIndex()}`:null}get focusedOptionId(){return this.focusedOptionIndex()!==-1?`${this.id}_${this.focusedOptionIndex()}`:null}get containerClass(){return{"p-autocomplete p-component p-inputwrapper":!0,"p-disabled":this.disabled,"p-focus":this.focused,"p-autocomplete-dd":this.dropdown,"p-autocomplete-multiple":this.multiple,"p-inputwrapper-focus":this.focused,"p-overlay-open":this.overlayVisible}}get multiContainerClass(){return{"p-autocomplete-multiple-container p-component p-inputtext":!0,"p-variant-filled":this.variant==="filled"||this.config.inputStyle()==="filled"}}get panelClass(){return{"p-autocomplete-panel p-component":!0,"p-input-filled":this.config.inputStyle()==="filled","p-ripple-disabled":this.config.ripple===!1}}get panelStyles(){return _e({"max-height":this.virtualScroll?"auto":this.scrollHeight},this.panelStyle)}get inputClass(){return{"p-autocomplete-input p-inputtext p-component":!this.multiple,"p-autocomplete-dd-input":this.dropdown,"p-variant-filled":this.variant==="filled"||this.config.inputStyle()==="filled"}}get searchResultMessageText(){return x.isNotEmpty(this.visibleOptions())&&this.overlayVisible?this.searchMessageText.replaceAll("{0}",this.visibleOptions().length):this.emptySearchMessageText}get searchMessageText(){return this.searchMessage||this.config.translation.searchMessage||""}get emptySearchMessageText(){return this.emptyMessage||this.config.translation.emptySearchMessage||""}get selectionMessageText(){return this.selectionMessage||this.config.translation.selectionMessage||""}get emptySelectionMessageText(){return this.emptySelectionMessage||this.config.translation.emptySelectionMessage||""}get selectedMessageText(){return this.hasSelectedOption()?this.selectionMessageText.replaceAll("{0}",this.multiple?this.modelValue().length:"1"):this.emptySelectionMessageText}get ariaSetSize(){return this.visibleOptions().filter(e=>!this.isOptionGroup(e)).length}get listLabel(){return this.config.getTranslation(Je.ARIA).listLabel}get virtualScrollerDisabled(){return!this.virtualScroll}get optionValueSelected(){return typeof this.modelValue()=="string"&&this.optionValue}get isVisibleClearIcon(){return this.modelValue()!=null&&this.hasSelectedOption()&&this.showClear&&!this.disabled&&!this.loading}constructor(e,t,i,o,c,_,Pt){this.document=e,this.el=t,this.renderer=i,this.cd=o,this.config=c,this.overlayService=_,this.zone=Pt,ke(()=>{this.filled=x.isNotEmpty(this.modelValue())})}ngOnInit(){this.id=this.id||Ge(),this.cd.detectChanges()}ngAfterViewChecked(){this.suggestionsUpdated&&this.overlayViewChild&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild&&this.overlayViewChild.alignOverlay()},1),this.suggestionsUpdated=!1})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"removetokenicon":this.removeIconTemplate=e.template;break;case"loadingicon":this.loadingIconTemplate=e.template;break;case"clearicon":this.clearIconTemplate=e.template;break;case"dropdownicon":this.dropdownIconTemplate=e.template;break;default:this.itemTemplate=e.template;break}})}handleSuggestionsChange(){if(this.loading){this._suggestions().length>0||this.showEmptyMessage?this.show():this.emptyTemplate?this.show():this.hide();let e=this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(e),this.suggestionsUpdated=!0,this.loading=!1,this.cd.markForCheck()}}flatOptions(e){return(e||[]).reduce((t,i,o)=>{t.push({optionGroup:i,group:!0,index:o});let c=this.getOptionGroupChildren(i);return c&&c.forEach(_=>t.push(_)),t},[])}isOptionGroup(e){return this.optionGroupLabel&&e.optionGroup&&e.group}findFirstOptionIndex(){return this.visibleOptions().findIndex(e=>this.isValidOption(e))}findLastOptionIndex(){return x.findLastIndex(this.visibleOptions(),e=>this.isValidOption(e))}findFirstFocusedOptionIndex(){let e=this.findSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e}findLastFocusedOptionIndex(){let e=this.findSelectedOptionIndex();return e<0?this.findLastOptionIndex():e}findSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(e=>this.isValidSelectedOption(e)):-1}findNextOptionIndex(e){let t=e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(i=>this.isValidOption(i)):-1;return t>-1?t+e+1:e}findPrevOptionIndex(e){let t=e>0?x.findLastIndex(this.visibleOptions().slice(0,e),i=>this.isValidOption(i)):-1;return t>-1?t:e}isValidSelectedOption(e){return this.isValidOption(e)&&this.isSelected(e)}isValidOption(e){return e&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))}isOptionDisabled(e){return this.optionDisabled?x.resolveFieldData(e,this.optionDisabled):!1}isSelected(e){return this.multiple?this.unique?this.modelValue()?.find(t=>x.equals(t,this.getOptionValue(e),this.equalityKey())):!1:x.equals(this.modelValue(),this.getOptionValue(e),this.equalityKey())}isOptionMatched(e,t){return this.isValidOption(e)&&this.getOptionLabel(e).toLocaleLowerCase(this.searchLocale)===t.toLocaleLowerCase(this.searchLocale)}isInputClicked(e){return e.target===this.inputEL.nativeElement}isDropdownClicked(e){return this.dropdownButton?.nativeElement?e.target===this.dropdownButton.nativeElement||this.dropdownButton.nativeElement.contains(e.target):!1}equalityKey(){return this.dataKey}onContainerClick(e){this.disabled||this.loading||this.isInputClicked(e)||this.isDropdownClicked(e)||(!this.overlayViewChild||!this.overlayViewChild.overlayViewChild?.nativeElement.contains(e.target))&&M.focus(this.inputEL.nativeElement)}handleDropdownClick(e){let t;this.overlayVisible?this.hide(!0):(M.focus(this.inputEL.nativeElement),t=this.inputEL.nativeElement.value,this.dropdownMode==="blank"?this.search(e,"","dropdown"):this.dropdownMode==="current"&&this.search(e,t,"dropdown")),this.onDropdownClick.emit({originalEvent:e,query:t})}onInput(e){this.searchTimeout&&clearTimeout(this.searchTimeout);let t=e.target.value;this.maxlength!==null&&(t=t.split("").slice(0,this.maxlength).join("")),!this.multiple&&!this.forceSelection&&this.updateModel(t),t.length===0&&!this.multiple&&!this.completeOnFocus?(this.onClear.emit(),this.hide()):t.length>=this.minLength?(this.focusedOptionIndex.set(-1),this.searchTimeout=setTimeout(()=>{this.search(e,t,"input")},this.delay)):this.hide()}onInputChange(e){if(this.forceSelection){let t=!1;if(this.visibleOptions()){let i=this.visibleOptions().find(o=>this.isOptionMatched(o,this.inputEL.nativeElement.value||""));i!==void 0&&(t=!0,!this.isSelected(i)&&this.onOptionSelect(e,i))}t||(this.inputEL.nativeElement.value="",!this.multiple&&this.updateModel(null))}}onInputFocus(e){if(this.disabled)return;!this.dirty&&this.completeOnFocus&&(this.search(e,e.target.value,"focus"),this.show()),this.dirty=!0,this.focused=!0;let t=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(t),this.overlayVisible&&this.scrollInView(this.focusedOptionIndex()),this.onFocus.emit(e)}onMultipleContainerFocus(e){this.disabled||(this.focused=!0)}onMultipleContainerBlur(e){this.focusedMultipleOptionIndex.set(-1),this.focused=!1}onMultipleContainerKeyDown(e){if(this.disabled){e.preventDefault();return}switch(e.code){case"ArrowLeft":this.onArrowLeftKeyOnMultiple(e);break;case"ArrowRight":this.onArrowRightKeyOnMultiple(e);break;case"Backspace":this.onBackspaceKeyOnMultiple(e);break;default:break}}onInputBlur(e){this.dirty=!1,this.focused=!1,this.focusedOptionIndex.set(-1),this.onModelTouched(),this.onBlur.emit(e)}onInputPaste(e){this.onKeyDown(e)}onInputKeyUp(e){this.onKeyUp.emit(e)}onKeyDown(e){if(this.disabled){e.preventDefault();return}switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"ArrowLeft":this.onArrowLeftKey(e);break;case"ArrowRight":this.onArrowRightKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"Backspace":this.onBackspaceKey(e);break;case"ShiftLeft":case"ShiftRight":break;default:break}}onArrowDownKey(e){if(!this.overlayVisible)return;let t=this.focusedOptionIndex()!==-1?this.findNextOptionIndex(this.focusedOptionIndex()):this.findFirstFocusedOptionIndex();this.changeFocusedOptionIndex(e,t),e.preventDefault(),e.stopPropagation()}onArrowUpKey(e){if(this.overlayVisible)if(e.altKey)this.focusedOptionIndex()!==-1&&this.onOptionSelect(e,this.visibleOptions()[this.focusedOptionIndex()]),this.overlayVisible&&this.hide(),e.preventDefault();else{let t=this.focusedOptionIndex()!==-1?this.findPrevOptionIndex(this.focusedOptionIndex()):this.findLastFocusedOptionIndex();this.changeFocusedOptionIndex(e,t),e.preventDefault(),e.stopPropagation()}}onArrowLeftKey(e){let t=e.currentTarget;this.focusedOptionIndex.set(-1),this.multiple&&(x.isEmpty(t.value)&&this.hasSelectedOption()?(M.focus(this.multiContainerEL.nativeElement),this.focusedMultipleOptionIndex.set(this.modelValue().length)):e.stopPropagation())}onArrowRightKey(e){this.focusedOptionIndex.set(-1),this.multiple&&e.stopPropagation()}onHomeKey(e){let{currentTarget:t}=e,i=t.value.length;t.setSelectionRange(0,e.shiftKey?i:0),this.focusedOptionIndex.set(-1),e.preventDefault()}onEndKey(e){let{currentTarget:t}=e,i=t.value.length;t.setSelectionRange(e.shiftKey?0:i,i),this.focusedOptionIndex.set(-1),e.preventDefault()}onPageDownKey(e){this.scrollInView(this.visibleOptions().length-1),e.preventDefault()}onPageUpKey(e){this.scrollInView(0),e.preventDefault()}onEnterKey(e){this.overlayVisible?(this.focusedOptionIndex()!==-1&&(this.onOptionSelect(e,this.visibleOptions()[this.focusedOptionIndex()]),e.preventDefault()),this.hide()):this.onArrowDownKey(e)}onEscapeKey(e){this.overlayVisible&&this.hide(!0),e.preventDefault()}onTabKey(e){this.focusedOptionIndex()!==-1&&this.onOptionSelect(e,this.visibleOptions()[this.focusedOptionIndex()]),this.overlayVisible&&this.hide()}onBackspaceKey(e){if(this.multiple){if(x.isNotEmpty(this.modelValue())&&!this.inputEL.nativeElement.value){let t=this.modelValue()[this.modelValue().length-1],i=this.modelValue().slice(0,-1);this.updateModel(i),this.onUnselect.emit({originalEvent:e,value:t})}e.stopPropagation()}!this.multiple&&this.showClear&&this.findSelectedOptionIndex()!=-1&&this.clear()}onArrowLeftKeyOnMultiple(e){let t=this.focusedMultipleOptionIndex()<1?0:this.focusedMultipleOptionIndex()-1;this.focusedMultipleOptionIndex.set(t)}onArrowRightKeyOnMultiple(e){let t=this.focusedMultipleOptionIndex();t++,this.focusedMultipleOptionIndex.set(t),t>this.modelValue().length-1&&(this.focusedMultipleOptionIndex.set(-1),M.focus(this.inputEL.nativeElement))}onBackspaceKeyOnMultiple(e){this.focusedMultipleOptionIndex()!==-1&&this.removeOption(e,this.focusedMultipleOptionIndex())}onOptionSelect(e,t,i=!0){let o=this.getOptionValue(t);this.multiple?(this.inputEL.nativeElement.value="",this.isSelected(t)||this.updateModel([...this.modelValue()||[],o])):this.updateModel(o),this.onSelect.emit({originalEvent:e,value:t}),i&&this.hide(!0)}onOptionMouseEnter(e,t){this.focusOnHover&&this.changeFocusedOptionIndex(e,t)}search(e,t,i){t!=null&&(i==="input"&&t.trim().length<this.minLength||(this.loading=!0,this.completeMethod.emit({originalEvent:e,query:t})))}removeOption(e,t){e.stopPropagation();let i=this.modelValue()[t],o=this.modelValue().filter((c,_)=>_!==t).map(c=>this.getOptionValue(c));this.updateModel(o),this.onUnselect.emit({originalEvent:e,value:i}),M.focus(this.inputEL.nativeElement)}updateModel(e){this.value=e,this.modelValue.set(e),this.onModelChange(e),this.updateInputValue(),this.cd.markForCheck()}updateInputValue(){this.inputEL&&this.inputEL.nativeElement&&(this.multiple?this.inputEL.nativeElement.value="":this.inputEL.nativeElement.value=this.inputValue())}autoUpdateModel(){if((this.selectOnFocus||this.autoHighlight)&&this.autoOptionFocus&&!this.hasSelectedOption()){let e=this.findFirstFocusedOptionIndex();this.focusedOptionIndex.set(e),this.onOptionSelect(null,this.visibleOptions()[this.focusedOptionIndex()],!1)}}scrollInView(e=-1){let t=e!==-1?`${this.id}_${e}`:this.focusedOptionId;if(this.itemsViewChild&&this.itemsViewChild.nativeElement){let i=M.findSingle(this.itemsViewChild.nativeElement,`li[id="${t}"]`);i?i.scrollIntoView&&i.scrollIntoView({block:"nearest",inline:"nearest"}):this.virtualScrollerDisabled||setTimeout(()=>{this.virtualScroll&&this.scroller?.scrollToIndex(e!==-1?e:this.focusedOptionIndex())},0)}}changeFocusedOptionIndex(e,t){this.focusedOptionIndex()!==t&&(this.focusedOptionIndex.set(t),this.scrollInView(),this.selectOnFocus&&this.onOptionSelect(e,this.visibleOptions()[t],!1))}show(e=!1){this.dirty=!0,this.overlayVisible=!0;let t=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(t),e&&M.focus(this.inputEL.nativeElement),e&&M.focus(this.inputEL.nativeElement),this.onShow.emit(),this.cd.markForCheck()}hide(e=!1){let t=()=>{this.dirty=e,this.overlayVisible=!1,this.focusedOptionIndex.set(-1),e&&M.focus(this.inputEL.nativeElement),this.onHide.emit(),this.cd.markForCheck()};this.virtualScroll&&this.scroller.onScrollChange(event),setTimeout(()=>{t()},0)}clear(){this.updateModel(null),this.inputEL.nativeElement.value="",this.onClear.emit()}writeValue(e){this.value=e,this.modelValue.set(e),this.updateInputValue(),this.cd.markForCheck()}hasSelectedOption(){return x.isNotEmpty(this.modelValue())}getAriaPosInset(e){return(this.optionGroupLabel?e-this.visibleOptions().slice(0,e).filter(t=>this.isOptionGroup(t)).length:e)+1}getOptionLabel(e){return this.field||this.optionLabel?x.resolveFieldData(e,this.field||this.optionLabel):e&&e.label!=null?e.label:e}getOptionValue(e){return this.optionValue?x.resolveFieldData(e,this.optionValue):e}getOptionIndex(e,t){return this.virtualScrollerDisabled?e:t&&t.getItemOptions(e).index}getOptionGroupLabel(e){return this.optionGroupLabel?x.resolveFieldData(e,this.optionGroupLabel):e&&e.label!=null?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?x.resolveFieldData(e,this.optionGroupChildren):e.items}getSelectedOption(e){return this.optionValue?(this.suggestions||[]).find(t=>x.resolveFieldData(t,this.optionValue)===e):e}getMultipleLabel(e){let t=this.getSelectedOption(e);return this.getOptionLabel(t)}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOverlayAnimationStart(e){if(e.toState==="visible"&&(this.itemsWrapper=M.findSingle(this.overlayViewChild.overlayViewChild?.nativeElement,this.virtualScroll?".p-scroller":".p-autocomplete-panel"),this.virtualScroll&&(this.scroller?.setContentEl(this.itemsViewChild?.nativeElement),this.scroller.viewInit()),this.visibleOptions()&&this.visibleOptions().length))if(this.virtualScroll){let t=this.modelValue()?this.focusedOptionIndex():-1;t!==-1&&this.scroller?.scrollToIndex(t)}else{let t=M.findSingle(this.itemsWrapper,".p-autocomplete-item.p-highlight");t&&t.scrollIntoView({block:"nearest",inline:"center"})}}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}static \u0275fac=function(t){return new(t||n)(I(Ae),I(xe),I(Ie),I(Ee),I(Ze),I(We),I(ve))};static \u0275cmp=N({type:n,selectors:[["p-autoComplete"]],contentQueries:function(t,i,o){if(t&1&&Se(o,ee,4),t&2){let c;w(c=O())&&(i.templates=c)}},viewQuery:function(t,i){if(t&1&&(T(Kt,5),T(Rt,5),T(qt,5),T(Ht,5),T(jt,5),T(Qt,5),T(Gt,5),T($t,5)),t&2){let o;w(o=O())&&(i.containerEL=o.first),w(o=O())&&(i.inputEL=o.first),w(o=O())&&(i.multiInputEl=o.first),w(o=O())&&(i.multiContainerEL=o.first),w(o=O())&&(i.dropdownButton=o.first),w(o=O())&&(i.itemsViewChild=o.first),w(o=O())&&(i.scroller=o.first),w(o=O())&&(i.overlayViewChild=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(t,i){t&2&&we("p-inputwrapper-filled",i.filled)("p-inputwrapper-focus",i.focused&&!i.disabled||i.autofocus||i.overlayVisible)("p-autocomplete-clearable",i.showClear&&!i.disabled)},inputs:{minLength:[2,"minLength","minLength",L],delay:[2,"delay","delay",L],style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",inputStyle:"inputStyle",inputId:"inputId",inputStyleClass:"inputStyleClass",placeholder:"placeholder",readonly:[2,"readonly","readonly",f],disabled:[2,"disabled","disabled",f],scrollHeight:"scrollHeight",lazy:[2,"lazy","lazy",f],virtualScroll:[2,"virtualScroll","virtualScroll",f],virtualScrollItemSize:[2,"virtualScrollItemSize","virtualScrollItemSize",L],virtualScrollOptions:"virtualScrollOptions",maxlength:[2,"maxlength","maxlength",e=>L(e,null)],name:"name",required:[2,"required","required",f],size:[2,"size","size",L],appendTo:"appendTo",autoHighlight:[2,"autoHighlight","autoHighlight",f],forceSelection:[2,"forceSelection","forceSelection",f],type:"type",autoZIndex:[2,"autoZIndex","autoZIndex",f],baseZIndex:[2,"baseZIndex","baseZIndex",L],ariaLabel:"ariaLabel",dropdownAriaLabel:"dropdownAriaLabel",ariaLabelledBy:"ariaLabelledBy",dropdownIcon:"dropdownIcon",unique:[2,"unique","unique",f],group:[2,"group","group",f],completeOnFocus:[2,"completeOnFocus","completeOnFocus",f],showClear:[2,"showClear","showClear",f],field:"field",dropdown:[2,"dropdown","dropdown",f],showEmptyMessage:[2,"showEmptyMessage","showEmptyMessage",f],dropdownMode:"dropdownMode",multiple:[2,"multiple","multiple",f],tabindex:[2,"tabindex","tabindex",L],dataKey:"dataKey",emptyMessage:"emptyMessage",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autofocus:[2,"autofocus","autofocus",f],autocomplete:"autocomplete",optionGroupChildren:"optionGroupChildren",optionGroupLabel:"optionGroupLabel",overlayOptions:"overlayOptions",suggestions:"suggestions",itemSize:"itemSize",optionLabel:"optionLabel",optionValue:"optionValue",id:"id",searchMessage:"searchMessage",emptySelectionMessage:"emptySelectionMessage",selectionMessage:"selectionMessage",autoOptionFocus:[2,"autoOptionFocus","autoOptionFocus",f],selectOnFocus:[2,"selectOnFocus","selectOnFocus",f],searchLocale:[2,"searchLocale","searchLocale",f],optionDisabled:"optionDisabled",focusOnHover:[2,"focusOnHover","focusOnHover",f],variant:"variant"},outputs:{completeMethod:"completeMethod",onSelect:"onSelect",onUnselect:"onUnselect",onFocus:"onFocus",onBlur:"onBlur",onDropdownClick:"onDropdownClick",onClear:"onClear",onKeyUp:"onKeyUp",onShow:"onShow",onHide:"onHide",onLazyLoad:"onLazyLoad"},features:[Te([Qi]),be],decls:18,vars:24,consts:[["container",""],["overlay",""],["buildInItems",""],["focusInput",""],["multiContainer",""],["token",""],["ddBtn",""],["scroller",""],["items",""],["empty",""],[3,"click","ngClass","ngStyle"],["pAutoFocus","","aria-autocomplete","list","role","combobox",3,"autofocus","ngClass","ngStyle","class","type","autocomplete","required","name","tabindex","readonly","disabled","input","keydown","change","focus","blur","paste","keyup",4,"ngIf"],[4,"ngIf"],["role","listbox",3,"ngClass","tabindex","focus","blur","keydown",4,"ngIf"],["type","button","pButton","","class","p-autocomplete-dropdown p-button-icon-only","pRipple","",3,"disabled","click",4,"ngIf"],[3,"visibleChange","onAnimationStart","onHide","visible","options","target","appendTo","showTransitionOptions","hideTransitionOptions"],[3,"ngClass","ngStyle"],[4,"ngTemplateOutlet"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["role","status","aria-live","polite",1,"p-hidden-accessible"],["pAutoFocus","","aria-autocomplete","list","role","combobox",3,"input","keydown","change","focus","blur","paste","keyup","autofocus","ngClass","ngStyle","type","autocomplete","required","name","tabindex","readonly","disabled"],[3,"styleClass","click",4,"ngIf"],["class","p-autocomplete-clear-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-autocomplete-clear-icon",3,"click"],["role","listbox",3,"focus","blur","keydown","ngClass","tabindex"],["role","option",3,"ngClass",4,"ngFor","ngForOf"],["role","option",1,"p-autocomplete-input-token"],["pAutoFocus","","role","combobox","aria-autocomplete","list",3,"input","keydown","change","focus","blur","paste","keyup","autofocus","ngClass","ngStyle","autocomplete","required","tabindex","readonly","disabled"],["role","option",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-autocomplete-token-label",4,"ngIf"],[1,"p-autocomplete-token-icon",3,"click"],[3,"styleClass",4,"ngIf"],["class","p-autocomplete-token-icon",4,"ngIf"],[1,"p-autocomplete-token-label"],[3,"styleClass"],[1,"p-autocomplete-token-icon"],[3,"styleClass","spin",4,"ngIf"],["class","p-autocomplete-loader pi-spin ",4,"ngIf"],[3,"styleClass","spin"],[1,"p-autocomplete-loader","pi-spin"],["type","button","pButton","","pRipple","",1,"p-autocomplete-dropdown","p-button-icon-only",3,"click","disabled"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"onLazyLoad","items","itemSize","autoSize","lazy","options"],["pTemplate","content"],["pTemplate","loader"],["role","listbox",1,"p-autocomplete-items",3,"ngClass"],["ngFor","",3,"ngForOf"],["class","p-autocomplete-empty-message","role","option",3,"ngStyle",4,"ngIf"],["role","option",1,"p-autocomplete-item-group",3,"ngStyle"],["pRipple","","role","option",1,"p-autocomplete-item",3,"click","mouseenter","ngStyle","ngClass"],["role","option",1,"p-autocomplete-empty-message",3,"ngStyle"],[4,"ngIf","ngIfElse"]],template:function(t,i){if(t&1){let o=b();p(0,"div",10,0),C("click",function(_){return d(o),m(i.onContainerClick(_))}),h(2,ei,2,23,"input",11)(3,li,3,2,"ng-container",12)(4,mi,6,27,"ul",13)(5,Ci,3,2,"ng-container",12)(6,wi,4,5,"button",14),p(7,"p-overlay",15,1),P("visibleChange",function(_){return d(o),z(i.overlayVisible,_)||(i.overlayVisible=_),m(_)}),C("onAnimationStart",function(_){return d(o),m(i.onOverlayAnimationStart(_))})("onHide",function(){return d(o),m(i.hide())}),p(9,"div",16),h(10,Oi,1,0,"ng-container",17)(11,ki,4,10,"p-scroller",18)(12,Li,2,6,"ng-container",12)(13,Hi,4,7,"ng-template",null,2,Me)(15,ji,1,0,"ng-container",17),u(),p(16,"span",19),g(17),u()()()}t&2&&(j(i.styleClass),l("ngClass",i.containerClass)("ngStyle",i.style),a(2),l("ngIf",!i.multiple),a(),l("ngIf",i.isVisibleClearIcon),a(),l("ngIf",i.multiple),a(),l("ngIf",i.loading),a(),l("ngIf",i.dropdown),a(),U("visible",i.overlayVisible),l("options",i.overlayOptions)("target","@parent")("appendTo",i.appendTo)("showTransitionOptions",i.showTransitionOptions)("hideTransitionOptions",i.hideTransitionOptions),a(2),j(i.panelStyleClass),l("ngClass",i.panelClass)("ngStyle",i.panelStyles),a(),l("ngTemplateOutlet",i.headerTemplate),a(),l("ngIf",i.virtualScroll),a(),l("ngIf",!i.virtualScroll),a(3),l("ngTemplateOutlet",i.footerTemplate),a(2),D(" ",i.selectedMessageText," "))},dependencies:()=>[Z,J,X,Fe,Le,Ye,ee,lt,et,it,Xe,he,ce,de,me],styles:[`@layer primeng{.p-autocomplete{display:inline-flex;position:relative}.p-autocomplete-loader{position:absolute;top:50%;margin-top:-.5rem}.p-autocomplete-dd .p-autocomplete-input{flex:1 1 auto;width:1%}.p-autocomplete-dd .p-autocomplete-input,.p-autocomplete-dd .p-autocomplete-multiple-container{border-top-right-radius:0;border-bottom-right-radius:0}.p-autocomplete-dd .p-autocomplete-dropdown{border-top-left-radius:0;border-bottom-left-radius:0}.p-autocomplete-panel{overflow:auto}.p-autocomplete-items{margin:0;padding:0;list-style-type:none}.p-autocomplete-item{cursor:pointer;white-space:nowrap;position:relative;overflow:hidden}.p-autocomplete-multiple-container{margin:0;padding:0;list-style-type:none;cursor:text;overflow:hidden;display:flex;align-items:center;flex-wrap:wrap}.p-autocomplete-token{width:fit-content;cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-autocomplete-token-icon{display:flex;cursor:pointer}.p-autocomplete-input-token{flex:1 1 auto;display:inline-flex}.p-autocomplete-input-token input{border:0 none;outline:0 none;background-color:transparent;margin:0;padding:0;box-shadow:none;border-radius:0;width:100%}.p-fluid .p-autocomplete{display:flex}.p-fluid .p-autocomplete-dd .p-autocomplete-input{width:1%}.p-autocomplete-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-autocomplete-clearable{position:relative}}
`],encapsulation:2,changeDetection:0})}return n})(),Lt=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=K({type:n});static \u0275inj=B({imports:[Y,pe,te,st,ae,tt,ue,re,he,ce,de,me,pe,ae,ue,re]})}return n})();var Ft=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=N({type:n,selectors:[["app-chat"]],decls:1,vars:0,template:function(t,i){t&1&&v(0,"router-outlet")},dependencies:[ze]})}}return n})();var Dt=(()=>{class n{constructor(e){this.http=e,this.baseUrl=`${Pe}/api/conversation`}createNewConversation(e){return this.http.post(`${this.baseUrl}/create`,e)}getAllConversationsByUser(){return this.http.get(`${this.baseUrl}/get-all-by-user`)}getDataOfConversation(e){return this.http.get(`${this.baseUrl}/get-data-of-conversation/${e}`)}static{this.\u0275fac=function(t){return new(t||n)(ye(Ue))}}static{this.\u0275prov=Ce({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Wi=["messageInput"],Zi=["chatScroll"],Ji=()=>({width:"25rem"}),Xi=n=>({active:n}),Yi=(n,s)=>({sent:n,received:s}),en=n=>({row:n});function tn(n,s){if(n&1){let e=b();p(0,"a",38),C("click",function(){d(e);let i=r();return m(i.openCreateNewChatDialog())}),p(1,"i",39),g(2,"control_point"),u()()}}function nn(n,s){n&1&&(p(0,"div",25),v(1,"mat-spinner",40),u())}function on(n,s){if(n&1){let e=b();p(0,"a",42),C("click",function(){let i=d(e).$implicit,o=r(2);return m(o.selectConversation(i))}),p(1,"div",43)(2,"div",18),v(3,"img",19),u()(),p(4,"div",44)(5,"div")(6,"div",45),g(7),u(),p(8,"div",46),g(9),u()(),p(10,"div",47)(11,"mat-icon",48),g(12," more_vert "),u()()()()}if(n&2){let e=s.$implicit,t=r(2);l("ngClass",V(4,Xi,t.selectedConversation===e)),a(3),l("src",t.currentUser.role.roleName=="PATIENT"?e.doctor.avatarFilePath:e.patient.avatarFilePath,$),a(4),D(" ",t.currentUser.role.roleName=="PATIENT"?"Dr. "+e.doctor.fullName:e.patient.fullName," "),a(2),D(" ",t.currentUser.role.roleName=="PATIENT"?"Dr. "+e.doctor.fullName:e.patient.fullName," ")}}function ln(n,s){if(n&1&&(p(0,"div",22),h(1,on,13,6,"a",41),u()),n&2){let e=r();a(),l("ngForOf",e.conversations)}}function sn(n,s){if(n&1&&(p(0,"div",55)(1,"div",56)(2,"div",57),oe(3,"date"),p(4,"p"),g(5),u()()()()),n&2){let e=r().$implicit;a(2),l("matTooltip",le(3,2,e.timeStamp,"medium")),a(3),F(e.message)}}function an(n,s){if(n&1&&v(0,"img",63),n&2){let e=r(4);l("src",(e.currentUser==null?null:e.currentUser.email)===(e.selectedConversation==null||e.selectedConversation.patient==null?null:e.selectedConversation.patient.email)?e.selectedConversation==null||e.selectedConversation.doctor==null?null:e.selectedConversation.doctor.avatarFilePath:e.selectedConversation==null||e.selectedConversation.patient==null?null:e.selectedConversation.patient.avatarFilePath,$)}}function rn(n,s){if(n&1&&(p(0,"div",58)(1,"div",59),h(2,an,1,1,"img",60),u(),p(3,"div",61)(4,"div",56)(5,"div",62),oe(6,"date"),p(7,"p"),g(8),u()()()()()),n&2){let e=r(),t=e.$implicit,i=e.index,o=r(2);l("ngClass",V(7,en,!o.isSentByCurrentUser(t))),a(2),l("ngIf",o.shouldShowAvatar(i)),a(3),l("matTooltip",le(6,4,t.timeStamp,"medium")),a(3),F(t.message)}}function pn(n,s){if(n&1&&(p(0,"li",52),h(1,sn,6,5,"div",53)(2,rn,9,9,"div",54),u()),n&2){let e=s.$implicit,t=r(2);l("ngClass",R(3,Yi,t.isSentByCurrentUser(e),!t.isSentByCurrentUser(e))),a(),l("ngIf",t.isSentByCurrentUser(e)),a(),l("ngIf",!t.isSentByCurrentUser(e))}}function cn(n,s){n&1&&(p(0,"li",64)(1,"div",55)(2,"div",56)(3,"div")(4,"div",65),v(5,"span")(6,"span")(7,"span"),u()()()()())}function un(n,s){if(n&1&&(p(0,"ul",49),h(1,pn,3,6,"li",50)(2,cn,8,0,"li",51),u()),n&2){let e=r();a(),l("ngForOf",e.selectedConversationData),a(),l("ngIf",e.isSending)}}function dn(n,s){n&1&&(p(0,"mat-icon"),g(1,"send"),u())}function mn(n,s){n&1&&(p(0,"mat-icon"),v(1,"mat-spinner",36),u())}function hn(n,s){n&1&&g(0," Create ")}function _n(n,s){n&1&&v(0,"mat-spinner",36)}var Ut=(()=>{class n{constructor(e,t,i,o,c){this.webSocketService=e,this.doctorService=t,this.conversationService=i,this.store=o,this.messageService=c,this.message="",this.isSending=!1,this.visible=!1,this.isLoading=!1,this.isFetchedDoctors=!1,this.isLoadingConversations=!1,this.isLoadingDataConversation=!1,this.isTyping=!1,this.isFirstVisit=!0,this.unsubscribe$=new fe}ngOnInit(){this.webSocketInit(),this.handleObservable()}ngOnDestroy(){}handleObservable(){this.store.select(mt).subscribe(e=>{this.currentUser=e})}createNewConversation(){this.isLoading=!0;let e=this.currentUser.role.roleName==="PATIENT",t={doctorEmail:e?this.doctor.email:this.currentUser.email,patientEmail:e?this.currentUser.email:this.doctor.email};this.conversationService.createNewConversation(t).subscribe({next:i=>{this.messageService.add({severity:"success",summary:"Success",detail:"Create new Conversation successfully."}),this.getData(),this.visible=!1},error:i=>{this.messageService.add({severity:"error",summary:"Error",detail:"Create new Conversation fail."})}}),this.isLoading=!1}getData(){this.isLoadingConversations=!0,this.conversationService.getAllConversationsByUser().subscribe({next:e=>{this.conversations=e,this.selectConversation(this.conversations[0]),this.isLoadingConversations=!1},error:e=>{console.log(e),this.isLoadingConversations=!1}})}webSocketInit(){this.getData()}sendMessage(){try{this.isSending=!0;let e={message:this.message,doctorEmail:this.currentUser.role.roleName=="DOCTOR"?this.currentUser.email:this.selectedConversation.doctor.email,patientEmail:this.currentUser.role.roleName=="PATIENT"?this.currentUser.email:this.selectedConversation.patient.email,conversationId:this.selectedConversation.id,sender:this.currentUser.role.roleName};this.webSocketService.emit(`/app/chat/${this.selectedConversation.id}`,e),setTimeout(()=>{this.messageInput.nativeElement.value="",this.isSending=!1},500)}catch(e){console.log(e),this.isSending=!1}}selectConversation(e){this.selectedConversation=e,this.getConversationData(),this.chatSubscription=this.webSocketService.on(`/user/chat/conversation/${this.selectedConversation.id}`).subscribe(t=>{setTimeout(()=>{this.selectedConversationData.push(t),this.scrollToBottom()},2e3)})}getConversationData(){this.isLoadingDataConversation=!0,this.conversationService.getDataOfConversation(this.selectedConversation.id).subscribe({next:e=>{this.selectedConversationData=e,this.isLoadingDataConversation=!1},error:e=>{console.log(e),this.isLoadingDataConversation=!1}})}isSentByCurrentUser(e){return e.sender===this.currentUser.role.roleName}shouldShowAvatar(e){if(e===0)return!0;let t=this.selectedConversationData[e],i=this.selectedConversationData[e-1];return t.sender!=i.sender}openCreateNewChatDialog(){this.isFetchedDoctors||this.doctorService.getAllDoctorsHaveBookedByPatient().subscribe({next:e=>{this.doctors=e,this.isFetchedDoctors=!0},error:e=>console.log(e)}),this.visible=!0}ngAfterViewChecked(){this.scrollToBottom()}scrollToBottom(){try{this.chatScroll.nativeElement.scrollTop=this.chatScroll.nativeElement.scrollHeight}catch(e){console.error("Error scrolling to bottom:",e)}}static{this.\u0275fac=function(t){return new(t||n)(I(bt),I(Ne),I(Dt),I(Be),I($e))}}static{this.\u0275cmp=N({type:n,selectors:[["app-chat-index"]],viewQuery:function(t,i){if(t&1&&(T(Wi,5),T(Zi,5)),t&2){let o;w(o=O())&&(i.messageInput=o.first),w(o=O())&&(i.chatScroll=o.first)}},decls:47,vars:23,consts:[["chatScroll",""],["messageInput",""],[1,"col-xl-12"],[1,"card","m-1","pb-2"],[1,"chat-window","pb-1"],[1,"chat-cont-left"],[1,"chat-header"],["class","chat-compose",3,"click",4,"ngIf"],[1,"chat-search"],[1,"input-group"],["type","text","pInputText","","placeholder","Search",1,"full-width",2,"border-radius","50px",3,"ngModelChange","ngModel"],[1,"chat-users-list"],["class","d-flex justify-content-between align-items-center",4,"ngIf"],["class","chat-scroll",4,"ngIf"],[1,"chat-cont-right"],[1,"chat-header","d-flex","justify-content-between"],[1,"media"],[1,"media-img-wrap"],[1,"avatar"],[1,"avatar-img","rounded-circle",3,"src"],[1,"user-name","ps-2"],[1,"chat-body"],[1,"chat-scroll"],["class","list-unstyled",4,"ngIf"],[1,"chat-footer"],[1,"d-flex","justify-content-between","align-items-center"],["rows","1","cols","30","pInputTextarea","","placeholder","Type something",1,"full-width",3,"ngModelChange","keyup.enter","ngModel","autoResize","disabled"],["mat-mini-fab","","color","success","type","button",1,"ms-3",3,"click"],[4,"ngIf"],["header","Start New Chat",3,"visibleChange","modal","visible"],[1,"d-flex","align-items-center","justify-content-between","mb-5"],[1,"font-semibold","w-6rem"],["optionLabel","fullName","placeholder","Select Doctor",3,"ngModelChange","options","ngModel"],[1,"d-flex","justify-content-between","gap-2"],["mat-raised-button","",3,"click","disabled"],["mat-flat-button","",3,"click","disabled"],["diameter","20"],["position","bottom-left",3,"life"],[1,"chat-compose",3,"click"],[1,"material-icons"],["diameter","40"],["class","media row d-flex justify-content-between",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"media","row","d-flex","justify-content-between",3,"click","ngClass"],[1,"media-img-wrap","col-xl-2","col-lg-2","col-md-3","col-sm-2","col-2","p-0"],[1,"media-body","user-name-chat-left","col-xl-10","col-lg-10","col-md-9","col-sm-10","col-10","p-0"],[1,"user-name"],[1,"user-last-chat"],[1,"d-flex","align-items-center"],[1,"more-icon"],[1,"list-unstyled"],["class","media",3,"ngClass",4,"ngFor","ngForOf"],["class","media received",4,"ngIf"],[1,"media",3,"ngClass"],["class","media-body",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"media-body"],[1,"msg-box"],["matTooltipPosition","left",3,"matTooltip"],[3,"ngClass"],[1,"avatar","col-4"],["class","avatar-img rounded-circle","style","width: 30px !important",3,"src",4,"ngIf"],[1,"media-body","col-8"],["matTooltipPosition","right",3,"matTooltip"],[1,"avatar-img","rounded-circle",2,"width","30px !important",3,"src"],[1,"media","received"],[1,"msg-typing"]],template:function(t,i){if(t&1){let o=b();p(0,"div")(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"span"),g(7,"Chat"),u(),h(8,tn,3,0,"a",7),u(),p(9,"div",8)(10,"div",9)(11,"input",10),P("ngModelChange",function(_){return d(o),z(i.searchConv,_)||(i.searchConv=_),m(_)}),u()()(),p(12,"div",11),h(13,nn,2,0,"div",12)(14,ln,2,1,"div",13),u()(),p(15,"div",14)(16,"div",15)(17,"div",16)(18,"div",17)(19,"div",18),v(20,"img",19),u(),p(21,"div",20),g(22),u()()()(),p(23,"div",21)(24,"div",22,0),h(26,un,3,2,"ul",23),u()(),p(27,"div",24)(28,"div",25)(29,"textarea",26,1),P("ngModelChange",function(_){return d(o),z(i.message,_)||(i.message=_),m(_)}),C("keyup.enter",function(){return d(o),m(i.sendMessage())}),g(31,"            "),u(),p(32,"button",27),C("click",function(){return d(o),m(i.sendMessage())}),h(33,dn,2,0,"mat-icon",28)(34,mn,2,0,"mat-icon",28),u()()()()()()()(),p(35,"p-dialog",29),P("visibleChange",function(_){return d(o),z(i.visible,_)||(i.visible=_),m(_)}),p(36,"div",30)(37,"label",31),g(38,"Doctor"),u(),p(39,"p-dropdown",32),P("ngModelChange",function(_){return d(o),z(i.doctor,_)||(i.doctor=_),m(_)}),u()(),p(40,"div",33)(41,"button",34),C("click",function(){return d(o),m(i.visible=!i.visible)}),g(42," Cancel "),u(),p(43,"button",35),C("click",function(){return d(o),m(i.createNewConversation())}),h(44,hn,1,0)(45,_n,1,0,"mat-spinner",36),u()()(),v(46,"p-toast",37)}t&2&&(a(8),l("ngIf",i.currentUser.role.roleName==="PATIENT"),a(3),U("ngModel",i.searchConv),a(2),l("ngIf",i.isLoadingConversations),a(),l("ngIf",!i.isLoadingConversations),a(6),l("src",(i.currentUser==null?null:i.currentUser.email)===(i.selectedConversation==null||i.selectedConversation.patient==null?null:i.selectedConversation.patient.email)?i.selectedConversation==null||i.selectedConversation.doctor==null?null:i.selectedConversation.doctor.avatarFilePath:i.selectedConversation==null||i.selectedConversation.patient==null?null:i.selectedConversation.patient.avatarFilePath,$),a(2),D(" ",i.currentUser.email===(i.selectedConversation==null||i.selectedConversation.patient==null?null:i.selectedConversation.patient.email)?"Dr. "+(i.selectedConversation==null||i.selectedConversation.doctor==null?null:i.selectedConversation.doctor.fullName):i.selectedConversation==null||i.selectedConversation.patient==null?null:i.selectedConversation.patient.fullName," "),a(4),l("ngIf",i.selectedConversation),a(3),U("ngModel",i.message),l("autoResize",!0)("disabled",i.isSending),a(4),l("ngIf",!i.isSending),a(),l("ngIf",i.isSending),a(),H(W(22,Ji)),l("modal",!0),U("visible",i.visible),a(4),l("options",i.doctors),U("ngModel",i.doctor),a(2),l("disabled",i.isLoading),a(2),l("disabled",!i.doctor||i.isLoading),a(),Oe(i.isLoading?45:44),a(2),l("life",2e3))},dependencies:[Z,J,X,at,_t,Ct,yt,Re,qe,He,ut,rt,nt,xt,Ot,Tt,De],styles:[".user-name[_ngcontent-%COMP%]{font-weight:500!important}.media.received[_ngcontent-%COMP%] > .avatar[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:30px!important}.mat-success[_ngcontent-%COMP%]{background-color:#5cefc8}mat-icon[_ngcontent-%COMP%]{color:#fff}.chat-compose[_ngcontent-%COMP%]:hover{cursor:pointer}.more-icon[_ngcontent-%COMP%]{color:#838080}.more-icon[_ngcontent-%COMP%]:hover{color:#000}"]})}}return n})();var fn=[{path:"",component:Ft,children:[{path:"",component:Ut}]}],zt=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=K({type:n})}static{this.\u0275inj=B({imports:[Q.forChild(fn),Q]})}}return n})();var Ho=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=K({type:n})}static{this.\u0275inj=B({imports:[Y,zt,Q,te,Mt,Et,ft,vt,je,dt,pt,ht,wt,gt,Qe,ct,Lt,ot,It,St,Vt]})}}return n})();export{Ho as ChatModule};
