import{a as Z,c as gt,d as ft}from"./chunk-HLFSSFLO.js";import{a as Ue,g as He,h as ze,i as Je,j as Xe}from"./chunk-VWHAAH3S.js";import{a as rt,b as at,c as ot,d as lt,e as st,f as dt,g as mt,j as ct,k as pt,l as ut}from"./chunk-OE7Q57NZ.js";import{a as We,b as Le}from"./chunk-OANHVOJY.js";import{a as Ze,b as $e,c as et,d as tt}from"./chunk-EMDYK7GU.js";import{d as D,e as je,j as Q}from"./chunk-INHZXUYG.js";import{c as z,d as Y,e as Ye}from"./chunk-R5DRVBFP.js";import{a as it,b as nt}from"./chunk-VUELGBHH.js";import"./chunk-MVHRCX3U.js";import{m as Oe,n as qe}from"./chunk-6G6ZJK7H.js";import{c as Me,p as Re}from"./chunk-PREI7CCJ.js";import{R as Ge,W as Ke,Z as Qe}from"./chunk-7CWJXPPP.js";import"./chunk-IIWQCPW7.js";import{$ as ce,$a as m,$c as ye,A as me,Ga as te,Gb as r,Gc as Se,Hb as R,Hc as _e,Ia as l,Ib as v,Ic as be,Ja as u,Jb as q,Jc as P,Kb as S,Kc as H,Lb as _,Lc as we,Mb as b,Mc as ne,Nc as Ce,Pb as F,Pc as J,Rc as W,Ub as ie,Uc as A,Vc as k,Xa as w,Xb as T,Xc as X,Yb as G,Zb as U,Zc as K,_c as V,a as le,aa as L,bd as Pe,ca as pe,cb as O,cd as xe,dd as Ee,ed as Ne,fd as Ie,gd as De,ha as y,ia as j,id as Fe,jb as t,k as se,kb as i,kd as Te,lb as c,ld as Ae,md as ke,nc as ue,oa as g,oc as ge,pa as f,pb as x,pc as N,qd as Ve,r as de,sb as C,sd as I,ub as M,uc as fe,wc as he,xd as Be,yc as ve}from"./chunk-UHTXMJPS.js";function Et(o,h){o&1&&(t(0,"small",14),r(1," Password must be at least 8 characters and contain at least one number. "),i())}function Nt(o,h){o&1&&(t(0,"h6"),r(1,"Pick a password"),i())}function It(o,h){o&1&&(c(0,"p-divider"),t(1,"p",15),r(2,"Suggestions"),i(),t(3,"ul",16)(4,"li"),r(5,"At least one numeric"),i(),t(6,"li"),r(7,"Minimum 8 characters"),i()())}function Dt(o,h){o&1&&(t(0,"small",14),r(1," Password must be at least 8 characters and contain at least one number. "),i())}function Ft(o,h){o&1&&(t(0,"small",14),r(1," Passwords do not match. "),i())}var vt=(()=>{class o{constructor(e,a,n,s){this.fb=e,this.authService=a,this.messageService=n,this.router=s,this.showPass=!1,this.showConfirmPass=!1,this.formChangePassword=this.fb.group({oldPassword:["",[W.required,W.minLength(8)]],newPassword:["",[W.required,this.passwordValidator]],confirmNewPassword:["",[W.required]]},{validators:this.passwordsMatchValidator})}passwordValidator(e){let a=e.value;if(!a)return null;let n=/\d/.test(a),s=a.length>=8;return!n||!s?{passwordInvalid:!0}:null}passwordsMatchValidator(e){let a=e.get("newPassword")?.value,n=e.get("confirmNewPassword")?.value;return a===n?null:{passwordsMismatch:!0}}showPassword(){this.showPass=!this.showPass}showConfirmPassword(){this.showConfirmPass=!this.showConfirmPass}onSubmit(){if(this.formChangePassword.invalid){this.messageService.add({key:"messageToast",severity:"warn",summary:"Validation Error",detail:"Please fill out all fields correctly."});return}let{oldPassword:e,newPassword:a,confirmNewPassword:n}=this.formChangePassword.value,s=localStorage.getItem("token");if(!s){this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:"Authentication token is missing!"});return}this.authService.resetPassword(s,e,a,n).subscribe(d=>{d.statusCode===200?(this.messageService.add({key:"messageToast",severity:"success",summary:"Success",detail:"Change password successfully"}),this.formChangePassword.reset(),setTimeout(()=>{this.router.navigate(["/nurse/dashboard"])},1e3)):this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:d.message})},d=>{this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:d.message})})}static{this.\u0275fac=function(a){return new(a||o)(u(Te),u(z),u(I),u(P))}}static{this.\u0275cmp=y({type:o,selectors:[["app-nurse-change-password"]],decls:32,vars:8,consts:[[1,"card"],[1,"card-body"],[1,"row"],[1,"col-md-12","col-lg-6"],[3,"ngSubmit","formGroup"],[1,"form-group"],["formControlName","oldPassword",3,"toggleMask"],["class","text-danger",4,"ngIf"],["formControlName","newPassword",3,"toggleMask"],["pTemplate","header"],["pTemplate","footer"],["formControlName","confirmNewPassword",3,"toggleMask"],[1,"submit-section"],["type","submit",1,"btn","btn-primary","submit-btn",3,"disabled"],[1,"text-danger"],[1,"mt-2"],[1,"pl-2","ml-2","mt-0",2,"line-height","1.5"]],template:function(a,n){if(a&1&&(t(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"form",4),C("ngSubmit",function(){return n.onSubmit()}),t(6,"div",5)(7,"label"),r(8,"Old Password"),i(),c(9,"br")(10,"p-password",6)(11,"br"),w(12,Et,2,0,"small",7),i(),t(13,"div",5)(14,"label"),r(15,"New Password"),i(),c(16,"br"),t(17,"p-password",8),w(18,Nt,2,0,"ng-template",9)(19,It,8,0,"ng-template",10),i(),c(20,"br"),w(21,Dt,2,0,"small",7),i(),t(22,"div",5)(23,"label"),r(24,"Confirm Password"),i(),c(25,"br")(26,"p-password",11)(27,"br"),w(28,Ft,2,0,"small",7),i(),t(29,"div",12)(30,"button",13),r(31," Save Changes "),i()()()()()()()()),a&2){let s,d,p;l(5),m("formGroup",n.formChangePassword),l(5),m("toggleMask",!0),l(2),m("ngIf",((s=n.formChangePassword.get("oldPassword"))==null?null:s.invalid)&&((s=n.formChangePassword.get("oldPassword"))==null?null:s.touched)),l(5),m("toggleMask",!0),l(4),m("ngIf",((d=n.formChangePassword.get("newPassword"))==null?null:d.invalid)&&((d=n.formChangePassword.get("newPassword"))==null?null:d.touched)),l(5),m("toggleMask",!0),l(2),m("ngIf",n.formChangePassword.hasError("passwordsMismatch")&&((p=n.formChangePassword.get("confirmNewPassword"))==null?null:p.touched)),l(2),m("disabled",n.formChangePassword.invalid)}},dependencies:[N,V,A,k,Pe,xe,Be,st,Ze]})}}return o})();var At=()=>[10,20,30],kt=()=>({width:"30rem"}),Vt=()=>({width:"45rem"}),St=(o,h,e,a,n)=>({"bg-primary-light":o,"bg-info-light":h,"bg-success-light":e,"bg-warning-light":a,"bg-danger-light":n}),Bt=()=>({width:"100%",height:"100%"});function Wt(o,h){if(o&1){let e=x();t(0,"a",30),C("click",function(){g(e);let n=M().$implicit,s=M(2);return f(s.openForm(n))}),c(1,"i",27),r(2," Add Medical Record "),i()}}function Lt(o,h){if(o&1){let e=x();t(0,"a",31),C("click",function(){g(e);let n=M().$implicit,s=M(2);return f(s.viewMedicalRecordDetails(n))}),c(1,"i",27),r(2," View Medical Record "),i()}}function jt(o,h){if(o&1){let e=x();t(0,"tr")(1,"td")(2,"h2",19)(3,"a",20),c(4,"img",21),i(),t(5,"a"),r(6),t(7,"span"),r(8),i()()()(),t(9,"td"),r(10),T(11,"date"),t(12,"span",22),r(13),i()(),t(14,"td")(15,"h2",19)(16,"a",20),c(17,"img",21),i(),t(18,"a"),r(19),i()()(),t(20,"td")(21,"span",23),r(22),i()(),t(23,"td",24)(24,"div",25)(25,"a",26),C("click",function(){let n=g(e).$implicit,s=M(2);return f(s.viewAppointmentDetails(n))}),c(26,"i",27),r(27," View "),i(),w(28,Wt,3,0,"a",28)(29,Lt,3,0,"a",29),i()()()}if(o&2){let e=h.$implicit;l(4),m("src",(e.patientResponse==null?null:e.patientResponse.avatarFilePath)||"../../../../../../../assets/images/user.png",te),l(2),v("",e==null?null:e.fullName," "),l(2),v("Patient ID: ",e.patientResponse==null?null:e.patientResponse.id,""),l(2),v(" ",U(11,11,e.dateBooking,"dd MMM yyyy")," "),l(3),v(" ",e.bookingHour," "),l(4),m("src",e.doctor==null?null:e.doctor.avatarFilePath,te),l(2),v("Dr. ",e.doctor==null?null:e.doctor.fullName," "),l(2),m("ngClass",ie(14,St,e.appointmentStatus==="ACCEPT",e.appointmentStatus==="RESCHEDULED",e.appointmentStatus==="COMPLETED",e.appointmentStatus==="PENDING",e.appointmentStatus==="CANCELLED")),l(),v(" ",e.appointmentStatus," "),l(6),m("ngIf",!e.medicalRecordResponse&&(e.appointmentStatus==="ACCEPT"||e.appointmentStatus==="RESCHEDULED"||e.appointmentStatus==="COMPLETED")),l(),m("ngIf",e.medicalRecordResponse)}}function Ot(o,h){if(o&1){let e=x();t(0,"div",0)(1,"div",32)(2,"p"),r(3,"Doctor:"),i(),t(4,"p"),r(5),i()(),t(6,"div",32)(7,"p"),r(8,"Patient Name:"),i(),t(9,"p"),r(10),i()(),t(11,"div",32)(12,"p"),r(13,"Phone:"),i(),t(14,"p"),r(15),i()(),t(16,"div",32)(17,"p"),r(18,"Email:"),i(),t(19,"p"),r(20),i()(),t(21,"div",32)(22,"p"),r(23,"Date Booking:"),i(),t(24,"p"),r(25),T(26,"date"),i()(),t(27,"div",32)(28,"p"),r(29,"Booking Hour:"),i(),t(30,"p"),r(31),i()(),t(32,"div",32)(33,"p"),r(34,"Status:"),i(),t(35,"p")(36,"span",23),r(37),i()()(),t(38,"div",33)(39,"p",34),r(40,"Reason:"),i(),t(41,"div",35)(42,"p-scrollPanel",36),r(43),i()()(),t(44,"div",37)(45,"button",38),C("click",function(){g(e);let n=M(2);return f(n.visible=!n.visible)}),r(46,"Close"),i()()()}if(o&2){let e=M(2);l(5),q("Dr. ",e.selectedAppointment==null||e.selectedAppointment.doctor==null?null:e.selectedAppointment.doctor.firstName," ",e.selectedAppointment==null||e.selectedAppointment.doctor==null?null:e.selectedAppointment.doctor.lastName,""),l(5),R(e.selectedAppointment==null?null:e.selectedAppointment.fullName),l(5),R(e.selectedAppointment==null?null:e.selectedAppointment.phone),l(5),R(e.selectedAppointment==null?null:e.selectedAppointment.email),l(5),R(G(26,12,e.selectedAppointment==null?null:e.selectedAppointment.dateBooking)),l(6),R(e.selectedAppointment==null?null:e.selectedAppointment.bookingHour),l(5),m("ngClass",ie(14,St,e.selectedAppointment.appointmentStatus==="ACCEPT",e.selectedAppointment.appointmentStatus==="RESCHEDULED",e.selectedAppointment.appointmentStatus==="COMPLETED",e.selectedAppointment.appointmentStatus==="PENDING",e.selectedAppointment.appointmentStatus==="CANCELLED")),l(),v(" ",e.selectedAppointment==null?null:e.selectedAppointment.appointmentStatus," "),l(5),O(F(20,Bt)),l(),v(" ",e.selectedAppointment==null?null:e.selectedAppointment.reason," ")}}function qt(o,h){o&1&&(t(0,"p"),r(1,"None"),i())}function Gt(o,h){if(o&1&&(t(0,"div"),c(1,"p-image",41),i()),o&2){let e=M(3);l(),m("src",e.selectedMedicalRecord==null||e.selectedMedicalRecord.medicalRecordResponse==null?null:e.selectedMedicalRecord.medicalRecordResponse.filePath)("preview",!0)}}function Ut(o,h){if(o&1){let e=x();t(0,"div",0)(1,"div",32)(2,"p"),r(3,"Doctor:"),i(),t(4,"p"),r(5),i()(),t(6,"div",32)(7,"p"),r(8,"Created Date:"),i(),t(9,"p"),r(10),T(11,"date"),i()(),t(12,"div",32)(13,"p"),r(14,"Last Modified:"),i(),t(15,"p"),r(16),T(17,"date"),i()(),t(18,"div",32)(19,"p"),r(20,"Blood Group:"),i(),t(21,"p"),r(22),i()(),t(23,"div",32)(24,"p"),r(25,"Heart Rate:"),i(),t(26,"p"),r(27),c(28,"i",39),i()(),t(29,"div",32)(30,"p"),r(31,"Temperature:"),i(),t(32,"p"),r(33),i()(),t(34,"div",32)(35,"p"),r(36,"Description:"),i(),t(37,"p"),r(38),i()(),t(39,"div",32)(40,"p"),r(41,"Allergies"),i(),t(42,"p"),r(43),i()(),t(44,"div",32)(45,"p"),r(46,"Diagnosis:"),i(),t(47,"p"),r(48),i()(),t(49,"div",32)(50,"p"),r(51,"Prescription:"),i(),t(52,"p"),r(53),i()(),t(54,"div",32)(55,"p"),r(56,"TreatmentPlan:"),i(),t(57,"p"),r(58),i()(),t(59,"div",32)(60,"p"),r(61,"Note:"),i(),t(62,"p"),r(63),i()(),t(64,"div",32)(65,"p"),r(66,"File:"),i(),w(67,qt,2,0,"p",40),i(),w(68,Gt,2,2,"div",40),t(69,"div",37)(70,"button",38),C("click",function(){g(e);let n=M(2);return f(n.visibleMedicalRecord=!n.visibleMedicalRecord)}),r(71,"Close"),i()()()}if(o&2){let e=M(2);l(5),v("Dr. ",e.selectedMedicalRecord==null||e.selectedMedicalRecord.doctor==null?null:e.selectedMedicalRecord.doctor.fullName,""),l(5),R(U(11,14,e.selectedMedicalRecord==null||e.selectedMedicalRecord.medicalRecordResponse==null?null:e.selectedMedicalRecord.medicalRecordResponse.dateCreated,"dd MMM yyyy, hh:mm a")),l(6),R(U(17,17,e.selectedMedicalRecord==null||e.selectedMedicalRecord.medicalRecordResponse==null?null:e.selectedMedicalRecord.medicalRecordResponse.lastModified,"dd MMM yyyy, hh:mm a")),l(6),R(e.selectedMedicalRecord==null||e.selectedMedicalRecord.medicalRecordResponse==null?null:e.selectedMedicalRecord.medicalRecordResponse.bloodType),l(5),v("",e.selectedMedicalRecord==null||e.selectedMedicalRecord.medicalRecordResponse==null?null:e.selectedMedicalRecord.medicalRecordResponse.heartRate," "),l(6),v("",e.selectedMedicalRecord==null||e.selectedMedicalRecord.medicalRecordResponse==null?null:e.selectedMedicalRecord.medicalRecordResponse.temperature,"\xB0C"),l(5),R(e.selectedMedicalRecord==null||e.selectedMedicalRecord.medicalRecordResponse==null?null:e.selectedMedicalRecord.medicalRecordResponse.description),l(5),R(e.selectedMedicalRecord==null||e.selectedMedicalRecord.medicalRecordResponse==null?null:e.selectedMedicalRecord.medicalRecordResponse.allergies),l(5),R(e.selectedMedicalRecord==null||e.selectedMedicalRecord.medicalRecordResponse==null?null:e.selectedMedicalRecord.medicalRecordResponse.diagnosis),l(5),R(e.selectedMedicalRecord==null||e.selectedMedicalRecord.medicalRecordResponse==null?null:e.selectedMedicalRecord.medicalRecordResponse.prescription),l(5),R(e.selectedMedicalRecord==null||e.selectedMedicalRecord.medicalRecordResponse==null?null:e.selectedMedicalRecord.medicalRecordResponse.treatmentPlan),l(5),R(e.selectedMedicalRecord==null||e.selectedMedicalRecord.medicalRecordResponse==null?null:e.selectedMedicalRecord.medicalRecordResponse.note),l(4),m("ngIf",!(!(e.selectedMedicalRecord==null||e.selectedMedicalRecord.medicalRecordResponse==null)&&e.selectedMedicalRecord.medicalRecordResponse.filePath)),l(),m("ngIf",e.selectedMedicalRecord==null||e.selectedMedicalRecord.medicalRecordResponse==null?null:e.selectedMedicalRecord.medicalRecordResponse.filePath)}}function Ht(o,h){if(o&1){let e=x();t(0,"div",2)(1,"h4",3),r(2,"Patient Appoinment"),i(),t(3,"div",4)(4,"ul",5)(5,"li",6)(6,"a",7),r(7,"Today"),i()()(),t(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"table",13)(14,"thead")(15,"tr")(16,"th"),r(17,"Patient Name"),i(),t(18,"th"),r(19,"Appointment Date"),i(),t(20,"th"),r(21,"Doctor"),i(),t(22,"th"),r(23,"Appointment Status"),i(),c(24,"th"),i()(),t(25,"tbody"),w(26,jt,30,20,"tr",14),i()()(),t(27,"p-paginator",15),C("onPageChange",function(n){g(e);let s=M();return f(s.handlePageEvent(n))}),i()()()(),t(28,"p-dialog",16),b("visibleChange",function(n){g(e);let s=M();return _(s.visible,n)||(s.visible=n),f(n)}),w(29,Ot,47,21,"div",17),i(),t(30,"p-dialog",18),b("visibleChange",function(n){g(e);let s=M();return _(s.visibleMedicalRecord,n)||(s.visibleMedicalRecord=n),f(n)}),w(31,Ut,72,20,"div",17),i()()()()}if(o&2){let e=M();l(26),m("ngForOf",e.appointments),l(),m("rows",e.pageSize)("totalRecords",e.totalAppointments)("rowsPerPageOptions",F(14,At)),l(),O(F(15,kt)),m("modal",!0),S("visible",e.visible),l(),m("ngIf",e.selectedAppointment),l(),O(F(16,Vt)),m("modal",!0),S("visible",e.visibleMedicalRecord),l(),m("ngIf",e.selectedMedicalRecord)}}var _t=(()=>{class o{constructor(e,a){this.appointmentService=e,this.router=a,this.appointments=[],this.totalAppointments=0,this.pageSize=10,this.currentPage=1,this.searchPatientName="",this.visible=!1,this.selectedAppointment=null,this.visibleMedicalRecord=!1,this.selectedMedicalRecord=null,this.isFormVisible=!1,this.imagePreview=null,this.fileName=null,this.medicalRecordRequest=new Z,this.loading=!1}ngOnInit(){this.fetchGetAppointmentsForNurse(this.currentPage,this.pageSize)}fetchGetAppointmentsForNurse(e,a){this.appointmentService.getAppointmentsForNurse(e,a).subscribe(n=>{n.statusCode===200?(this.appointments=n.data,this.totalAppointments=n.totalPage*a):console.log(n)},n=>{console.error("Error fetching all patients",n)})}handlePageEvent(e){this.currentPage=e.page+1,this.pageSize=e.rows,this.fetchGetAppointmentsForNurse(this.currentPage,this.pageSize)}onPageSizeChange(){this.currentPage=1,this.fetchGetAppointmentsForNurse(this.currentPage,this.pageSize)}onSearchChange(){this.currentPage=1,this.fetchGetAppointmentsForNurse(this.currentPage,this.pageSize)}viewAppointmentDetails(e){this.selectedAppointment=e,this.visible=!0}openForm(e){this.appointmentService.setAppointment(e),this.router.navigate(["/nurse/create-medical-record"])}onFileSelected(e){if(this.selectedFile=e.target.files[0],this.selectedFile)if(this.selectedFile.type.startsWith("image/")){let a=new FileReader;a.onload=()=>{this.imagePreview=a.result,this.fileName=null},a.readAsDataURL(this.selectedFile)}else this.imagePreview=null,this.fileName=this.selectedFile.name}closeForm(){this.isFormVisible=!1}viewMedicalRecordDetails(e){this.selectedMedicalRecord=e,this.visibleMedicalRecord=!0}static{this.\u0275fac=function(a){return new(a||o)(u(Q),u(P))}}static{this.\u0275cmp=y({type:o,selectors:[["app-nurse-dashboard"]],decls:2,vars:1,consts:[[1,"row"],["class","col-md-12",4,"ngIf"],[1,"col-md-12"],[1,"mb-4"],[1,"appointment-tab"],[1,"nav","nav-tabs","nav-tabs-solid","nav-tabs-rounded"],[1,"nav-item"],["data-toggle","tab",1,"nav-link","active"],[1,"tab-content"],["id","upcoming-appointments",1,"tab-pane","show","active"],[1,"card","card-table","mb-0"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-hover","table-center","mb-0"],[4,"ngFor","ngForOf"],[3,"onPageChange","rows","totalRecords","rowsPerPageOptions"],["header","Appointment Details",3,"visibleChange","modal","visible"],["class","row",4,"ngIf"],["header","Medical Record Details",3,"visibleChange","modal","visible"],[1,"table-avatar"],[1,"avatar","avatar-sm","mr-3"],["alt","User Image",1,"avatar-img","rounded-circle",3,"src"],[1,"d-block","text-info"],[1,"badge","badge-pill",3,"ngClass"],[1,"text-right"],[1,"appointment-action"],["href","javascript:void(0);",1,"btn","btn-sm","bg-info-light",3,"click"],[1,"far","fa-eye"],["class","btn btn-sm bg-primary-light","data-toggle","modal","data-target","#add_medical_records",3,"click",4,"ngIf"],["class","btn btn-sm bg-warning-light","data-toggle","modal","data-target","#add_medical_records",3,"click",4,"ngIf"],["data-toggle","modal","data-target","#add_medical_records",1,"btn","btn-sm","bg-primary-light",3,"click"],["data-toggle","modal","data-target","#add_medical_records",1,"btn","btn-sm","bg-warning-light",3,"click"],[1,"d-flex","justify-content-between","pe-2"],[1,"row","d-flex","justify-content-between","pe-0"],[1,"col-4"],[1,"col-8","pe-0","d-flex","justify-content-end",2,"text-align","justify"],[1,"mh-25"],[1,"d-flex","justify-content-between","pt-4"],["mat-raised-button","",3,"click"],[1,"fas","fa-heartbeat","fa-lg",2,"color","#e10909"],[4,"ngIf"],["alt","File Image","width","580",1,"img-fluid",3,"src","preview"]],template:function(a,n){a&1&&(t(0,"div",0),w(1,Ht,32,17,"div",1),i()),a&2&&(l(),m("ngIf",!n.isFormVisible))},dependencies:[ue,ge,N,D,We,Oe,at,Ke,fe]})}}return o})();var $=class{constructor(){}};var ee=(()=>{class o{constructor(e){this.http=e,this.userDataSubject=new se(null),this.userData$=this.userDataSubject.asObservable(),this.baseUrl=`${Ce}/api/nurse`}getNurseProfile(){return this.http.get(`${this.baseUrl}/myInfo`)}setProfile(e){this.userDataSubject.next(e)}updateNurseProfile(e,a){let n=`${this.baseUrl}/update-profile`,s=new FormData,d=e.dateOfBirth?new Date(e.dateOfBirth).toISOString().split("T")[0]:"";return a?s.append("file",a,a.name):s.append("file",new Blob,""),s.append("firstName",e.firstName||""),s.append("lastName",e.lastName||""),s.append("gender",e.gender?"true":"false"),s.append("phone",e.phone||""),s.append("dateOfBirth",d),s.append("address",e.address||""),this.http.put(n,s)}static{this.\u0275fac=function(a){return new(a||o)(pe(ve))}}static{this.\u0275prov=ce({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function Jt(o,h){o&1&&(t(0,"div",29),c(1,"p-progressSpinner",30),i())}var wt=(()=>{class o{constructor(e,a,n){this.nurseService=e,this.messageService=a,this.route=n,this.originalNurseProfile={},this.updateProfile=new $,this.imagePreview=null,this.loading=!1}onFileSelected(e){if(this.selectedFile=e.target.files[0],this.selectedFile){let a=new FileReader;a.onload=()=>{this.imagePreview=a.result},a.readAsDataURL(this.selectedFile)}}ngOnInit(){this.nurseService.getNurseProfile().subscribe(e=>{e.data.dateOfBirth=new Date(e.data.dateOfBirth),this.originalNurseProfile=e.data,this.updateProfile=le({},e.data)})}onSubmit(){this.loading=!0,this.nurseService.updateNurseProfile(this.updateProfile,this.selectedFile).subscribe(e=>{this.loading=!1,e.statusCode===200?(this.messageService.add({key:"messageToast",severity:"success",summary:"Success",detail:e.message||"Profile updated successfully"}),this.selectedFile=null,this.imagePreview=null,setTimeout(()=>{this.nurseService.getNurseProfile().subscribe(a=>{this.nurseService.setProfile(a.data)})},1e3)):this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:e.message||"Failed to update profile"})},e=>{this.loading=!1,console.error("Failed to update profile",e),this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:"Failed to update profile due to server error"})})}static{this.\u0275fac=function(a){return new(a||o)(u(ee),u(I),u(P))}}static{this.\u0275cmp=y({type:o,selectors:[["app-nurse-profile"]],decls:69,vars:15,consts:[[3,"ngSubmit"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"row","form-row"],[1,"col-md-12"],[1,"form-group"],[1,"change-avatar"],[1,"profile-img"],["alt","Doctor Image","width","100%",3,"src","preview"],[1,"upload-img"],[1,"change-photo-btn"],[1,"fa","fa-upload"],["type","file",1,"upload",3,"change"],[1,"form-text","text-muted"],[1,"col-md-6"],[1,"text-danger"],["type","email","name","email","readonly","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","firstName",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","lastName",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","phone",1,"form-control",3,"ngModelChange","ngModel"],["name","gender",1,"form-control","select",3,"ngModelChange","ngModel"],[3,"ngValue"],[1,"form-group","mb-0"],["name","dateOfBirth","inputId","icondisplay",3,"ngModelChange","ngModel","iconDisplay","showIcon"],["type","text","name","address",1,"form-control",3,"ngModelChange","ngModel"],[1,"submit-section","submit-btn-bottom"],["type","submit",1,"btn","btn-primary","submit-btn",3,"disabled"],["class","spinner-container",4,"ngIf"],[1,"spinner-container"],["styleClass","w-2rem h-2rem","strokeWidth","3","fill","var(--surface-ground)","animationDuration",".5s"]],template:function(a,n){a&1&&(t(0,"form",0),C("ngSubmit",function(){return n.onSubmit()}),t(1,"div",1)(2,"div",2)(3,"h4",3),r(4,"Basic Information"),i(),t(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),c(10,"p-image",9),i(),t(11,"div",10)(12,"div",11)(13,"span"),c(14,"i",12),r(15," Upload Photo"),i(),t(16,"input",13),C("change",function(d){return n.onFileSelected(d)}),i()(),t(17,"small",14),r(18,"Allowed JPG, GIF or PNG. Max size of 2MB"),i()()()()(),t(19,"div",15)(20,"div",6)(21,"label"),r(22,"Email "),t(23,"span",16),r(24,"*"),i()(),t(25,"input",17),b("ngModelChange",function(d){return _(n.originalNurseProfile.email,d)||(n.originalNurseProfile.email=d),d}),i()()(),t(26,"div",15)(27,"div",6)(28,"label"),r(29,"First Name "),t(30,"span",16),r(31,"*"),i()(),t(32,"input",18),b("ngModelChange",function(d){return _(n.updateProfile.firstName,d)||(n.updateProfile.firstName=d),d}),i()()(),t(33,"div",15)(34,"div",6)(35,"label"),r(36,"Last Name "),t(37,"span",16),r(38,"*"),i()(),t(39,"input",19),b("ngModelChange",function(d){return _(n.updateProfile.lastName,d)||(n.updateProfile.lastName=d),d}),i()()(),t(40,"div",15)(41,"div",6)(42,"label"),r(43,"Phone Number"),i(),t(44,"input",20),b("ngModelChange",function(d){return _(n.updateProfile.phone,d)||(n.updateProfile.phone=d),d}),i()()(),t(45,"div",15)(46,"div",6)(47,"label"),r(48,"Gender"),i(),t(49,"select",21),b("ngModelChange",function(d){return _(n.updateProfile.gender,d)||(n.updateProfile.gender=d),d}),t(50,"option",22),r(51,"Male"),i(),t(52,"option",22),r(53,"Female"),i()()()(),t(54,"div",15)(55,"div",23)(56,"label"),r(57,"Date of Birth"),i(),t(58,"div")(59,"p-calendar",24),b("ngModelChange",function(d){return _(n.updateProfile.dateOfBirth,d)||(n.updateProfile.dateOfBirth=d),d}),i()()()(),t(60,"div",15)(61,"div",23)(62,"label"),r(63,"Address"),i(),t(64,"input",25),b("ngModelChange",function(d){return _(n.updateProfile.address,d)||(n.updateProfile.address=d),d}),i()()()()()(),t(65,"div",26)(66,"button",27),r(67,"Save Changes"),i(),w(68,Jt,2,0,"div",28),i()()),a&2&&(l(10),m("src",n.imagePreview)("preview",!0),l(15),S("ngModel",n.originalNurseProfile.email),l(7),S("ngModel",n.updateProfile.firstName),l(7),S("ngModel",n.updateProfile.lastName),l(5),S("ngModel",n.updateProfile.phone),l(5),S("ngModel",n.updateProfile.gender),l(),m("ngValue",!0),l(2),m("ngValue",!1),l(7),S("ngModel",n.updateProfile.dateOfBirth),m("iconDisplay","input")("showIcon",!0),l(5),S("ngModel",n.updateProfile.address),l(2),m("disabled",n.loading),l(2),m("ngIf",n.loading))},dependencies:[N,V,Ne,Ie,J,Ee,A,k,K,X,D,Y,et]})}}return o})();var Xt=()=>({exact:!0}),Ct=(()=>{class o{constructor(e,a,n,s){this.nurseService=e,this.authService=a,this.store=n,this.messageService=s,this.nurseProfile={}}ngOnInit(){this.nurseService.userData$.subscribe(e=>{e&&(this.nurseProfile=e)}),this.nurseService.getNurseProfile().subscribe(e=>{this.nurseProfile=e.data})}logout(){this.authService.logout().subscribe({next:e=>{this.store.dispatch(Re({logoutSuccess:"Logout Success"}))},error:e=>{this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:"Fail to logout"})}})}static{this.\u0275fac=function(a){return new(a||o)(u(ee),u(z),u(Me),u(I))}}static{this.\u0275cmp=y({type:o,selectors:[["app-nurse-sidebar"]],decls:38,vars:9,consts:[[1,"profile-sidebar"],[1,"widget-profile","pro-widget-content"],[1,"profile-info-widget"],[1,"booking-doc-img"],["alt","Doctor Image","width","100%",3,"src","preview"],[1,"profile-det-info"],["routerLink","/doctor/profile",1,"external-link"],[1,"d-flex","align-items-center","justify-content-center"],[1,"fa-solid","fa-arrow-up-right-from-square"],[1,"patient-details"],[1,"fas","fa-birthday-cake"],[1,"dashboard-widget"],[1,"dashboard-menu"],["routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/nurse/dashboard"],[1,"fas","fa-columns"],["routerLinkActive","active"],["routerLink","/nurse/profile"],[1,"fas","fa-user-cog"],["routerLink","/nurse/change-password"],[1,"fas","fa-lock"],["routerLink","",3,"click"],[1,"fas","fa-sign-out-alt"]],template:function(a,n){a&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c(4,"p-image",4),i(),t(5,"div",5)(6,"a",6)(7,"h3",7),r(8),c(9,"i",8),i()(),t(10,"div",9)(11,"h5"),c(12,"i",10),r(13),T(14,"dateFormat"),i()()()()(),t(15,"div",11)(16,"nav",12)(17,"ul")(18,"li",13)(19,"a",14),c(20,"i",15),t(21,"span"),r(22,"Dashboard"),i()()(),t(23,"li",16)(24,"a",17),c(25,"i",18),t(26,"span"),r(27,"Profile Settings"),i()()(),t(28,"li",16)(29,"a",19),c(30,"i",20),t(31,"span"),r(32,"Change Password"),i()()(),t(33,"li")(34,"a",21),C("click",function(){return n.logout()}),c(35,"i",22),t(36,"span"),r(37,"Logout"),i()()()()()()()),a&2&&(l(4),m("src",(n.nurseProfile==null?null:n.nurseProfile.avatarFilePath)||"assets/images/user.png")("preview",!0),l(4),q(" ",n.nurseProfile==null?null:n.nurseProfile.firstName," ",n.nurseProfile==null?null:n.nurseProfile.lastName," \xA0 "),l(5),v(" ",G(14,6,n.nurseProfile==null?null:n.nurseProfile.dateOfBirth),""),l(5),m("routerLinkActiveOptions",F(8,Xt)))},dependencies:[H,we,D,lt]})}}return o})();var Mt=(()=>{class o{constructor(e,a){this.router=e,this.activatedRoute=a,this.breadcrumbTitle="Dashboard",this.routeTitles={"/":"Home","/nurse/dashboard":"Dashboard","/nurse/profile":"Nurse Profile","/nurse/change-password":"Change Password"}}ngOnInit(){this.router.events.pipe(me(e=>e instanceof Se),de(()=>this.buildRoutePath(this.activatedRoute))).subscribe(e=>{this.breadcrumbTitle=this.routeTitles[e]||"Dashboard"})}buildRoutePath(e){let a=e.snapshot.url.map(n=>n.path).join("/");for(a&&(a="/"+a);e.firstChild;){e=e.firstChild;let n=e.snapshot.url.map(s=>s.path).join("/");n&&(a+="/"+n)}return a.startsWith("/nurse")?a:"/nurse"+a}static{this.\u0275fac=function(a){return new(a||o)(u(P),u(_e))}}static{this.\u0275cmp=y({type:o,selectors:[["app-nurse-bread-crumb"]],decls:13,vars:2,consts:[[1,"breadcrumb-bar","p-0"],[1,"container-fluid","pt-2"],[1,"row","align-items-center"],[1,"col-md-12","col-12"],["aria-label","breadcrumb",1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/nurse"],["aria-current","page",1,"breadcrumb-item","active"],[1,"breadcrumb-title"]],template:function(a,n){a&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"nav",4)(5,"ol",5)(6,"li",6)(7,"a",7),r(8,"Home"),i()(),t(9,"li",8),r(10),i()()(),t(11,"h2",9),r(12),i()()()()()),a&2&&(l(10),v(" ",n.breadcrumbTitle," "),l(2),R(n.breadcrumbTitle))},dependencies:[H]})}}return o})();var Rt=(()=>{class o{static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275cmp=y({type:o,selectors:[["app-nurse"]],decls:8,vars:0,consts:[[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","col-lg-4","col-xl-3"],[1,"col-md-12","col-lg-8","col-xl-9",2,"min-height","90vh"]],template:function(a,n){a&1&&(c(0,"app-nurse-bread-crumb"),t(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),c(5,"app-nurse-sidebar"),i(),t(6,"div",4),c(7,"router-outlet"),i()()()())},dependencies:[be,Ct,Mt]})}}return o})();function Yt(o,h){if(o&1&&c(0,"p-image",40),o&2){let e=M();m("src",e.imagePreview)("preview",!0)}}function Zt(o,h){if(o&1&&(t(0,"div",41),r(1),i()),o&2){let e=M();l(),v(" ",e.fileName," ")}}function $t(o,h){o&1&&(t(0,"div",42),c(1,"p-progressSpinner",43),i())}var yt=(()=>{class o{constructor(e,a,n,s){this.router=e,this.appointmentService=a,this.messageService=n,this.medicalRecordService=s,this.imagePreview=null,this.fileName=null,this.medicalRecordRequest=new Z,this.loading=!1}ngOnInit(){this.selectedAppointment=this.appointmentService.getAppointment()}onFileSelected(e){if(this.selectedFile=e.target.files[0],this.selectedFile)if(this.selectedFile.type.startsWith("image/")){let a=new FileReader;a.onload=()=>{this.imagePreview=a.result,this.fileName=null},a.readAsDataURL(this.selectedFile)}else this.imagePreview=null,this.fileName=this.selectedFile.name}closeForm(){this.router.navigate(["/nurse/dashboard"])}onSubmit(){this.loading=!0,this.medicalRecordRequest.patientId=this.selectedAppointment?.patientResponse?.id,this.medicalRecordRequest.appointmentId=this.selectedAppointment.id,console.log(this.medicalRecordRequest),this.medicalRecordService.addMedicalRecordForPatient(this.medicalRecordRequest,this.selectedFile).subscribe(e=>{this.loading=!1,e.statusCode===200?(this.messageService.add({key:"messageToast",severity:"success",summary:"Success",detail:e.message||"Medical Record added successfully"}),this.selectedFile=null,this.imagePreview=null,setTimeout(()=>{this.closeForm(),this.router.navigate(["/nurse/dashboard"])},1e3)):this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:e.message||"Failed to add Medical Record"})},e=>{this.loading=!1,console.error("Failed to add Medical Record",e),this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:"Failed due to server error"})})}static{this.\u0275fac=function(a){return new(a||o)(u(P),u(Q),u(I),u(rt))}}static{this.\u0275cmp=y({type:o,selectors:[["app-create-medical-record"]],decls:73,vars:12,consts:[["reviewForm","ngForm"],[1,"card"],[1,"card-body",2,"min-height","46.5vh"],[1,"card-title"],[1,"row","form-row"],[3,"ngSubmit"],["appearance","outline",1,"col-sm-5","col-md-3","col-lg-3","col-xl-4",2,"margin-right","20px"],["required","","name","bloodType",3,"ngModelChange","ngModel"],["value","A"],["value","B"],["value","O"],["value","AB"],["appearance","outline",1,"col-sm-5","col-md-3","col-lg-3","col-xl-4"],["matInput","","placeholder","Ex. 80","name","heartRate","required","","type","number",3,"ngModelChange","ngModel"],["appearance","outline",1,"col-sm-5","col-md-3","col-lg-3","col-xl-2",2,"margin-right","77px","width","18%"],["matInput","","placeholder","Ex: 36.75","name","temperature","type","text","pattern","^\\d+(\\.\\d{1,2})?$",3,"ngModelChange","ngModel"],["matInput","","placeholder","","name","height","type","text","pattern","^\\d+(\\.\\d{1,2})?$",3,"ngModelChange","ngModel"],["appearance","outline",1,"col-sm-5","col-md-3","col-lg-3","col-xl-2",2,"width","18%"],["matInput","","placeholder","","name","weight","type","text","pattern","^\\d+(\\.\\d{1,2})?$",3,"ngModelChange","ngModel"],["appearance","outline",1,"col-sm-12","col-md-6","col-lg-6","col-xl-9","pb-1",2,"width","69%"],["matInput","","placeholder","Ex. Symptoms recorded from the patient","name","description","required","",3,"ngModelChange","ngModel"],["matInput","","placeholder","Ex. Symptoms recorded from the patient","name","allergies","required","",3,"ngModelChange","ngModel"],[1,"change-avatar"],[1,"profile-img"],["alt","Doctor Image","width","100%",3,"src","preview",4,"ngIf"],["class","file-name",4,"ngIf"],[1,"upload-img"],[1,"change-photo-btn"],[1,"fa","fa-upload"],["type","file",1,"upload",3,"change"],[1,"form-text","text-muted",2,"margin-top","15px"],[1,"form-group",2,"margin-top","15px"],[1,"terms-accept"],[1,"custom-checkbox"],["type","checkbox","id","terms_accept","required",""],["for","terms_accept"],["href","#"],["type","button",1,"btn","btn-cancel",3,"click"],["type","submit",1,"btn","btn-primary","submit-btn",3,"disabled"],["class","spinner-container",4,"ngIf"],["alt","Doctor Image","width","100%",3,"src","preview"],[1,"file-name"],[1,"spinner-container"],["styleClass","w-4rem h-4rem","strokeWidth","5","fill","var(--surface-ground)","animationDuration",".5s"]],template:function(a,n){if(a&1){let s=x();t(0,"div",1)(1,"div",2)(2,"h2",3),r(3),i(),t(4,"div",4)(5,"form",5,0),C("ngSubmit",function(){return g(s),f(n.onSubmit())}),t(7,"mat-dialog-content")(8,"mat-form-field",6)(9,"mat-label"),r(10,"Blood Group"),i(),t(11,"mat-select",7),b("ngModelChange",function(p){return g(s),_(n.medicalRecordRequest.bloodType,p)||(n.medicalRecordRequest.bloodType=p),f(p)}),t(12,"mat-option",8),r(13,"A"),i(),t(14,"mat-option",9),r(15,"B"),i(),t(16,"mat-option",10),r(17,"O"),i(),t(18,"mat-option",11),r(19,"AB"),i()()(),t(20,"mat-form-field",12)(21,"mat-label"),r(22,"Heart Rate"),i(),t(23,"input",13),b("ngModelChange",function(p){return g(s),_(n.medicalRecordRequest.heartRate,p)||(n.medicalRecordRequest.heartRate=p),f(p)}),i()(),c(24,"br"),t(25,"mat-form-field",14)(26,"mat-label"),r(27,"Temperature"),i(),t(28,"input",15),b("ngModelChange",function(p){return g(s),_(n.medicalRecordRequest.temperature,p)||(n.medicalRecordRequest.temperature=p),f(p)}),i()(),t(29,"mat-form-field",14)(30,"mat-label"),r(31,"Height"),i(),t(32,"input",16),b("ngModelChange",function(p){return g(s),_(n.medicalRecordRequest.height,p)||(n.medicalRecordRequest.height=p),f(p)}),i()(),t(33,"mat-form-field",17)(34,"mat-label"),r(35,"Weight"),i(),t(36,"input",18),b("ngModelChange",function(p){return g(s),_(n.medicalRecordRequest.weight,p)||(n.medicalRecordRequest.weight=p),f(p)}),i()(),c(37,"br"),t(38,"mat-form-field",19)(39,"mat-label"),r(40,"Description"),i(),t(41,"textarea",20),b("ngModelChange",function(p){return g(s),_(n.medicalRecordRequest.description,p)||(n.medicalRecordRequest.description=p),f(p)}),i()(),t(42,"mat-form-field",19)(43,"mat-label"),r(44,"Allergies"),i(),t(45,"textarea",21),b("ngModelChange",function(p){return g(s),_(n.medicalRecordRequest.allergies,p)||(n.medicalRecordRequest.allergies=p),f(p)}),i()(),c(46,"br"),t(47,"div",22)(48,"div",23),w(49,Yt,1,2,"p-image",24)(50,Zt,2,1,"div",25),i(),t(51,"div",26)(52,"div",27)(53,"span"),c(54,"i",28),r(55," Upload File"),i(),t(56,"input",29),C("change",function(p){return g(s),f(n.onFileSelected(p))}),i()(),t(57,"small",30),r(58,"Allowed DOC, DOCX, PDF, JPG, PNG. Max size of 5MB"),i()()(),t(59,"div",31)(60,"div",32)(61,"div",33),c(62,"input",34),t(63,"label",35),r(64,"I have read and accept "),t(65,"a",36),r(66,"Terms & Conditions"),i()()()()()(),t(67,"mat-dialog-actions")(68,"button",37),C("click",function(){return g(s),f(n.closeForm())}),r(69," Cancel "),i(),t(70,"button",38),r(71," Create "),i(),w(72,$t,2,0,"div",39),i()()()()()}a&2&&(l(3),v("Create Medical Record For Patient ",n.selectedAppointment==null?null:n.selectedAppointment.fullName,""),l(8),S("ngModel",n.medicalRecordRequest.bloodType),l(12),S("ngModel",n.medicalRecordRequest.heartRate),l(5),S("ngModel",n.medicalRecordRequest.temperature),l(4),S("ngModel",n.medicalRecordRequest.height),l(4),S("ngModel",n.medicalRecordRequest.weight),l(5),S("ngModel",n.medicalRecordRequest.description),l(4),S("ngModel",n.medicalRecordRequest.allergies),l(4),m("ngIf",n.imagePreview),l(),m("ngIf",n.fileName),l(20),m("disabled",n.loading),l(2),m("ngIf",n.loading))},dependencies:[N,V,J,ye,A,k,De,Fe,K,X,D,Y,pt,ct,Je,He,Ue,gt,Ge]})}}return o})();var ei=[{path:"",component:Rt,children:[{path:"",redirectTo:"/nurse/dashboard",pathMatch:"full"},{path:"dashboard",component:_t,title:"Nurse Dashboard"},{path:"profile",component:wt,title:"Nurse Profile"},{path:"change-password",component:vt,title:"Nurse Change Password"},{path:"create-medical-record",component:yt,title:"Nurse Create Medical Record"}]}],Pt=(()=>{class o{static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275mod=j({type:o})}static{this.\u0275inj=L({imports:[ne.forChild(ei),ne]})}}return o})();var wn=(()=>{class o{static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275mod=j({type:o})}static{this.\u0275inj=L({providers:[Ve],imports:[he,Pt,Ae,ke,mt,je,Ye,tt,Le,qe,ot,Qe,ut,Xe,ze,ft,it,dt,nt,$e]})}}return o})();export{wn as NurseModule};
