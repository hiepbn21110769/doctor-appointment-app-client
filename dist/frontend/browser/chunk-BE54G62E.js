import{$ as o,Nc as a,X as r,ca as s,k as p,yc as h}from"./chunk-UHTXMJPS.js";var g=(()=>{class n{constructor(t){this.http=t,this.myInfoUrl=`${a}/api/identity/myInfo`,this.updateProfileUrl=`${a}/api/identity/user/update-profile`,this.baseUrl=`${a}/api/patient`,this.appointmentUrl=`${a}/api/appointment`,this.patientProfileSubject=new p(null)}setPatientProfile(t){this.patientProfileSubject.next(t)}getPatientProfile(){return this.patientProfileSubject.asObservable()}fetchMyInfo(){return this.http.get(this.myInfoUrl).pipe(r(t=>this.patientProfileSubject.next(t)))}updatePatientProfile(t,i){let e=new FormData,f=t.dateOfBirth?new Date(t.dateOfBirth).toISOString().split("T")[0]:"";return i?e.append("file",i,i.name):e.append("file",new Blob,""),e.append("email",t.email||""),e.append("firstName",t.firstName||""),e.append("lastName",t.lastName||""),e.append("gender",t.gender?"true":"false"),e.append("phone",t.phone||""),e.append("dateOfBirth",f),e.append("address",t.address||""),this.http.put(this.updateProfileUrl,e).pipe(r(()=>this.fetchMyInfo().subscribe()))}getAppointmentsOfPatient(t,i){let e=`${this.appointmentUrl}/list/patient?page=${t}&size=${i}`;return this.http.get(e)}getPatientDetail(t){return this.http.get(`${this.baseUrl}/detail/${t}`)}static{this.\u0275fac=function(i){return new(i||n)(s(h))}}static{this.\u0275prov=o({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{g as a};
