import{a as O}from"./chunk-BE54G62E.js";import{b as Oe,c as Be,d as Ve,e as We,n as je}from"./chunk-L4GB25SR.js";import{a as Ue,b as He,c as qe,d as Je,e as Ke,f as Qe,g as Xe,l as Ye}from"./chunk-OE7Q57NZ.js";import{a as ye,b as we}from"./chunk-OANHVOJY.js";import{a as Te,b as Ne,c as Fe,d as Le}from"./chunk-EMDYK7GU.js";import{d as L,e as Ee,j as Me}from"./chunk-INHZXUYG.js";import{c as N,d as Ae,e as ke}from"./chunk-R5DRVBFP.js";import{a as Ge,b as ze}from"./chunk-VUELGBHH.js";import{e as be,f as Ce}from"./chunk-MVHRCX3U.js";import{m as xe,n as Re}from"./chunk-6G6ZJK7H.js";import{c as se,p as de}from"./chunk-PREI7CCJ.js";import{W as De,Z as Ie}from"./chunk-7CWJXPPP.js";import{$a as m,Ga as Z,Gb as a,Hb as h,Ia as o,Ib as v,Ic as re,Ja as g,Jb as A,Jc as U,Kb as S,Kc as H,Lb as _,Lc as le,Mb as b,Mc as B,Pb as y,Pc as me,Rc as V,Ub as G,Uc as F,Vc as q,Xa as P,Xb as M,Xc as pe,Yb as z,Zb as k,Zc as J,_c as K,a as Y,aa as W,bd as ce,cb as I,cd as ue,dd as ge,ed as fe,fd as he,ha as C,ia as j,jb as t,kb as i,kd as ve,lb as p,ld as Pe,md as Se,nc as ie,oa as w,oc as ne,pa as E,pb as R,pc as T,sb as c,sd as x,ub as f,uc as ae,wc as oe,xd as _e}from"./chunk-UHTXMJPS.js";var pt=()=>({"min-width":"50px"}),Ze=()=>[10,20],ct=()=>({width:"30rem"}),ut=()=>({width:"45rem"}),gt=()=>({width:"55rem"}),ee=(r,u,e,l,n)=>({"bg-primary-light":r,"bg-info-light":u,"bg-success-light":e,"bg-warning-light":l,"bg-danger-light":n}),ft=()=>({width:"100%",height:"100%"});function ht(r,u){if(r&1&&(t(0,"span",38),a(1),i()),r&2){let e=f().$implicit;m("ngClass",G(2,ee,e.appointmentStatus==="ACCEPT",e.appointmentStatus==="RESCHEDULED",e.appointmentStatus==="COMPLETED",e.appointmentStatus==="PENDING",e.appointmentStatus==="CANCELLED")),o(),v(" ",e.appointmentStatus," ")}}function vt(r,u){if(r&1&&(t(0,"span",39),a(1),i()),r&2){let e=f().$implicit;o(),v(" ",e.appointmentStatus," ")}}function Pt(r,u){if(r&1){let e=R();t(0,"button",40),c("click",function(){w(e);let n=f().$implicit,d=f();return E(d.onCancelAppointment(n.id))}),p(1,"i",41),a(2," Cancel "),i()}}function St(r,u){if(r&1){let e=R();t(0,"button",42),c("click",function(){w(e);let n=f().$implicit,d=f();return E(d.openRescheduleDialog(n))}),p(1,"i",43),a(2," Reschedule "),i()}}function _t(r,u){if(r&1){let e=R();t(0,"tr")(1,"td")(2,"h2",25)(3,"a",26),p(4,"p-image",27),i(),t(5,"a",28),c("click",function(){let n=w(e).$implicit,d=f();return E(d.viewDoctorProfile(n.doctor.id))}),a(6),t(7,"span"),a(8),i()()()(),t(9,"td"),a(10),M(11,"date"),t(12,"span",29),a(13),i()(),t(14,"td"),P(15,ht,2,8,"span",30)(16,vt,2,1,"span",31),i(),t(17,"td",32)(18,"div",33)(19,"button",34),c("click",function(){let n=w(e).$implicit,d=f();return E(d.viewAppointmentDetails(n))}),p(20,"i",35),a(21," View "),i(),P(22,Pt,3,0,"button",36)(23,St,3,0,"button",37),i()()()}if(r&2){let e=u.$implicit;o(4),m("src",e.doctor.avatarFilePath||"assets/images/user.png")("preview",!0),o(2),A("Dr. ",e.doctor.firstName," ",e.doctor.lastName," "),o(2),h(e.doctor.specialty.specialtyName),o(2),v(" ",k(11,11,e.dateBooking,"dd MMM yyyy")," "),o(3),v(" At ",e.bookingHour," "),o(2),m("ngIf",e.appointmentStatus!="IN_PROGRESS"),o(),m("ngIf",e.appointmentStatus==="IN_PROGRESS"),o(6),m("ngIf",e.appointmentStatus==="PENDING"||e.appointmentStatus==="ACCEPT"||e.appointmentStatus==="RESCHEDULED"),o(),m("ngIf",e.appointmentStatus==="ACCEPT")}}function bt(r,u){if(r&1){let e=R();t(0,"div",44)(1,"div",45)(2,"p"),a(3,"Doctor:"),i(),t(4,"p"),a(5),i()(),t(6,"div",45)(7,"p"),a(8,"Patient Name:"),i(),t(9,"p"),a(10),i()(),t(11,"div",45)(12,"p"),a(13,"Phone:"),i(),t(14,"p"),a(15),i()(),t(16,"div",45)(17,"p"),a(18,"Email:"),i(),t(19,"p"),a(20),i()(),t(21,"div",45)(22,"p"),a(23,"Date Booking:"),i(),t(24,"p"),a(25),M(26,"date"),i()(),t(27,"div",45)(28,"p"),a(29,"Booking Hour:"),i(),t(30,"p"),a(31),i()(),t(32,"div",45)(33,"p"),a(34,"Status:"),i(),t(35,"p")(36,"span",38),a(37),i()()(),t(38,"div",46)(39,"p",47),a(40,"Reason:"),i(),t(41,"div",48)(42,"p-scrollPanel",49),a(43),i()()(),t(44,"div",50)(45,"button",51),c("click",function(){w(e);let n=f();return E(n.visible=!n.visible)}),a(46,"Close"),i()()()}if(r&2){let e=f();o(5),A("Dr. ",e.selectedAppointment==null||e.selectedAppointment.doctor==null?null:e.selectedAppointment.doctor.firstName," ",e.selectedAppointment==null||e.selectedAppointment.doctor==null?null:e.selectedAppointment.doctor.lastName,""),o(5),h(e.selectedAppointment==null?null:e.selectedAppointment.fullName),o(5),h(e.selectedAppointment==null?null:e.selectedAppointment.phone),o(5),h(e.selectedAppointment==null?null:e.selectedAppointment.email),o(5),h(z(26,12,e.selectedAppointment==null?null:e.selectedAppointment.dateBooking)),o(6),h(e.selectedAppointment==null?null:e.selectedAppointment.bookingHour),o(5),m("ngClass",G(14,ee,e.selectedAppointment.appointmentStatus==="ACCEPT",e.selectedAppointment.appointmentStatus==="RESCHEDULED",e.selectedAppointment.appointmentStatus==="COMPLETED",e.selectedAppointment.appointmentStatus==="PENDING",e.selectedAppointment.appointmentStatus==="CANCELLED")),o(),v(" ",e.selectedAppointment==null?null:e.selectedAppointment.appointmentStatus," "),o(5),I(y(20,ft)),o(),v(" ",e.selectedAppointment==null?null:e.selectedAppointment.reason," ")}}function Ct(r,u){if(r&1&&(t(0,"span",38),a(1),i()),r&2){let e=f().$implicit;m("ngClass",G(2,ee,(e.appointmentResponse==null?null:e.appointmentResponse.appointmentStatus)==="ACCEPT",(e.appointmentResponse==null?null:e.appointmentResponse.appointmentStatus)==="RESCHEDULED",(e.appointmentResponse==null?null:e.appointmentResponse.appointmentStatus)==="COMPLETED",(e.appointmentResponse==null?null:e.appointmentResponse.appointmentStatus)==="PENDING",(e.appointmentResponse==null?null:e.appointmentResponse.appointmentStatus)==="CANCELLED")),o(),v(" ",e.appointmentResponse==null?null:e.appointmentResponse.appointmentStatus," ")}}function yt(r,u){if(r&1&&(t(0,"span",39),a(1),i()),r&2){let e=f().$implicit;o(),v(" ",e.appointmentResponse==null?null:e.appointmentResponse.appointmentStatus," ")}}function wt(r,u){if(r&1){let e=R();t(0,"tr")(1,"td"),a(2),i(),t(3,"td"),a(4),M(5,"date"),i(),t(6,"td"),a(7),M(8,"date"),t(9,"span",29),a(10),i()(),t(11,"td"),P(12,Ct,2,8,"span",30)(13,yt,2,1,"span",31),i(),t(14,"td"),a(15),i(),t(16,"td")(17,"a",52),a(18,"File"),i()(),t(19,"td")(20,"h2",25)(21,"a",53),c("click",function(){let n=w(e).$implicit,d=f();return E(d.viewDoctorProfile(n.doctorResponse==null?null:n.doctorResponse.id))}),p(22,"img",54),i(),t(23,"a",28),c("click",function(){let n=w(e).$implicit,d=f();return E(d.viewDoctorProfile(n.doctorResponse==null?null:n.doctorResponse.id))}),a(24),t(25,"span"),a(26),i()()()(),t(27,"td",32)(28,"div",55)(29,"a",56),c("click",function(){let n=w(e).$implicit,d=f();return E(d.viewMedicalRecordDetails(n))}),p(30,"i",35),a(31," View "),i()()()()}if(r&2){let e=u.$implicit;o(2),h(e.id),o(2),v(" ",k(5,12,e.dateCreated,"dd MMM yyyy, hh:mm a")," "),o(3),v(" ",k(8,15,e.appointmentResponse==null?null:e.appointmentResponse.dateBooking,"dd MMM yyyy")," "),o(3),v(" ",e.appointmentResponse==null?null:e.appointmentResponse.bookingHour," "),o(2),m("ngIf",(e.appointmentResponse==null?null:e.appointmentResponse.appointmentStatus)!="IN_PROGRESS"),o(),m("ngIf",(e.appointmentResponse==null?null:e.appointmentResponse.appointmentStatus)==="IN_PROGRESS"),o(2),h(e==null?null:e.description),o(2),m("href",e==null?null:e.filePath,Z),o(5),m("src",(e.doctorResponse==null?null:e.doctorResponse.avatarFilePath)||"assets/images/user.png",Z),o(2),A("Dr. ",e.doctorResponse==null?null:e.doctorResponse.firstName," ",e.doctorResponse==null?null:e.doctorResponse.lastName," "),o(2),h(e.doctorResponse==null||e.doctorResponse.specialty==null?null:e.doctorResponse.specialty.specialtyName)}}function Et(r,u){if(r&1&&(t(0,"div",45)(1,"p"),a(2,"Edited By:"),i(),t(3,"p"),a(4),i()()),r&2){let e=f(2);o(4),v("Dr. ",e.selectedMedicalRecord==null||e.selectedMedicalRecord.doctorResponse==null?null:e.selectedMedicalRecord.doctorResponse.fullName,"")}}function Mt(r,u){r&1&&(t(0,"P"),a(1,"None"),i())}function xt(r,u){if(r&1&&(t(0,"div",45),p(1,"p-image",60),i()),r&2){let e=f(2);o(),m("src",e.selectedMedicalRecord==null?null:e.selectedMedicalRecord.filePath)("preview",!0)}}function Rt(r,u){if(r&1){let e=R();t(0,"div",44)(1,"div",45)(2,"p"),a(3,"Created By:"),i(),t(4,"p"),a(5),i()(),t(6,"div",45)(7,"p"),a(8,"Created Date:"),i(),t(9,"p"),a(10),M(11,"date"),i()(),t(12,"div",45)(13,"p"),a(14,"Last Modified:"),i(),t(15,"p"),a(16),M(17,"date"),i()(),P(18,Et,5,1,"div",57),t(19,"div",45)(20,"p"),a(21,"Blood Group:"),i(),t(22,"p"),a(23),i()(),t(24,"div",45)(25,"p"),a(26,"Heart Rate:"),i(),t(27,"p"),a(28),p(29,"i",58),i()(),t(30,"div",45)(31,"p"),a(32,"Temperature:"),i(),t(33,"p"),a(34),i()(),t(35,"div",45)(36,"p"),a(37,"Description:"),i(),t(38,"p"),a(39),i()(),t(40,"div",45)(41,"p"),a(42,"Allergies:"),i(),t(43,"p"),a(44),i()(),t(45,"div",45)(46,"p"),a(47,"Diagnosis:"),i(),t(48,"p"),a(49),i()(),t(50,"div",45)(51,"p"),a(52,"Prescription:"),i(),t(53,"p"),a(54),i()(),t(55,"div",45)(56,"p"),a(57,"TreatmentPlan:"),i(),t(58,"p"),a(59),i()(),t(60,"div",45)(61,"p"),a(62,"Note:"),i(),t(63,"p"),a(64),i()(),t(65,"div",45)(66,"p"),a(67,"File:"),i(),P(68,Mt,2,0,"P",59),i(),P(69,xt,2,2,"div",57),t(70,"div",50)(71,"button",51),c("click",function(){w(e);let n=f();return E(n.visibleMedicalRecord=!n.visibleMedicalRecord)}),a(72,"Close"),i()()()}if(r&2){let e=f();o(5),v("Nurse. ",e.selectedMedicalRecord==null||e.selectedMedicalRecord.nurseResponse==null?null:e.selectedMedicalRecord.nurseResponse.fullName,""),o(5),h(k(11,15,e.selectedMedicalRecord.dateCreated,"dd MMM yyyy, hh:mm a")),o(6),h(k(17,18,e.selectedMedicalRecord.lastModified,"dd MMM yyyy, hh:mm a")),o(2),m("ngIf",e.selectedMedicalRecord==null?null:e.selectedMedicalRecord.doctorResponse),o(5),h(e.selectedMedicalRecord==null?null:e.selectedMedicalRecord.bloodType),o(5),v("",e.selectedMedicalRecord==null?null:e.selectedMedicalRecord.heartRate," "),o(6),v("",e.selectedMedicalRecord==null?null:e.selectedMedicalRecord.temperature,"\xB0C"),o(5),h(e.selectedMedicalRecord==null?null:e.selectedMedicalRecord.description),o(5),h(e.selectedMedicalRecord==null?null:e.selectedMedicalRecord.allergies),o(5),h(e.selectedMedicalRecord==null?null:e.selectedMedicalRecord.diagnosis),o(5),h(e.selectedMedicalRecord==null?null:e.selectedMedicalRecord.prescription),o(5),h(e.selectedMedicalRecord==null?null:e.selectedMedicalRecord.treatmentPlan),o(5),h(e.selectedMedicalRecord==null?null:e.selectedMedicalRecord.note),o(4),m("ngIf",!(e.selectedMedicalRecord!=null&&e.selectedMedicalRecord.filePath)),o(),m("ngIf",e.selectedMedicalRecord==null?null:e.selectedMedicalRecord.filePath)}}var nt=(()=>{class r{constructor(e,l,n,d){this.patientService=e,this.medicalRecordService=l,this.appointmentService=n,this.messageService=d,this.appointments=[],this.filteredAppointments=[],this.totalAppointments=0,this.pageSize=10,this.currentPage=1,this.visible=!1,this.selectedAppointment=null,this.medicalRecords=[],this.totalMedicalRecords=0,this.pageSizeMR=10,this.currentPageMR=1,this.rescheduleVisible=!1,this.visibleMedicalRecord=!1,this.selectedMedicalRecord=null}ngOnInit(){this.fetchAppointmentsOfPatient(1,this.pageSize),this.fetchMedicalRecordsOfPatient(1,this.pageSizeMR),this.filterOptions=[{name:"All",code:"ALL"},{name:"Accept",code:"ACCEPT"},{name:"Pending",code:"PENDING"},{name:"Cancelled",code:"CANCELLED"}],this.selectedOption={name:"All",code:"ALL"}}onAppointmentsFound(e){this.appointments=e,this.totalAppointments=e.length}applyFilter(e){let l=e.value?.code;l==="ALL"||!l?this.filteredAppointments=[...this.appointments]:this.filteredAppointments=[...this.appointments].filter(n=>n.appointmentStatus==l)}submitRescheduleAppointment(){let e={dateBooking:this.timeSlotSelected.date,bookingHour:this.timeSlotSelected.time};this.appointmentService.rescheduleAppointment(this.selectedAppointment.id,e).subscribe({next:l=>{l.statusCode===200?(this.messageService.add({key:"messageToast",severity:"success",summary:"Success",detail:"Reschedule successfully!"}),setTimeout(()=>{this.fetchAppointmentsOfPatient(this.currentPage,this.pageSize),this.closeRescheduleDialog()},500)):this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:l.message})},error:l=>{this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:"Reschedule unsuccessfully!"}),console.log(l)}})}handleSelectedSlot(e){this.timeSlotSelected=e}onCancelAppointment(e){this.appointmentService.cancelAppointmentByDoctor(e).subscribe(l=>{l.statusCode===200?(this.messageService.add({key:"messageToast",severity:"success",summary:"Success",detail:l.message||"Status changed successfully"}),setTimeout(()=>{this.fetchAppointmentsOfPatient(this.currentPage,this.pageSize)},500)):this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:l.message||"Failed to change status"})},l=>{console.error("Failed to change status",l),this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:"Failed to change status due to server error"})})}fetchAppointmentsOfPatient(e,l){this.patientService.getAppointmentsOfPatient(e,l).subscribe(n=>{n.statusCode===200&&(this.appointments=n.data,this.filteredAppointments=[...this.appointments],this.totalAppointments=(n.totalPage-1)*l+this.filteredAppointments.length)},n=>{console.error("Error fetching appointments",n)})}handlePageEvent(e){this.currentPage=e.page+1,this.pageSize=e.rows,this.fetchAppointmentsOfPatient(this.currentPage,this.pageSize)}onPageSizeChange(){this.currentPage=1,this.fetchAppointmentsOfPatient(this.currentPage,this.pageSize)}viewDoctorProfile(e){window.open(`/doctor-profile/${e}`,"_blank")}viewAppointmentDetails(e){this.selectedAppointment=e,this.visible=!0}openRescheduleDialog(e){this.selectedAppointment=e,this.rescheduleVisible=!0}fetchMedicalRecordsOfPatient(e,l){this.medicalRecordService.getMedicalRecordsOfPatient(e,l).subscribe(n=>{n.statusCode===200&&(this.medicalRecords=n.data,this.totalMedicalRecords=n.totalPage*l)},n=>{console.error("Error fetching appointments",n)})}viewMedicalRecordDetails(e){this.selectedMedicalRecord=e,this.visibleMedicalRecord=!0}closeRescheduleDialog(){this.rescheduleVisible=!1,this.selectedAppointment=null}static{this.\u0275fac=function(l){return new(l||r)(g(O),g(Ue),g(Me),g(x))}}static{this.\u0275cmp=C({type:r,selectors:[["app-patient-dashboard"]],decls:60,vars:38,consts:[[1,"card"],[1,"card-body"],["label","Appointments"],["id","pat_appointments"],[1,"card","card-table","mb-3"],[1,"table-responsive",2,"min-height","70vh"],[1,"table","table-hover","table-center","mb-3"],[1,"d-flex","justify-content-end"],["optionLabel","name","placeholder","Filter","resetFilterOnHide","true",3,"ngModelChange","onChange","options","ngModel","checkmark","showClear"],[4,"ngFor","ngForOf"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords}",3,"onPageChange","rows","totalRecords","rowsPerPageOptions","showCurrentPageReport"],["header","Appointment Details",3,"visibleChange","modal","visible"],["class","row",4,"ngIf"],["label","Medical Records"],["id","pat_medical_records"],[1,"card","card-table","mb-0"],[1,"table-responsive"],[1,"table","table-hover","table-center","mb-0"],[3,"onPageChange","rows","totalRecords","rowsPerPageOptions"],["header","Medical Record Details",3,"visibleChange","modal","visible"],["header","Reschedule Appointment",3,"visibleChange","visible","modal"],[3,"selectedSlot","isReschedule","selectedApp"],[1,"d-flex","justify-content-between","mx-2"],["mat-raised-button","","extended","","type","button",3,"click"],["type","submit","mat-flat-button","","extended","",3,"click","disabled"],[1,"table-avatar"],[1,"avatar","avatar-sm","me-3"],["alt","Doctor Image","width","100%",1,"booking-doc-img",3,"src","preview"],[3,"click"],[1,"d-block","text-info"],["class","badge badge-pill",3,"ngClass",4,"ngIf"],["class","badge badge-pill","style","background-color: rgb(29, 216, 85);  color: rgb(255, 255, 255);",4,"ngIf"],[1,"text-right"],[1,"table-action","d-flex","justify-content-end"],["type","button",1,"btn","btn-sm","bg-warning-light","me-2",3,"click"],[1,"far","fa-eye"],["class","btn btn-sm bg-danger-light me-2",3,"click",4,"ngIf"],["class","btn btn-sm bg-info-light me-2",3,"click",4,"ngIf"],[1,"badge","badge-pill",3,"ngClass"],[1,"badge","badge-pill",2,"background-color","rgb(29, 216, 85)","color","rgb(255, 255, 255)"],[1,"btn","btn-sm","bg-danger-light","me-2",3,"click"],[1,"fas","fa-times"],[1,"btn","btn-sm","bg-info-light","me-2",3,"click"],[1,"fa-solid","fa-rotate"],[1,"row"],[1,"d-flex","justify-content-between","pe-2"],[1,"row","d-flex","justify-content-between","pe-0"],[1,"col-4"],[1,"col-8","pe-0","d-flex","justify-content-end",2,"text-align","justify"],[1,"mh-25"],[1,"d-flex","justify-content-between","pt-4"],["mat-raised-button","",3,"click"],["target","_blank",3,"href"],[1,"avatar","avatar-sm","mr-3",3,"click"],["alt","User Image",1,"avatar-img","rounded-circle",3,"src"],[1,"table-action"],[1,"btn","btn-sm","bg-info-light",3,"click"],["class","d-flex justify-content-between pe-2",4,"ngIf"],[1,"fas","fa-heartbeat","fa-lg",2,"color","#e10909"],[4,"ngIf"],["alt","","width","580",1,"img-fluid",3,"src","preview"]],template:function(l,n){l&1&&(t(0,"div")(1,"div",0)(2,"div",1)(3,"mat-tab-group")(4,"mat-tab",2)(5,"div",3)(6,"div",4)(7,"div",1)(8,"div",5)(9,"table",6)(10,"thead")(11,"tr")(12,"th"),a(13,"Doctor"),i(),t(14,"th"),a(15,"Appointment Date"),i(),t(16,"th"),a(17,"Status"),i(),t(18,"th",7)(19,"p-dropdown",8),b("ngModelChange",function(s){return _(n.selectedOption,s)||(n.selectedOption=s),s}),c("onChange",function(s){return n.applyFilter(s)}),i()()()(),t(20,"tbody"),P(21,_t,24,14,"tr",9),i()()(),t(22,"p-paginator",10),c("onPageChange",function(s){return n.handlePageEvent(s)}),i()()()(),t(23,"p-dialog",11),b("visibleChange",function(s){return _(n.visible,s)||(n.visible=s),s}),P(24,bt,47,21,"div",12),i()(),t(25,"mat-tab",13)(26,"div",14)(27,"div",15)(28,"div",1)(29,"div",16)(30,"table",17)(31,"thead")(32,"tr")(33,"th"),a(34,"ID"),i(),t(35,"th"),a(36,"Created Date"),i(),t(37,"th"),a(38,"Appointment Date"),i(),t(39,"th"),a(40,"Appointment Status"),i(),t(41,"th"),a(42,"Description"),i(),t(43,"th"),a(44,"Attachment"),i(),t(45,"th"),a(46,"Created By"),i(),p(47,"th"),i()(),t(48,"tbody"),P(49,wt,32,18,"tr",9),i()()(),t(50,"p-paginator",18),c("onPageChange",function(s){return n.handlePageEvent(s)}),i()()()(),t(51,"p-dialog",19),b("visibleChange",function(s){return _(n.visibleMedicalRecord,s)||(n.visibleMedicalRecord=s),s}),P(52,Rt,73,21,"div",12),i()()()()()(),t(53,"p-dialog",20),b("visibleChange",function(s){return _(n.rescheduleVisible,s)||(n.rescheduleVisible=s),s}),t(54,"app-schedule",21),c("selectedSlot",function(s){return n.handleSelectedSlot(s)}),i(),t(55,"div",22)(56,"button",23),c("click",function(){return n.closeRescheduleDialog()}),a(57," Cancel "),i(),t(58,"button",24),c("click",function(){return n.submitRescheduleAppointment()}),a(59," Done "),i()()()),l&2&&(o(19),I(y(32,pt)),m("options",n.filterOptions),S("ngModel",n.selectedOption),m("checkmark",!0)("showClear",!0),o(2),m("ngForOf",n.filteredAppointments),o(),m("rows",n.pageSize)("totalRecords",n.totalAppointments)("rowsPerPageOptions",y(33,Ze))("showCurrentPageReport",!0),o(),I(y(34,ct)),m("modal",!0),S("visible",n.visible),o(),m("ngIf",n.selectedAppointment),o(25),m("ngForOf",n.medicalRecords),o(),m("rows",n.pageSize)("totalRecords",n.totalMedicalRecords)("rowsPerPageOptions",y(35,Ze)),o(),I(y(36,ut)),m("modal",!0),S("visible",n.visibleMedicalRecord),o(),m("ngIf",n.selectedMedicalRecord),o(),I(y(37,gt)),S("visible",n.rescheduleVisible),m("modal",!0),o(),m("isReschedule",!0)("selectedApp",n.selectedAppointment),o(4),m("disabled",n.timeSlotSelected==null))},dependencies:[ie,ne,T,Be,Ve,L,F,J,ye,be,xe,Oe,De,He,ae],styles:["a[_ngcontent-%COMP%]:hover{cursor:pointer!important}"]})}}return r})();var Q=class{constructor(){}};function Dt(r,u){r&1&&(t(0,"div",27),p(1,"p-progressSpinner",28),i())}var ot=(()=>{class r{constructor(e,l,n,d){this.patientService=e,this.messageService=l,this.authService=n,this.route=d,this.originalProfile={},this.updateProfile=new Q,this.imagePreview=null,this.loading=!1}ngOnInit(){this.authService.getUserData().subscribe(e=>{this.originalProfile=Y({},e),e.dateOfBirth=new Date(e.dateOfBirth),this.updateProfile=Y({},e)})}get genderLabel(){return this.updateProfile?.gender?"Male":"Female"}onFileSelected(e){if(this.selectedFile=e.target.files[0],this.selectedFile){let l=new FileReader;l.onload=()=>{this.imagePreview=l.result},l.readAsDataURL(this.selectedFile)}}onSubmit(){this.loading=!0,this.patientService.updatePatientProfile(this.updateProfile,this.selectedFile).subscribe(e=>{this.loading=!1,e.statusCode===200?(this.messageService.add({key:"messageToast",severity:"success",summary:"Success",detail:e.message||"Profile updated successfully"}),setTimeout(()=>{this.authService.getUserData().subscribe(l=>{this.authService.setUserData(l)})},1e3)):(console.log(e.message),this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:e.message||"Failed to update profile"}))},e=>{this.loading=!1,console.error("Failed to update profile",e),this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:"Failed to update profile due to server error"})})}static{this.\u0275fac=function(l){return new(l||r)(g(O),g(x),g(N),g(U))}}static{this.\u0275cmp=C({type:r,selectors:[["app-patient-profile"]],decls:62,vars:14,consts:[[1,"card"],[1,"card-body"],[3,"ngSubmit"],[1,"row","form-row"],[1,"col-md-12"],[1,"form-group"],[1,"change-avatar"],[1,"profile-img"],["alt","Doctor Image","width","100%",3,"src","preview"],[1,"upload-img"],[1,"change-photo-btn"],[1,"fa","fa-upload"],["type","file",1,"upload",3,"change"],[1,"form-text","text-muted"],[1,"col-12","col-md-6"],["type","text","name","firstName",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","lastName",1,"form-control",3,"ngModelChange","ngModel"],["name","dateOfBirth","inputStyleClass","custom-calendar","inputId","icondisplay",3,"ngModelChange","ngModel","iconDisplay","showIcon"],["name","gender",1,"form-control","select",3,"ngModelChange","ngModel"],[3,"ngValue"],["type","email","name","email","disabled","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","phone",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],["type","text","name","address",1,"form-control",3,"ngModelChange","ngModel"],[1,"submit-section"],["type","submit",1,"btn","btn-primary","submit-btn"],["class","spinner-container",4,"ngIf"],[1,"spinner-container"],["styleClass","w-2rem h-2rem","strokeWidth","3","fill","var(--surface-ground)","animationDuration",".5s"]],template:function(l,n){l&1&&(t(0,"div")(1,"div",0)(2,"div",1)(3,"form",2),c("ngSubmit",function(){return n.onSubmit()}),t(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7),p(9,"p-image",8),i(),t(10,"div",9)(11,"div",10)(12,"span"),p(13,"i",11),a(14," Upload Photo"),i(),t(15,"input",12),c("change",function(s){return n.onFileSelected(s)}),i()(),t(16,"small",13),a(17,"Allowed JPG, GIF or PNG. Max size of 2MB"),i()()()()(),t(18,"div",14)(19,"div",5)(20,"label"),a(21,"First Name"),i(),t(22,"input",15),b("ngModelChange",function(s){return _(n.updateProfile.firstName,s)||(n.updateProfile.firstName=s),s}),i()()(),t(23,"div",14)(24,"div",5)(25,"label"),a(26,"Last Name"),i(),t(27,"input",16),b("ngModelChange",function(s){return _(n.updateProfile.lastName,s)||(n.updateProfile.lastName=s),s}),i()()(),t(28,"div",14)(29,"div",5)(30,"label"),a(31,"Date of Birth"),i(),t(32,"div")(33,"p-calendar",17),b("ngModelChange",function(s){return _(n.updateProfile.dateOfBirth,s)||(n.updateProfile.dateOfBirth=s),s}),i()()()(),t(34,"div",14)(35,"div",5)(36,"label"),a(37,"Gender"),i(),t(38,"select",18),b("ngModelChange",function(s){return _(n.updateProfile.gender,s)||(n.updateProfile.gender=s),s}),t(39,"option",19),a(40,"Male"),i(),t(41,"option",19),a(42,"Female"),i()()()(),t(43,"div",14)(44,"div",5)(45,"label"),a(46,"Email ID"),i(),t(47,"input",20),b("ngModelChange",function(s){return _(n.updateProfile.email,s)||(n.updateProfile.email=s),s}),i()()(),t(48,"div",14)(49,"div",5)(50,"label"),a(51,"Mobile"),i(),t(52,"input",21),b("ngModelChange",function(s){return _(n.updateProfile.phone,s)||(n.updateProfile.phone=s),s}),i()()(),t(53,"div",22)(54,"div",5)(55,"label"),a(56,"Address"),i(),t(57,"input",23),b("ngModelChange",function(s){return _(n.updateProfile.address,s)||(n.updateProfile.address=s),s}),i()()()(),t(58,"div",24)(59,"button",25),a(60," Save Changes "),i(),P(61,Dt,2,0,"div",26),i()()()()()),l&2&&(o(9),m("src",n.imagePreview)("preview",!0),o(13),S("ngModel",n.updateProfile.firstName),o(5),S("ngModel",n.updateProfile.lastName),o(6),S("ngModel",n.updateProfile.dateOfBirth),m("iconDisplay","input")("showIcon",!0),o(5),S("ngModel",n.updateProfile.gender),o(),m("ngValue",!0),o(2),m("ngValue",!1),o(6),S("ngModel",n.updateProfile.email),o(5),S("ngModel",n.updateProfile.phone),o(5),S("ngModel",n.updateProfile.address),o(4),m("ngIf",n.loading))},dependencies:[T,L,K,fe,he,me,ge,F,q,J,pe,Fe,Ae]})}}return r})();var It=()=>({exact:!0}),rt=(()=>{class r{constructor(e,l,n){this.authService=e,this.store=l,this.messageService=n,this.patientProfile={}}ngOnInit(){this.authService.getUserData().subscribe(e=>{this.patientProfile=e}),this.authService.userData$.subscribe(e=>{e&&(this.patientProfile=e)})}logout(){this.authService.logout().subscribe({next:e=>{this.store.dispatch(de({logoutSuccess:"Logout Success"}))},error:e=>{this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:"Fail to logout"})}})}static{this.\u0275fac=function(l){return new(l||r)(g(N),g(se),g(x))}}static{this.\u0275cmp=C({type:r,selectors:[["app-patient-sidebar"]],decls:40,vars:10,consts:[[1,"profile-sidebar"],[1,"widget-profile","pro-widget-content"],[1,"profile-info-widget"],[1,"booking-doc-img"],["alt","Doctor Image","width","100%",3,"src","preview"],[1,"profile-det-info"],[1,"patient-details"],[1,"fas","fa-birthday-cake"],[1,"mb-0"],[1,"fas","fa-map-marker-alt"],[1,"dashboard-widget"],[1,"dashboard-menu"],["routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/patient/dashboard"],[1,"fas","fa-columns"],["routerLinkActive","active"],["routerLink","/patient/profile"],[1,"fas","fa-user-cog"],["routerLink","/patient/change-password"],[1,"fas","fa-lock"],["routerLink","",3,"click"],[1,"fas","fa-sign-out-alt"]],template:function(l,n){l&1&&(t(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),p(5,"p-image",4),i(),t(6,"div",5)(7,"h3"),a(8),i(),t(9,"div",6)(10,"h5"),p(11,"i",7),a(12),M(13,"dateFormat"),i(),t(14,"h5",8),p(15,"i",9),a(16),i()()()()(),t(17,"div",10)(18,"nav",11)(19,"ul")(20,"li",12)(21,"a",13),p(22,"i",14),t(23,"span"),a(24,"Dashboard"),i()()(),t(25,"li",15)(26,"a",16),p(27,"i",17),t(28,"span"),a(29,"Profile Settings"),i()()(),t(30,"li",15)(31,"a",18),p(32,"i",19),t(33,"span"),a(34,"Change Password"),i()()(),t(35,"li")(36,"a",20),c("click",function(){return n.logout()}),p(37,"i",21),t(38,"span"),a(39,"Logout"),i()()()()()()()()),l&2&&(o(5),m("src",(n.patientProfile==null?null:n.patientProfile.avatarFilePath)||"assets/images/doctors/doctor-thumb-02.jpg")("preview",!0),o(3),A("",n.patientProfile.firstName," ",n.patientProfile.lastName,""),o(4),v(" ",z(13,7,n.patientProfile.dateOfBirth),""),o(4),v(" ",n.patientProfile.address," "),o(4),m("routerLinkActiveOptions",y(9,It)))},dependencies:[H,le,L,Je],styles:["[_nghost-%COMP%]{display:block;width:100%}"]})}}return r})();var kt=()=>["/"],lt=(()=>{class r{static{this.\u0275fac=function(l){return new(l||r)}}static{this.\u0275cmp=C({type:r,selectors:[["app-patient-bread-crumb"]],decls:13,vars:2,consts:[[1,"breadcrumb-bar","p-0"],[1,"container-fluid","pt-2"],[1,"row","align-items-center"],[1,"col-md-12","col-12"],["aria-label","breadcrumb",1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active"],[1,"breadcrumb-title"]],template:function(l,n){l&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"nav",4)(5,"ol",5)(6,"li",6)(7,"a",7),a(8,"Home"),i()(),t(9,"li",8),a(10," Dashboard "),i()()(),t(11,"h2",9),a(12,"Dashboard"),i()()()()()),l&2&&(o(7),m("routerLink",y(1,kt)))},dependencies:[H]})}}return r})();var st=(()=>{class r{constructor(e){this.patientService=e}ngOnInit(){this.fetchPatientProfile()}fetchPatientProfile(){this.patientService.getPatientProfile().subscribe(e=>{e!=null&&(this.patientProfile=e,console.log("Patient Profile:",this.patientProfile))},e=>{console.error("Error fetching patient profile:",e)})}static{this.\u0275fac=function(l){return new(l||r)(g(O))}}static{this.\u0275cmp=C({type:r,selectors:[["app-patient"]],decls:8,vars:0,consts:[[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","col-lg-4","col-xl-3"],[1,"col-md-12","col-lg-8","col-xl-9",2,"min-height","90vh"]],template:function(l,n){l&1&&(p(0,"app-patient-bread-crumb"),t(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),p(5,"app-patient-sidebar"),i(),t(6,"div",4),p(7,"router-outlet"),i()()()())},dependencies:[re,rt,lt]})}}return r})();function Nt(r,u){r&1&&(t(0,"small",14),a(1," Password must be at least 8 characters and contain at least one number. "),i())}function Ft(r,u){r&1&&(t(0,"h6"),a(1,"Pick a password"),i())}function Lt(r,u){r&1&&(p(0,"p-divider"),t(1,"p",15),a(2,"Suggestions"),i(),t(3,"ul",16)(4,"li"),a(5,"At least one numeric"),i(),t(6,"li"),a(7,"Minimum 8 characters"),i()())}function Ot(r,u){r&1&&(t(0,"small",14),a(1," Password must be at least 8 characters and contain at least one number. "),i())}function Bt(r,u){r&1&&(t(0,"small",14),a(1," Passwords do not match. "),i())}var dt=(()=>{class r{constructor(e,l,n,d){this.fb=e,this.authService=l,this.messageService=n,this.router=d,this.showPass=!1,this.showConfirmPass=!1,this.formChangePasswordPatient=this.fb.group({oldPassword:["",[V.required,V.minLength(8)]],newPassword:["",[V.required,this.passwordValidator]],confirmNewPassword:["",[V.required]]},{validators:this.passwordsMatchValidator})}passwordValidator(e){let l=e.value;if(!l)return null;let n=/\d/.test(l),d=l.length>=8;return!n||!d?{passwordInvalid:!0}:null}passwordsMatchValidator(e){let l=e.get("newPassword")?.value,n=e.get("confirmNewPassword")?.value;return l===n?null:{passwordsMismatch:!0}}showPassword(){this.showPass=!this.showPass}showConfirmPassword(){this.showConfirmPass=!this.showConfirmPass}onSubmit(){if(this.formChangePasswordPatient.invalid){this.messageService.add({key:"messageToast",severity:"warn",summary:"Validation Error",detail:"Please fill out all fields correctly."});return}let{oldPassword:e,newPassword:l,confirmNewPassword:n}=this.formChangePasswordPatient.value,d=localStorage.getItem("token");if(!d){this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:"Authentication token is missing!"});return}this.authService.resetPassword(d,e,l,n).subscribe(s=>{s.statusCode===200?(this.messageService.add({key:"messageToast",severity:"success",summary:"Success",detail:"Change password successfully"}),this.formChangePasswordPatient.reset(),setTimeout(()=>{this.router.navigate(["/patient/dashboard"])},1e3)):this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:s.message})},s=>{this.messageService.add({key:"messageToast",severity:"error",summary:"Error",detail:s.message})})}static{this.\u0275fac=function(l){return new(l||r)(g(ve),g(N),g(x),g(U))}}static{this.\u0275cmp=C({type:r,selectors:[["app-patient-change-password"]],decls:32,vars:8,consts:[[1,"card"],[1,"card-body"],[1,"row"],[1,"col-md-12","col-lg-6"],[3,"ngSubmit","formGroup"],[1,"form-group"],["formControlName","oldPassword",3,"toggleMask"],["class","text-danger",4,"ngIf"],["formControlName","newPassword",3,"toggleMask"],["pTemplate","header"],["pTemplate","footer"],["formControlName","confirmNewPassword",3,"toggleMask"],[1,"submit-section"],["type","submit",1,"btn","btn-primary","submit-btn",3,"disabled"],[1,"text-danger"],[1,"mt-2"],[1,"pl-2","ml-2","mt-0",2,"line-height","1.5"]],template:function(l,n){if(l&1&&(t(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"form",4),c("ngSubmit",function(){return n.onSubmit()}),t(6,"div",5)(7,"label"),a(8,"Old Password"),i(),p(9,"br")(10,"p-password",6)(11,"br"),P(12,Nt,2,0,"small",7),i(),t(13,"div",5)(14,"label"),a(15,"New Password"),i(),p(16,"br"),t(17,"p-password",8),P(18,Ft,2,0,"ng-template",9)(19,Lt,8,0,"ng-template",10),i(),p(20,"br"),P(21,Ot,2,0,"small",7),i(),t(22,"div",5)(23,"label"),a(24,"Confirm Password"),i(),p(25,"br")(26,"p-password",11)(27,"br"),P(28,Bt,2,0,"small",7),i(),t(29,"div",12)(30,"button",13),a(31," Save Changes "),i()()()()()()()()),l&2){let d,s,te;o(5),m("formGroup",n.formChangePasswordPatient),o(5),m("toggleMask",!0),o(2),m("ngIf",((d=n.formChangePasswordPatient.get("oldPassword"))==null?null:d.invalid)&&((d=n.formChangePasswordPatient.get("oldPassword"))==null?null:d.touched)),o(5),m("toggleMask",!0),o(4),m("ngIf",((s=n.formChangePasswordPatient.get("newPassword"))==null?null:s.invalid)&&((s=n.formChangePasswordPatient.get("newPassword"))==null?null:s.touched)),o(5),m("toggleMask",!0),o(2),m("ngIf",n.formChangePasswordPatient.hasError("passwordsMismatch")&&((te=n.formChangePasswordPatient.get("confirmNewPassword"))==null?null:te.touched)),o(2),m("disabled",n.formChangePasswordPatient.invalid)}},dependencies:[T,_e,K,F,q,ce,ue,Ke,Te]})}}return r})();var Vt=[{path:"",component:st,children:[{path:"",redirectTo:"/patient/dashboard",pathMatch:"full"},{path:"dashboard",component:nt,title:"Patient Dashboard"},{path:"profile",component:ot,title:"Patient Profile"},{path:"change-password",component:dt,title:"Patient Change Password"}]}],mt=(()=>{class r{static{this.\u0275fac=function(l){return new(l||r)}}static{this.\u0275mod=j({type:r})}static{this.\u0275inj=W({imports:[B.forChild(Vt),B]})}}return r})();var Qi=(()=>{class r{static{this.\u0275fac=function(l){return new(l||r)}}static{this.\u0275mod=j({type:r})}static{this.\u0275inj=W({imports:[oe,mt,B,We,Ee,Xe,Pe,Le,we,Re,Ye,ke,je,Ie,Ce,qe,Se,Ge,ze,Qe,Ne]})}}return r})();export{Qi as a};
